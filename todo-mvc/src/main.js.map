{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///src/main.js","webpack:///webpack/bootstrap 1a1da5f2d15cb21bfc5c","webpack:///Symbol.ts","webpack:///has.ts","webpack:///global.ts","webpack:///d.ts","webpack:///WidgetBase.ts","webpack:///lang.ts","webpack:///iterator.ts","webpack:///Themeable.ts","webpack:///Evented.ts","webpack:///Map.ts","webpack:///Promise.ts","webpack:///WeakMap.ts","webpack:///decorators.ts","webpack:///(webpack)/buildin/global.js","webpack:///UrlSearchParams.ts","webpack:///array.ts","webpack:///util.ts","webpack:///./~/maquette/dist/maquette.js","webpack:///./~/process/browser.js","webpack:///on.ts","webpack:///Router.ts","webpack:///path.ts","webpack:///WidgetRegistry.ts","webpack:///./src/main.ts","webpack:///./src/widgets/styles/todoApp.css?e15c","webpack:///./src/widgets/styles/todoFilter.css?ef0b","webpack:///./src/widgets/styles/todoFooter.css?3577","webpack:///./src/widgets/styles/todoHeader.css?a04a","webpack:///./src/widgets/styles/todoItem.css?9c42","webpack:///./src/widgets/styles/todoList.css?8c13","webpack:///./~/pepjs/dist/pep.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///Destroyable.ts","webpack:///aspect.ts","webpack:///ExtensiblePromise.ts","webpack:///Task.ts","webpack:///uuid.ts","webpack:///Route.ts","webpack:///HashHistory.ts","webpack:///HistoryBase.ts","webpack:///Set.ts","webpack:///number.ts","webpack:///object.ts","webpack:///string.ts","webpack:///queue.ts","webpack:///RegistryHandler.ts","webpack:///cssTransitions.ts","webpack:///diff.ts","webpack:///Projector.ts","webpack:///./~/timers-browserify/main.js","webpack:///./src/routes.ts","webpack:///./src/widgets/TodoApp.ts","webpack:///./src/widgets/TodoFilter.ts","webpack:///./src/widgets/TodoFooter.ts","webpack:///./src/widgets/TodoHeader.ts","webpack:///./src/widgets/TodoItem.ts","webpack:///./src/widgets/TodoList.ts"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Shim","has_1","global_1","util_1","isSymbol","validateSymbol","TypeError","Symbol","InternalSymbol","defineProperties","create","objPrototype","globalSymbols","getSymbolName","created","desc","postfix","String","getOwnPropertyDescriptor","set","getValueDescriptor","description","sym","undefined","__description__","__name__","key","keyFor","hasInstance","for","isConcatSpreadable","iterator","match","observable","replace","search","species","split","toPrimitive","toStringTag","unscopables","constructor","toString","valueOf","Exposed","SymbolShim","default","forEach","wellKnown","has_2","add","assign","Array","fill","Number","POSITIVE_INFINITY","callSite","_a","raw","substitutions","_i","arguments","length","Math","acosh","clz32","imul","Promise","Observable","Set","has","keys","Map","map","values","entries","e","WeakMap","key1","key2","freeze","setImmediate","postMessage","requestAnimationFrame","Boolean","MutationObserver","WebKitMutationObserver","global","globalObject","Function","isWNode","child","type","WNODE","isHNode","HNODE","decorate","dNodes","modifier","predicate","nodes","isArray","slice","node","pop","children","concat","w","widgetConstructor","properties","v","tag","propertiesOrChildren","classes","lang_1","render","options","maquette_1","h","vNodes","Symbol_1","WidgetRegistry_1","registry","afterRender","method","handleDecorator","target","propertyKey","addDecorator","beforeRender","diffProperty","propertyName","diffType","diffFunction","onPropertiesChanged","handler","descriptor","isHNodeWithKey","d_1","__extends","extendStatics","setPrototypeOf","__proto__","b","__","__decorate","decorators","r","Reflect","__metadata","k","metadata","Evented_1","Map_1","Set_1","WeakMap_1","diff_1","RegistryHandler_1","decoratorMap","WidgetBase","_super","_this","_children","_decoratorCache","_properties","_previousProperties","_cachedChildrenMap","_diffPropertyFunctionMap","_renderDecorators","_bindFunctionPropertyMap","_registries","own","on","invalidate","bind","evt","_dirty","getDecorator","propertiesChangedFunction","attachLifecycleCallbacks","afterCreate","afterCreateCallback","afterUpdate","afterUpdateCallback","element","projectionOptions","vnodeSelector","onElementCreated","onElementUpdated","__setProperties__","diffPropertyResults","diffPropertyChangedKeys","bindFunctionProperties","registeredDiffPropertyConfigs","allProperties","filter","index","self","indexOf","propertyDiffHandlers","reduce","diffFunctions","previousValue","newValue","diffHandlers","result","changed","meta","scope","push","emit","changedPropertyKeys","__setChildren__","__render__","_cachedVNode","beforeRenders","beforeRenderFunction","dNode_1","afterRenderFunction","widget","dNodeToVNode","manageDetachedChildren","decoratorKey","decoratorList","specificDecoratorList","apply","_buildDecoratorList","allDecorators","instanceMap","unshift","getPrototypeOf","isWidgetBaseConstructor","bindInfo","boundFunc","dNode","widgetConstructor_1","item","cachedChild_1","childrenMapKey","cachedChildren","some","cachedChildWrapper","used","errorMsg","console","warn","error","Error","filterCachedChildren","cachedChild","destroy","Evented","_type","WIDGET_BASE_TYPE","shouldDeepCopyObject","copyArray","array","inherited","_mixin","deep","sources","kwArgs","copied","copiedClone","source","targetValue","mixins","RangeError","args","deepAssign","deepMixin","duplicate","isIdentical","lateBind","instance","suppliedArgs","mixin","partial","targetFunction","createHandle","destructor","createCompositeHandle","handles","handles_1","isIterable","isArrayLike","iterable","ShimIterator","forOf","callback","thisArg","doBreak","broken","char","code","charCodeAt","string_1","HIGH_SURROGATE_MIN","HIGH_SURROGATE_MAX","next","done","staticDone","list","_nextIndex","_nativeIterator","_list","theme","WidgetBase_1","splitClassStrings","splitClasses","className","createClassNameObject","classNames","applied","flaggedClassNames","createThemeClassesLookup","currentClassNames","baseClass","ThemeableMixin","base","Themeable","_allClasses","_recalculateClasses","_registeredClassesMap","_theme","classesGetter","themeClasses","themeable","getThemeClasses","fixedClasses","getFixedClasses","recalculateThemeClasses","classesFunctionChain","fixed","filteredClassNames","appliedClasses","_baseThemeClassesReverseLookup","registerThemeClass","appendToAllClassNames","themeChanged","array_1","includes","extraClassesChanged","negativeClassFlags","extraClasses","themeClass","getBaseThemeClass","extraClassNames","cssClassNames","classesObject","cssClassName","_registeredBaseThemes","reverse","checkForDuplicates","registeredBaseThemeKeys","registeredBaseThemeClasses","THEME_KEY","baseTheme","themeKey","find","isDuplicate","originatingBaseTheme","isActionable","do","resolveListener","listener","event","handlesArraytoHandle","handle","isGlobMatch","globString","targetString","regex","regexMap","RegExp","test","aspect_1","Destroyable_1","listenersMap","type_1","listeners","listenerMapArg_1","Destroyable","decorators_1","iterator_1","object_1","_keys","_values","_indexOfKey","length_1","is","clear","delete","splice","context","length_2","hasClass","queue_1","isThenable","then","executor","state","isChained","isResolved","callbacks","whenFinished","settle","newState","resolvedValue","queueMicroTask","count","resolve","onFulfilled","onRejected","reject","all","fulfill","complete","finish","populating","total","processItem","race","reason","catch","getUID","floor","random","DELETED","generateName","startId","Date","now","_frozenEntries","_getFrozenEntryIndex","entry","_name","frozenIndex","isFrozen","feature","trueClass","falseClass","g","eval","window","parseQueryString","input","query","indexOfFirstEquals","decodeURIComponent","UrlSearchParams","append","getAll","encodedKey","encodeURIComponent","values_1","join","process","isFeatureTestThenable","load","resourceId","require","config","normalize","skip","term","tokens","id","exists","normalizedFeature","toLowerCase","staticCache","testCache","testFunctions","overwrite","testThenables","globalScope","staticFeatures","DojoHasEnvironment","document","location","versions","toLength","isNaN","isFinite","min","max","number_1","MAX_SAFE_INTEGER","toInteger","abs","normalizeOffset","from","arrayLike","mapFunction","Constructor","of","items","copyWithin","offset","start","end","direction","findIndex","searchElement","fromIndex","len","currentElement","wrapNative","writable","nativeFunction","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","createDom","updateDom","NAMESPACE_SVG","NAMESPACE_W3","emptyArray","extend","overrides","same","vnode1","vnode2","toTextVNode","data","text","domNode","appendChildren","parentSelector","insertions","main","missingTransition","DEFAULT_PROJECTION_OPTIONS","namespace","eventHandlerInterceptor","styleApplyer","styleName","style","transitions","enter","exit","applyDefaultProjectionOptions","projectorOptions","checkStyleValue","styleValue","setProperties","propNames","propCount","propName","propValue","token","classList","classNameCount","j","styleNames","styleCount","lastIndexOf","oldPropValue","setAttributeNS","setAttribute","updateProperties","previousProperties","propertiesUpdated","previousOn","remove","newStyleValue","oldStyleValue","findIndexOfChild","sameAs","nodeAdded","vNode","enterAnimation","nodeToRemove","exitAnimation","pointerEvents","removeDomNode","parentNode","removeChild","checkDistinguishable","childNodes","indexToCheck","parentVNode","operation","childNode","updateChildren","vnode","oldChildren","newChildren","oldChildrenLength","newChildrenLength","oldIndex","newIndex","textUpdated","oldChild","newChild","findOldIndex","addChildren","initPropertiesAndChildren","textContent","insertBefore","found","createTextNode","appendChild","charAt","createElementNS","createElement","previous","updated","newVNode","replaceChild","firstChild","updateAnimation","createProjection","update","updatedVnode","selector","childIndex","argsLength","onlyChild","dom","beforeNode","merge","createCache","cachedInputs","cachedOutcome","inputs","calculation","createMapping","getSourceKey","createResult","updateResult","results","newSources","newKeys","oldTargets","sourceKey","searchIndex","createProjector","projector","eventHandler","scheduleRender","scheduled","renderCompleted","stopped","projections","renderFunctions","doRender","renderNow","stop","cancelAnimationFrame","resume","renderMaquetteFunction","detach","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","run","Item","noop","nextTick","title","browser","env","argv","version","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","dispatchEvent","ownerDocument","createEvent","nativeEvent","initEvent","bubbles","cancelable","capture","addEventListener","removeEventListener","pausable","paused","pause","hasBeenAppended","route","parentMap","parent","findRouter","router","createDeferral","cancel","promise","Promise_1","reportError","path","catchRejection","thenable","Task_1","on_1","UrlSearchParams_1","path_1","Router","fallback","history","contextFactory","sharedContext_1","_contextFactory","_currentSelection","_dispatchFromStart","_fallback","_history","_routes","_started","add_1","dispatch","dispatchFromStart","canceled","deferrals","defer","success","parse","searchParams","segments","trailingSlash","redirect","dispatched","select","result_1","params","link","hierarchy","parent_1","addLeadingSlash","leadingSlash","addTrailingSlash","currentPathValues","currentSearchParams","selection","rawPathValues","rawSearchParams","expectedSegments","searchParameters","namedOffset","expectedSegments_1","segment","isNamedSegment","literal","_b","searchParameters_1","_c","value_1","_d","_e","pathname","prefix","replacePath","setPath","startOptions","dispatchCurrent","lastDispatch","redirectCount","redirecting","dispatchResult","current","pathnameTokens","searchStart","hashStart","t","hasRemaining","isMatch","expected","deconstruct","parameters","consume","peek","inSearchComponent","name_1","closing","separator","next_1","WidgetRegistry","widgetLabel","widgetCtor","Projector_1","Route_1","TodoApp_1","routes_1","querySelector","Projector","ProjectorMixin","filterRoute","exec","request","todoapp"," _key","filters","selected","footer","todoCount","clearCompleted","newTodo","toggleAll","todoItem","edit","editing","view","toggle","todoLabel","completed","todoList","PointerEvent","inType","inDict","MOUSE_PROPS","MOUSE_DEFAULTS","buttons","pressure","x","clientX","y","clientY","pointerId","width","height","tiltX","tiltY","twist","tangentialPressure","pointerType","hwTimestamp","isPrimary","SparseArrayMap","size","Installer","binder","addCallback","removeCallback","changedCallback","MO","observer","mutationWatcher","shadowSelector","rule","assertActive","dispatcher","pointermap","assertConnected","elem","inActiveButtonState","USE_MAP","PointerMap","CLONE_PROPS","CLONE_DEFAULTS","BOUNDARY_EVENTS","pointerover","pointerout","pointerenter","pointerleave","HAS_SVG_INSTANCE","SVGElementInstance","eventMap","captureInfo","eventSources","eventSourceList","registerSource","newEvents","events","register","es","unregister","contains","container","contained","ex","down","inEvent","fireEvent","move","up","leave","over","out","leaveOut","propagate","enterOver","_handledByPE","fn","listen","addEvent","unlisten","removeEvent","eventName","boundHandler","makeEvent","relatedTarget","preventDefault","_target","cloneEvent","eventCopy","correspondingUseElement","getTarget","propagateDown","targets","setCapture","inPointerId","inTarget","skipDispatch","releaseCapture","implicitRelease","asyncDispatchEvent","targeting","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","elementFromPoint","targetingShadow","olderShadow","os","olderShadowRoot","se","allShadows","shadows","searchRoot","inRoot","st","sr","ssr","owner","nodeType","Node","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","toArray","OBSERVER_INIT","subtree","childList","attributes","attributeOldValue","attributeFilter","watchSubtree","observe","enableOnSubtree","readyState","installOnLoad","installNewSubtree","findElements","addElement","querySelectorAll","removeElement","el","elementChanged","oldValue","concatLists","accum","isElement","ELEMENT_NODE","flattenMutationTree","inNodes","tree","mutations","mutationHandler","addedNodes","removedNodes","attrib2css","selectors","styles","hasNativePE","MSPointerEvent","hasShadowRoot","ShadowDOMPolyfill","head","createShadowRoot","BUTTON_TO_BUTTONS","HAS_BUTTONS","MouseEvent","INSTALLER","mouseEvents","POINTER_ID","POINTER_TYPE","lastTouches","isEventSimulatedFromTouch","lts","dx","dy","prepareEvent","pd","prepareButtonsForMove","which","mousedown","button","mousemove","mouseup","mouseover","mouseout","deactivateMouse","pointermap$1","touchEvents","elementAdded","getAttribute","touchActionToScrollType","_scrollType","elementRemoved","oldSt","scrollTypes","EMITTER","XSCROLLER","YSCROLLER","SCROLLER","touchAction","firstTouch","isPrimaryTouch","inTouch","identifier","setPrimaryTouch","firstXY","X","Y","scrolling","cancelResetClickCount","removePrimaryPointer","inPointer","resetClickCount","clickCount","resetId","typeToButtons","ret","touchToPointer","cte","currentTouchEvent","detail","radiusX","webkitRadiusX","radiusY","webkitRadiusY","force","webkitForce","altKey","ctrlKey","metaKey","shiftKey","processTouches","inFunction","tl","changedTouches","shouldScroll","scrollAxis","currentTarget","oa","da","doa","findTouch","inTL","inId","vacuumTouches","touches","cancelOut","touchstart","dedupSynthMouse","overDown","outTarget","touchmove","touchcancel","moveOverOut","pointer","outEvent","touchend","upOut","cleanUpPointer","lt","pointermap$2","HAS_BITMAP_TYPE","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","cleanup","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSLostPointerCapture","MSGotPointerCapture","navigator","msPointerEnabled","msSetPointerCapture","msReleasePointerCapture","tp","msMaxTouchPoints","ontouchstart","Element","setPointerCapture","releasePointerCapture","hasPointerCapture","targetFinding","task","tasksByHandle","nextHandle","registerImmediate","clearImmediate","runIfPresent","currentlyRunningATask","doc","attachTo","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","onGlobalMessage","attachEvent","MessageChannel","channel","port1","port2","html","documentElement","script","onreadystatechange","destroyed","isMapLike","adviseObject","advice","receiveArguments","advised","nextId","before","adviseJoinPoint","joinPoint","getJoinPointDispatcher","adviceMap","dispatchAdviceMap","after","getDispatcherObject","methodName","existing","executionId","around","newResults","previousArgs","previousResult","before_1","after_1","afterJoinPoint","afterObject","joinPointOrTarget","methodNameOrAdvice","objectAdvice","aroundJoinPoint","aroundObject","beforeJoinPoint","beforeObject","unwrapPromises","unwrapped","ExtensiblePromise","_promise","promiseKeys_1","promiseResults","returnValue","rejected","valueOrError","isTask","ExtensiblePromise_1","Task","canceler","superResolve","superReject","_state","_cancel","finallyTask","runFinally","_finally","finally","ArrayBuffer","FormData","FileReader","XMLHttpRequest","open","responseType","abort","Buffer","fetch","uuid","computeDefaultParams","fromPathname","Router_1","Route","guard","computeParams","trailingSlashMustMatch","deconstructedPath","_computeParams","_exec","_guard","_index","_path","_trailingSlashMustMatch","hasTrailingSlash","knownSearchParams","matchResult","guardResult","remainingSelection","remainingSegments_1","nested","nestedResult","HistoryBase_1","HashHistory","browserLocation","_current","hash","_browserLocation","HistoryBase","_setData","idx","callbackfn","isInteger","isSafeInteger","EPSILON","pow","MIN_SAFE_INTEGER","getOwnPropertyDescriptorsWrapper","descriptors","getOwnPropertyNames","getOwnPropertySymbols","value1","value2","substring","symbolAwareKeys","prop","hasGetOwnPropertySymbols","getOwnPropertyDescriptors","LOW_SURROGATE_MIN","LOW_SURROGATE_MAX","normalizeSubstringArgs","position","isEnd","rawStrings","numSubstitutions","fromCodePoint","codePoints","fromCharCode","codeUnits","codePoint","highSurrogate","lowSurrogate","codePointAt","first","second","repeat","Infinity","startsWith","endsWith","endPosition","padEnd","maxLength","fillString","strText","padding","padStart","executeTask","isActive","getQueueHandle","checkMicroTaskQueue","microTasks","queueTask","enqueue","stopPropagation","shift","isMicroTaskQueued_1","queueAnimationTask","rafId","HostMutationObserver","node_1","queue_2","RegistryHandler","registryWrapper","original","replacement","this_1","state_1","determineBrowserStyleNames","browserSpecificTransitionEndEventName","browserSpecificAnimationEndEventName","initialize","runAndCleanUp","startAnimation","finishAnimation","finished","transitionEnd","removeNode","activeClass","exitAnimationActive","enterAnimationActive","isObjectOrArray","always","previousProperty","newProperty","ignore","custom","reference","shallow","validOldProperty","validNewProperty","previousKeys","diff","diffDiffType","class_1","_projectionOptions","cssTransitions_1","_boundDoRender","_boundRender","body","projectorState","ProjectorAttachState","Detached","AttachType","Append","attach","Merge","Replace","_scheduled","_paused","Attached","_root","setChildren","eventHandlers","substr","_projection","_attachHandle","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","HashHistory_1","uuid_1","Themeable_1","d_2","TodoHeader_1","TodoList_1","TodoItem_1","TodoFooter_1","TodoFilter_1","css","TodoAppBase","TodoApp","todos","completedCount","updateTodo","editTodo","removeTodo","toggleTodo","toggleAllTodos","activeFilter","allCompleted","activeCount","completedItems","addTodo","setTodo","todo","onUpdate","label","trim","TodoFilterBase","TodoFilter","href","innerHTML","TodoHeaderBase","TodoFooter","countLabel","onclick","TodoHeader","newTodoProperties","onkeyup","oninput","placeholder","onchange","checked","focus","TodoItemBase","TodoItem","ondblclick","onblur","filterName","TodoListBase","TodoList","todoItems"],"mappings":"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","file":"src/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*!\n * [Dojo](https://dojo.io/)\n * Copyright [JS Foundation](https://js.foundation/) & contributors\n * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)\n * All rights reserved\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 61);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(1);\nvar global_1 = __webpack_require__(2);\nvar util_1 = __webpack_require__(18);\nvar Shim;\n(function (Shim) {\n    /* tslint:disable-next-line:variable-name */\n    var Symbol;\n    /* tslint:disable-next-line:variable-name */\n    var InternalSymbol;\n    var defineProperties = Object.defineProperties;\n    var defineProperty = Object.defineProperty;\n    var create = Object.create;\n    var objPrototype = Object.prototype;\n    var globalSymbols = {};\n    var getSymbolName = (function () {\n        var created = create(null);\n        return function (desc) {\n            var postfix = 0;\n            var name;\n            while (created[String(desc) + (postfix || '')]) {\n                ++postfix;\n            }\n            desc += String(postfix || '');\n            created[desc] = true;\n            name = '@@' + desc;\n            // FIXME: Temporary guard until the duplicate execution when testing can be\n            // pinned down.\n            if (!Object.getOwnPropertyDescriptor(objPrototype, name)) {\n                defineProperty(objPrototype, name, {\n                    set: function (value) {\n                        defineProperty(this, name, util_1.getValueDescriptor(value));\n                    }\n                });\n            }\n            return name;\n        };\n    }());\n    InternalSymbol = function Symbol(description) {\n        if (this instanceof InternalSymbol) {\n            throw new TypeError('TypeError: Symbol is not a constructor');\n        }\n        return Symbol(description);\n    };\n    Symbol = function Symbol(description) {\n        if (this instanceof Symbol) {\n            throw new TypeError('TypeError: Symbol is not a constructor');\n        }\n        var sym = Object.create(InternalSymbol.prototype);\n        description = (description === undefined ? '' : String(description));\n        return defineProperties(sym, {\n            __description__: util_1.getValueDescriptor(description),\n            __name__: util_1.getValueDescriptor(getSymbolName(description))\n        });\n    };\n    /**\n     * A custom guard function that determines if an object is a symbol or not\n     * @param  {any}       value The value to check to see if it is a symbol or not\n     * @return {is symbol}       Returns true if a symbol or not (and narrows the type guard)\n     */\n    function isSymbol(value) {\n        return (value && ((typeof value === 'symbol') || (value['@@toStringTag'] === 'Symbol'))) || false;\n    }\n    Shim.isSymbol = isSymbol;\n    /**\n     * Throws if the value is not a symbol, used internally within the Shim\n     * @param  {any}    value The value to check\n     * @return {symbol}       Returns the symbol or throws\n     */\n    function validateSymbol(value) {\n        if (!isSymbol(value)) {\n            throw new TypeError(value + ' is not a symbol');\n        }\n        return value;\n    }\n    /* Decorate the Symbol function with the appropriate properties */\n    defineProperty(Symbol, 'for', util_1.getValueDescriptor(function (key) {\n        if (globalSymbols[key]) {\n            return globalSymbols[key];\n        }\n        return (globalSymbols[key] = Symbol(String(key)));\n    }));\n    defineProperties(Symbol, {\n        keyFor: util_1.getValueDescriptor(function (sym) {\n            var key;\n            validateSymbol(sym);\n            for (key in globalSymbols) {\n                if (globalSymbols[key] === sym) {\n                    return key;\n                }\n            }\n        }),\n        hasInstance: util_1.getValueDescriptor(Symbol.for('hasInstance'), false, false),\n        isConcatSpreadable: util_1.getValueDescriptor(Symbol.for('isConcatSpreadable'), false, false),\n        iterator: util_1.getValueDescriptor(Symbol.for('iterator'), false, false),\n        match: util_1.getValueDescriptor(Symbol.for('match'), false, false),\n        observable: util_1.getValueDescriptor(Symbol.for('observable'), false, false),\n        replace: util_1.getValueDescriptor(Symbol.for('replace'), false, false),\n        search: util_1.getValueDescriptor(Symbol.for('search'), false, false),\n        species: util_1.getValueDescriptor(Symbol.for('species'), false, false),\n        split: util_1.getValueDescriptor(Symbol.for('split'), false, false),\n        toPrimitive: util_1.getValueDescriptor(Symbol.for('toPrimitive'), false, false),\n        toStringTag: util_1.getValueDescriptor(Symbol.for('toStringTag'), false, false),\n        unscopables: util_1.getValueDescriptor(Symbol.for('unscopables'), false, false)\n    });\n    /* Decorate the InternalSymbol object */\n    defineProperties(InternalSymbol.prototype, {\n        constructor: util_1.getValueDescriptor(Symbol),\n        toString: util_1.getValueDescriptor(function () { return this.__name__; }, false, false)\n    });\n    /* Decorate the Symbol.prototype */\n    defineProperties(Symbol.prototype, {\n        toString: util_1.getValueDescriptor(function () { return 'Symbol (' + validateSymbol(this).__description__ + ')'; }),\n        valueOf: util_1.getValueDescriptor(function () { return validateSymbol(this); })\n    });\n    defineProperty(Symbol.prototype, Symbol.toPrimitive, util_1.getValueDescriptor(function () { return validateSymbol(this); }));\n    defineProperty(Symbol.prototype, Symbol.toStringTag, util_1.getValueDescriptor('Symbol', false, false, true));\n    defineProperty(InternalSymbol.prototype, Symbol.toPrimitive, util_1.getValueDescriptor(Symbol.prototype[Symbol.toPrimitive], false, false, true));\n    defineProperty(InternalSymbol.prototype, Symbol.toStringTag, util_1.getValueDescriptor(Symbol.prototype[Symbol.toStringTag], false, false, true));\n    /* tslint:disable-next-line:variable-name */\n    Shim.Exposed = Symbol;\n})(Shim = exports.Shim || (exports.Shim = {}));\n/* tslint:disable-next-line:variable-name */\nvar SymbolShim = has_1.default('es6-symbol') ? global_1.default.Symbol : global_1.default.Symbol = Shim.Exposed;\n/**\n * Fill any missing well known symbols if the native Symbol is missing them\n */\n['hasInstance', 'isConcatSpreadable', 'iterator', 'species', 'replace', 'search', 'split', 'match', 'toPrimitive',\n    'toStringTag', 'unscopables', 'observable'].forEach(function (wellKnown) {\n    if (!Symbol[wellKnown]) {\n        Object.defineProperty(Symbol, wellKnown, util_1.getValueDescriptor(Symbol.for(wellKnown), false, false));\n    }\n});\nexports.isSymbol = Shim.isSymbol;\nexports.default = SymbolShim;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(2);\nvar has_1 = __webpack_require__(16);\nvar has_2 = __webpack_require__(16);\nexports.default = has_1.default;\n__export(__webpack_require__(16));\n/* ECMAScript 6 and 7 Features */\n/*\n * Determine whether or not native Symbol exists. If it doesn't, we don't want to use\n * a few other native implementations like Map, WeakMap, Set.  Consider a polyfill that provides Symbol,\n * Map, etc in the global namespace. If the polyfill's Symbol is not compatible with our Symbol, neither\n * will be anything that uses their iterator symbol, like Map, Set, etc.\n */\n/* Symbol */\nhas_2.add('es6-symbol', typeof global_1.default.Symbol !== 'undefined' && typeof Symbol() === 'symbol');\n/* Object */\nhas_2.add('es6-object-assign', typeof Object.assign === 'function');\n/* Array */\nhas_2.add('es6-array-from', 'from' in global_1.default.Array);\nhas_2.add('es6-array-of', 'of' in global_1.default.Array);\nhas_2.add('es6-array-fill', function () {\n    if ('fill' in global_1.default.Array.prototype) {\n        /* Some versions of Safari do not properly implement this */\n        return [1].fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n    }\n    return false;\n});\nhas_2.add('es6-array-findindex', 'findIndex' in global_1.default.Array.prototype);\nhas_2.add('es6-array-find', 'find' in global_1.default.Array.prototype);\nhas_2.add('es6-array-copywithin', 'copyWithin' in global_1.default.Array.prototype);\nhas_2.add('es7-array-includes', 'includes' in global_1.default.Array.prototype);\n/* String */\nhas_2.add('es6-string-raw', function () {\n    function getCallSite(callSite) {\n        var substitutions = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            substitutions[_i - 1] = arguments[_i];\n        }\n        return callSite;\n    }\n    if ('raw' in global_1.default.String) {\n        var b = 1;\n        var callSite = (_a = [\"a\\n\", \"\"], _a.raw = [\"a\\\\n\", \"\"], getCallSite(_a, b));\n        callSite.raw = ['a\\\\n'];\n        var supportsTrunc = global_1.default.String.raw(callSite, 42) === 'a:\\\\n';\n        return supportsTrunc;\n    }\n    return false;\n    var _a;\n});\nhas_2.add('es6-string-fromcodepoint', 'fromCodePoint' in global_1.default.String);\nhas_2.add('es6-string-codepointat', 'codePointAt' in global_1.default.String.prototype);\nhas_2.add('es6-string-normalize', 'normalize' in global_1.default.String.prototype);\nhas_2.add('es6-string-repeat', 'repeat' in global_1.default.String.prototype);\nhas_2.add('es6-string-startswith', 'startsWith' in global_1.default.String.prototype);\nhas_2.add('es6-string-endswith', 'endsWith' in global_1.default.String.prototype);\nhas_2.add('es6-string-includes', 'includes' in global_1.default.String.prototype);\nhas_2.add('es6-string-padstart', 'padStart' in global_1.default.String.prototype);\nhas_2.add('es6-string-padend', 'padEnd' in global_1.default.String.prototype);\n/* Math */\nhas_2.add('es6-math-acosh', typeof global_1.default.Math.acosh === 'function');\nhas_2.add('es6-math-clz32', typeof global_1.default.Math.clz32 === 'function');\nhas_2.add('es6-math-imul', function () {\n    if ('imul' in global_1.default.Math) {\n        /* Some versions of Safari on ios do not properly implement this */\n        return Math.imul(0xffffffff, 5) === -5;\n    }\n    return false;\n});\n/* Promise */\nhas_2.add('es6-promise', typeof global_1.default.Promise !== 'undefined' && has_1.default('es6-symbol'));\n/* Observable */\nhas_2.add('es-observable', typeof global_1.default.Observable !== 'undefined');\n/* Set */\nhas_2.add('es6-set', function () {\n    if (typeof global_1.default.Set === 'function') {\n        /* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n        var set = new global_1.default.Set([1]);\n        return set.has(1) && 'keys' in set && typeof set.keys === 'function' && has_1.default('es6-symbol');\n    }\n    return false;\n});\n/* Map */\nhas_2.add('es6-map', function () {\n    if (typeof global_1.default.Map === 'function') {\n        /*\n        IE11 and older versions of Safari are missing critical ES6 Map functionality\n        We wrap this in a try/catch because sometimes the Map constructor exists, but does not\n        take arguments (iOS 8.4)\n         */\n        try {\n            var map = new global_1.default.Map([[0, 1]]);\n            return map.has(0) &&\n                typeof map.keys === 'function' && has_1.default('es6-symbol') &&\n                typeof map.values === 'function' &&\n                typeof map.entries === 'function';\n        }\n        catch (e) {\n            /* istanbul ignore next: not testing on iOS at the moment */\n            return false;\n        }\n    }\n    return false;\n});\n/* WeakMap */\nhas_2.add('es6-weakmap', function () {\n    if (typeof global_1.default.WeakMap !== 'undefined') {\n        /* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n        var key1 = {};\n        var key2 = {};\n        var map = new global_1.default.WeakMap([[key1, 1]]);\n        Object.freeze(key1);\n        return map.get(key1) === 1 && map.set(key2, 2) === map && has_1.default('es6-symbol');\n    }\n    return false;\n});\n/* Miscellaneous features */\nhas_2.add('float32array', 'Float32Array' in global_1.default);\nhas_2.add('setimmediate', typeof global_1.default.setImmediate !== 'undefined');\nhas_2.add('postmessage', typeof postMessage === 'function');\nhas_2.add('microtasks', function () { return has_1.default('es6-promise') || has_1.default('host-node') || has_1.default('dom-mutationobserver'); });\nhas_2.add('raf', typeof requestAnimationFrame === 'function');\n/* DOM Features */\nhas_2.add('dom-mutationobserver', function () { return has_1.default('host-browser') && Boolean(global_1.default.MutationObserver || global_1.default.WebKitMutationObserver); });\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar globalObject = (typeof global === 'undefined') ? Function('return this')() : global;\n// global spec defines a reference to the global object called 'global'\n// https://github.com/tc39/proposal-global\nif (!('global' in globalObject)) {\n    globalObject.global = globalObject;\n}\nexports.default = globalObject;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(13)))\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lang_1 = __webpack_require__(5);\nvar Symbol_1 = __webpack_require__(0);\nvar maquette_1 = __webpack_require__(19);\nvar WidgetRegistry_1 = __webpack_require__(24);\n/**\n * The symbol identifier for a WNode type\n */\nexports.WNODE = Symbol_1.default('Identifier for a WNode.');\n/**\n * The symbol identifier for a HNode type\n */\nexports.HNODE = Symbol_1.default('Identifier for a HNode.');\n/**\n * Helper function that returns true if the `DNode` is a `WNode` using the `type` property\n */\nfunction isWNode(child) {\n    return Boolean(child && (typeof child !== 'string') && child.type === exports.WNODE);\n}\nexports.isWNode = isWNode;\n/**\n * Helper function that returns true if the `DNode` is a `HNode` using the `type` property\n */\nfunction isHNode(child) {\n    return Boolean(child && (typeof child !== 'string') && child.type === exports.HNODE);\n}\nexports.isHNode = isHNode;\nfunction decorate(dNodes, modifier, predicate) {\n    var nodes = Array.isArray(dNodes) ? dNodes.slice() : [dNodes];\n    while (nodes.length) {\n        var node = nodes.pop();\n        if (node) {\n            if (!predicate || predicate(node)) {\n                modifier(node);\n            }\n            if ((isWNode(node) || isHNode(node)) && node.children) {\n                nodes = nodes.concat(node.children);\n            }\n        }\n    }\n    return dNodes;\n}\nexports.decorate = decorate;\n/**\n * Global widget registry instance\n */\nexports.registry = new WidgetRegistry_1.default();\n/**\n * Wrapper function for calls to create a widget.\n */\nfunction w(widgetConstructor, properties, children) {\n    if (children === void 0) { children = []; }\n    return {\n        children: children,\n        widgetConstructor: widgetConstructor,\n        properties: properties,\n        type: exports.WNODE\n    };\n}\nexports.w = w;\nfunction v(tag, propertiesOrChildren, children) {\n    if (propertiesOrChildren === void 0) { propertiesOrChildren = {}; }\n    if (children === void 0) { children = []; }\n    var properties = propertiesOrChildren;\n    if (Array.isArray(propertiesOrChildren)) {\n        children = propertiesOrChildren;\n        properties = {};\n    }\n    if (properties) {\n        var classes = properties.classes;\n        if (typeof classes === 'function') {\n            classes = classes();\n            properties = lang_1.assign(properties, { classes: classes });\n        }\n    }\n    return {\n        tag: tag,\n        children: children,\n        properties: properties,\n        render: function (options) {\n            if (options === void 0) { options = {}; }\n            return maquette_1.h(tag, lang_1.assign(options, this.properties), this.vNodes);\n        },\n        type: exports.HNODE\n    };\n}\nexports.v = v;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Evented_1 = __webpack_require__(8);\nvar Map_1 = __webpack_require__(9);\nvar Set_1 = __webpack_require__(44);\nvar WeakMap_1 = __webpack_require__(11);\nvar d_1 = __webpack_require__(3);\nvar diff_1 = __webpack_require__(51);\nvar WidgetRegistry_1 = __webpack_require__(24);\nvar RegistryHandler_1 = __webpack_require__(49);\nvar decoratorMap = new Map_1.default();\nfunction afterRender(method) {\n    return handleDecorator(function (target, propertyKey) {\n        target.addDecorator('afterRender', propertyKey ? target[propertyKey] : method);\n    });\n}\nexports.afterRender = afterRender;\nfunction beforeRender(method) {\n    return handleDecorator(function (target, propertyKey) {\n        target.addDecorator('beforeRender', propertyKey ? target[propertyKey] : method);\n    });\n}\nexports.beforeRender = beforeRender;\n/**\n * Decorator that can be used to register a function as a specific property diff\n *\n * @param propertyName  The name of the property of which the diff function is applied\n * @param diffType      The diff type, default is DiffType.AUTO.\n * @param diffFunction  A diff function to run if diffType if DiffType.CUSTOM\n */\nfunction diffProperty(propertyName, diffType, diffFunction) {\n    if (diffType === void 0) { diffType = 6 /* AUTO */; }\n    return handleDecorator(function (target, propertyKey) {\n        target.addDecorator('diffProperty', {\n            propertyName: propertyName,\n            diffType: propertyKey ? 1 /* CUSTOM */ : diffType,\n            diffFunction: propertyKey ? target[propertyKey] : diffFunction\n        });\n    });\n}\nexports.diffProperty = diffProperty;\nfunction onPropertiesChanged(method) {\n    return handleDecorator(function (target, propertyKey) {\n        target.addDecorator('onPropertiesChanged', propertyKey ? target[propertyKey] : method);\n    });\n}\nexports.onPropertiesChanged = onPropertiesChanged;\n/**\n * Generic decorator handler to take care of whether or not the decorator was called at the class level\n * or the method level.\n *\n * @param handler\n */\nfunction handleDecorator(handler) {\n    return function (target, propertyKey, descriptor) {\n        if (typeof target === 'function') {\n            handler(target.prototype, undefined);\n        }\n        else {\n            handler(target, propertyKey);\n        }\n    };\n}\nexports.handleDecorator = handleDecorator;\n/**\n * Function that identifies DNodes that are HNodes with key properties.\n */\nfunction isHNodeWithKey(node) {\n    return d_1.isHNode(node) && (node.properties != null) && (node.properties.key != null);\n}\n/**\n * Main widget base for all widgets to extend\n */\nvar WidgetBase = (function (_super) {\n    __extends(WidgetBase, _super);\n    /**\n     * @constructor\n     */\n    function WidgetBase() {\n        var _this = _super.call(this, {}) || this;\n        _this._children = [];\n        _this._decoratorCache = new Map_1.default();\n        _this._properties = {};\n        _this._previousProperties = {};\n        _this._cachedChildrenMap = new Map_1.default();\n        _this._diffPropertyFunctionMap = new Map_1.default();\n        _this._renderDecorators = new Set_1.default();\n        _this._bindFunctionPropertyMap = new WeakMap_1.default();\n        _this._registries = new RegistryHandler_1.default();\n        _this._registries.add(d_1.registry);\n        _this.own(_this._registries);\n        _this.own(_this._registries.on('invalidate', _this.invalidate.bind(_this)));\n        _this.own(_this.on('properties:changed', function (evt) {\n            _this._dirty = true;\n            var propertiesChangedListeners = _this.getDecorator('onPropertiesChanged');\n            propertiesChangedListeners.forEach(function (propertiesChangedFunction) {\n                propertiesChangedFunction.call(_this, evt);\n            });\n        }));\n        return _this;\n    }\n    /**\n     * A render decorator that registers vnode callbacks for 'afterCreate' and\n     * 'afterUpdate' that will in turn call lifecycle methods onElementCreated and onElementUpdated.\n     */\n    WidgetBase.prototype.attachLifecycleCallbacks = function (node) {\n        // Create vnode afterCreate and afterUpdate callback functions that will only be set on nodes\n        // with \"key\" properties.\n        var _this = this;\n        d_1.decorate(node, function (node) {\n            node.properties.afterCreate = _this.afterCreateCallback;\n            node.properties.afterUpdate = _this.afterUpdateCallback;\n        }, isHNodeWithKey);\n        return node;\n    };\n    /**\n     * vnode afterCreate callback that calls the onElementCreated lifecycle method.\n     */\n    WidgetBase.prototype.afterCreateCallback = function (element, projectionOptions, vnodeSelector, properties, children) {\n        this.onElementCreated(element, String(properties.key));\n    };\n    /**\n     * vnode afterUpdate callback that calls the onElementUpdated lifecycle method.\n     */\n    WidgetBase.prototype.afterUpdateCallback = function (element, projectionOptions, vnodeSelector, properties, children) {\n        this.onElementUpdated(element, String(properties.key));\n    };\n    /**\n     * Widget lifecycle method that is called whenever a dom node is created for a vnode.\n     * Override this method to access the dom nodes that were inserted into the dom.\n     * @param element The dom node represented by the vdom node.\n     * @param key The vdom node's key.\n     */\n    WidgetBase.prototype.onElementCreated = function (element, key) {\n        // Do nothing by default.\n    };\n    /**\n     * Widget lifecycle method that is called whenever a dom node that is associated with a vnode is updated.\n     * Note: this method is dependant on the Maquette afterUpdate callback which is called if a dom\n     * node might have been updated.  Maquette does not guarantee the dom node was updated.\n     * Override this method to access the dom node.\n     * @param element The dom node represented by the vdom node.\n     * @param key The vdom node's key.\n     */\n    WidgetBase.prototype.onElementUpdated = function (element, key) {\n        // Do nothing by default.\n    };\n    Object.defineProperty(WidgetBase.prototype, \"properties\", {\n        get: function () {\n            return this._properties;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WidgetBase.prototype.__setProperties__ = function (properties) {\n        var _this = this;\n        var diffPropertyResults = {};\n        var diffPropertyChangedKeys = [];\n        this.bindFunctionProperties(properties);\n        var registeredDiffPropertyConfigs = this.getDecorator('diffProperty');\n        var allProperties = Object.keys(this._previousProperties).concat(Object.keys(properties)).filter(function (value, index, self) {\n            return self.indexOf(value) === index;\n        });\n        var propertyDiffHandlers = allProperties.reduce(function (diffFunctions, propertyName) {\n            diffFunctions[propertyName] = registeredDiffPropertyConfigs.filter(function (value) {\n                return value.propertyName === propertyName;\n            }).slice();\n            return diffFunctions;\n        }, {});\n        allProperties.forEach(function (propertyName) {\n            var previousValue = _this._previousProperties[propertyName];\n            var newValue = properties[propertyName];\n            var diffHandlers = propertyDiffHandlers[propertyName];\n            var result = {\n                changed: false,\n                value: newValue\n            };\n            if (diffHandlers.length) {\n                for (var i = 0; i < diffHandlers.length; i++) {\n                    var _a = diffHandlers[i], diffFunction = _a.diffFunction, diffType = _a.diffType;\n                    var meta = {\n                        diffFunction: diffFunction,\n                        scope: _this\n                    };\n                    result = diff_1.default(propertyName, diffType, previousValue, newValue, meta);\n                    if (result.changed) {\n                        break;\n                    }\n                }\n            }\n            else {\n                result = diff_1.default(propertyName, 6 /* AUTO */, previousValue, newValue);\n            }\n            if (propertyName in properties) {\n                diffPropertyResults[propertyName] = result.value;\n            }\n            if (result.changed) {\n                diffPropertyChangedKeys.push(propertyName);\n            }\n        });\n        this._properties = diffPropertyResults;\n        if (diffPropertyChangedKeys.length) {\n            this.emit({\n                type: 'properties:changed',\n                target: this,\n                properties: this.properties,\n                changedPropertyKeys: diffPropertyChangedKeys\n            });\n        }\n        this._previousProperties = this.properties;\n    };\n    Object.defineProperty(WidgetBase.prototype, \"children\", {\n        get: function () {\n            return this._children;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WidgetBase.prototype.__setChildren__ = function (children) {\n        this._dirty = true;\n        this._children = children;\n        this.emit({\n            type: 'widget:children',\n            target: this\n        });\n    };\n    WidgetBase.prototype.__render__ = function () {\n        var _this = this;\n        if (this._dirty || !this._cachedVNode) {\n            this._dirty = false;\n            var beforeRenders = this.getDecorator('beforeRender');\n            var render = beforeRenders.reduce(function (render, beforeRenderFunction) {\n                return beforeRenderFunction.call(_this, render, _this._properties, _this._children);\n            }, this.render.bind(this));\n            var dNode_1 = render();\n            var afterRenders = this.getDecorator('afterRender');\n            afterRenders.forEach(function (afterRenderFunction) {\n                dNode_1 = afterRenderFunction.call(_this, dNode_1);\n            });\n            var widget = this.dNodeToVNode(dNode_1);\n            this.manageDetachedChildren();\n            if (widget) {\n                this._cachedVNode = widget;\n            }\n            return widget;\n        }\n        return this._cachedVNode;\n    };\n    WidgetBase.prototype.invalidate = function () {\n        this._dirty = true;\n        this.emit({\n            type: 'invalidated',\n            target: this\n        });\n    };\n    WidgetBase.prototype.render = function () {\n        return d_1.v('div', {}, this.children);\n    };\n    /**\n     * Function to add decorators to WidgetBase\n     *\n     * @param decoratorKey The key of the decorator\n     * @param value The value of the decorator\n     */\n    WidgetBase.prototype.addDecorator = function (decoratorKey, value) {\n        value = Array.isArray(value) ? value : [value];\n        if (this.hasOwnProperty('constructor')) {\n            var decoratorList = decoratorMap.get(this.constructor);\n            if (!decoratorList) {\n                decoratorList = new Map_1.default();\n                decoratorMap.set(this.constructor, decoratorList);\n            }\n            var specificDecoratorList = decoratorList.get(decoratorKey);\n            if (!specificDecoratorList) {\n                specificDecoratorList = [];\n                decoratorList.set(decoratorKey, specificDecoratorList);\n            }\n            specificDecoratorList.push.apply(specificDecoratorList, value);\n        }\n        else {\n            var decorators = this._decoratorCache.get(decoratorKey) || [];\n            this._decoratorCache.set(decoratorKey, decorators.concat(value));\n        }\n    };\n    /**\n     * Function to build the list of decorators from the global decorator map.\n     *\n     * @param decoratorKey  The key of the decorator\n     * @return An array of decorator values\n     * @private\n     */\n    WidgetBase.prototype._buildDecoratorList = function (decoratorKey) {\n        var allDecorators = [];\n        var constructor = this.constructor;\n        while (constructor) {\n            var instanceMap = decoratorMap.get(constructor);\n            if (instanceMap) {\n                var decorators = instanceMap.get(decoratorKey);\n                if (decorators) {\n                    allDecorators.unshift.apply(allDecorators, decorators);\n                }\n            }\n            constructor = Object.getPrototypeOf(constructor);\n        }\n        return allDecorators;\n    };\n    /**\n     * Function to retrieve decorator values\n     *\n     * @param decoratorKey The key of the decorator\n     * @returns An array of decorator values\n     */\n    WidgetBase.prototype.getDecorator = function (decoratorKey) {\n        var allDecorators = this._decoratorCache.get(decoratorKey);\n        if (allDecorators !== undefined) {\n            return allDecorators;\n        }\n        allDecorators = this._buildDecoratorList(decoratorKey);\n        this._decoratorCache.set(decoratorKey, allDecorators);\n        return allDecorators;\n    };\n    /**\n     * Binds unbound property functions to the specified `bind` property\n     *\n     * @param properties properties to check for functions\n     */\n    WidgetBase.prototype.bindFunctionProperties = function (properties) {\n        var _this = this;\n        Object.keys(properties).forEach(function (propertyKey) {\n            var property = properties[propertyKey];\n            var bind = properties.bind;\n            if (typeof property === 'function' && !WidgetRegistry_1.isWidgetBaseConstructor(property)) {\n                var bindInfo = _this._bindFunctionPropertyMap.get(property) || {};\n                var boundFunc = bindInfo.boundFunc, scope = bindInfo.scope;\n                if (!boundFunc || scope !== bind) {\n                    boundFunc = property.bind(bind);\n                    _this._bindFunctionPropertyMap.set(property, { boundFunc: boundFunc, scope: bind });\n                }\n                properties[propertyKey] = boundFunc;\n            }\n        });\n    };\n    Object.defineProperty(WidgetBase.prototype, \"registries\", {\n        get: function () {\n            return this._registries;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Process a structure of DNodes into VNodes, string or null. `null` results are filtered.\n     *\n     * @param dNode the dnode to process\n     * @returns a VNode, string or null\n     */\n    WidgetBase.prototype.dNodeToVNode = function (dNode) {\n        var _this = this;\n        if (typeof dNode === 'string' || dNode === null) {\n            return dNode;\n        }\n        if (d_1.isWNode(dNode)) {\n            var children = dNode.children, _a = dNode.properties, properties = _a === void 0 ? {} : _a;\n            var key = properties.key;\n            var widgetConstructor_1 = dNode.widgetConstructor;\n            var child = void 0;\n            if (typeof widgetConstructor_1 === 'string') {\n                var item = this._registries.get(widgetConstructor_1);\n                if (item === null) {\n                    return null;\n                }\n                widgetConstructor_1 = item;\n            }\n            var childrenMapKey = key || widgetConstructor_1;\n            var cachedChildren = this._cachedChildrenMap.get(childrenMapKey) || [];\n            var cachedChild_1;\n            cachedChildren.some(function (cachedChildWrapper) {\n                if (cachedChildWrapper.widgetConstructor === widgetConstructor_1 && !cachedChildWrapper.used) {\n                    cachedChild_1 = cachedChildWrapper;\n                    return true;\n                }\n                return false;\n            });\n            if (!properties.hasOwnProperty('bind')) {\n                properties.bind = this;\n            }\n            if (cachedChild_1) {\n                child = cachedChild_1.child;\n                child.__setProperties__(properties);\n                cachedChild_1.used = true;\n            }\n            else {\n                child = new widgetConstructor_1();\n                child.__setProperties__(properties);\n                child.own(child.on('invalidated', function () {\n                    _this.invalidate();\n                }));\n                cachedChildren = cachedChildren.concat([{ child: child, widgetConstructor: widgetConstructor_1, used: true }]);\n                this._cachedChildrenMap.set(childrenMapKey, cachedChildren);\n                this.own(child);\n            }\n            if (!key && cachedChildren.length > 1) {\n                var errorMsg = 'It is recommended to provide a unique `key` property when using the same widget multiple times';\n                console.warn(errorMsg);\n                this.emit({ type: 'error', target: this, error: new Error(errorMsg) });\n            }\n            if (Array.isArray(children)) {\n                child.__setChildren__(children);\n            }\n            return child.__render__();\n        }\n        dNode.vNodes = dNode.children\n            .filter(function (child) { return child !== null; })\n            .map(function (child) {\n            return _this.dNodeToVNode(child);\n        });\n        return dNode.render({ bind: this });\n    };\n    /**\n     * Manage widget instances after render processing\n     */\n    WidgetBase.prototype.manageDetachedChildren = function () {\n        var _this = this;\n        this._cachedChildrenMap.forEach(function (cachedChildren, key) {\n            var filterCachedChildren = cachedChildren.filter(function (cachedChild) {\n                if (cachedChild.used) {\n                    cachedChild.used = false;\n                    return true;\n                }\n                cachedChild.child.destroy();\n                return false;\n            });\n            _this._cachedChildrenMap.set(key, filterCachedChildren);\n        });\n    };\n    return WidgetBase;\n}(Evented_1.Evented));\n/**\n * static identifier\n */\nWidgetBase._type = WidgetRegistry_1.WIDGET_BASE_TYPE;\n__decorate([\n    afterRender(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", Object)\n], WidgetBase.prototype, \"attachLifecycleCallbacks\", null);\nWidgetBase = __decorate([\n    diffProperty('bind', 4 /* REFERENCE */),\n    __metadata(\"design:paramtypes\", [])\n], WidgetBase);\nexports.WidgetBase = WidgetBase;\nexports.default = WidgetBase;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(39);\nvar slice = Array.prototype.slice;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Type guard that ensures that the value can be coerced to Object\n * to weed out host objects that do not derive from Object.\n * This function is used to check if we want to deep copy an object or not.\n * Note: In ES6 it is possible to modify an object's Symbol.toStringTag property, which will\n * change the value returned by `toString`. This is a rare edge case that is difficult to handle,\n * so it is not handled here.\n * @param  value The value to check\n * @return       If the value is coercible into an Object\n */\nfunction shouldDeepCopyObject(value) {\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\nfunction copyArray(array, inherited) {\n    return array.map(function (item) {\n        if (Array.isArray(item)) {\n            return copyArray(item, inherited);\n        }\n        return !shouldDeepCopyObject(item) ?\n            item :\n            _mixin({\n                deep: true,\n                inherited: inherited,\n                sources: [item],\n                target: {}\n            });\n    });\n}\nfunction _mixin(kwArgs) {\n    var deep = kwArgs.deep;\n    var inherited = kwArgs.inherited;\n    var target = kwArgs.target;\n    var copied = kwArgs.copied || [];\n    var copiedClone = copied.slice();\n    for (var _i = 0, _a = kwArgs.sources; _i < _a.length; _i++) {\n        var source = _a[_i];\n        if (source === null || source === undefined) {\n            continue;\n        }\n        for (var key in source) {\n            if (inherited || hasOwnProperty.call(source, key)) {\n                var value = source[key];\n                if (copiedClone.indexOf(value) !== -1) {\n                    continue;\n                }\n                if (deep) {\n                    if (Array.isArray(value)) {\n                        value = copyArray(value, inherited);\n                    }\n                    else if (shouldDeepCopyObject(value)) {\n                        var targetValue = target[key] || {};\n                        copied.push(source);\n                        value = _mixin({\n                            deep: true,\n                            inherited: inherited,\n                            sources: [value],\n                            target: targetValue,\n                            copied: copied\n                        });\n                    }\n                }\n                target[key] = value;\n            }\n        }\n    }\n    return target;\n}\n/**\n * Copies the values of all enumerable own properties of one or more source objects to the target object.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable own properties will be copied to the target object\n * @return The modified target object\n */\nexports.assign = has_1.default('object-assign') ?\n    Object.assign :\n    function (target) {\n        var sources = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            sources[_i - 1] = arguments[_i];\n        }\n        return _mixin({\n            deep: false,\n            inherited: false,\n            sources: sources,\n            target: target\n        });\n    };\nfunction create(prototype) {\n    var mixins = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        mixins[_i - 1] = arguments[_i];\n    }\n    if (!mixins.length) {\n        throw new RangeError('lang.create requires at least one mixin object.');\n    }\n    var args = mixins.slice();\n    args.unshift(Object.create(prototype));\n    return exports.assign.apply(null, args);\n}\nexports.create = create;\nfunction deepAssign(target) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    return _mixin({\n        deep: true,\n        inherited: false,\n        sources: sources,\n        target: target\n    });\n}\nexports.deepAssign = deepAssign;\nfunction deepMixin(target) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    return _mixin({\n        deep: true,\n        inherited: true,\n        sources: sources,\n        target: target\n    });\n}\nexports.deepMixin = deepMixin;\n/**\n * Creates a new object using the provided source's prototype as the prototype for the new object, and then\n * deep copies the provided source's values into the new target.\n *\n * @param source The object to duplicate\n * @return The new object\n */\nfunction duplicate(source) {\n    var target = Object.create(Object.getPrototypeOf(source));\n    return deepMixin(target, source);\n}\nexports.duplicate = duplicate;\n/**\n * Determines whether two values are the same value.\n *\n * @param a First value to compare\n * @param b Second value to compare\n * @return true if the values are the same; false otherwise\n */\nfunction isIdentical(a, b) {\n    return a === b ||\n        /* both values are NaN */\n        (a !== a && b !== b);\n}\nexports.isIdentical = isIdentical;\n/**\n * Returns a function that binds a method to the specified object at runtime. This is similar to\n * `Function.prototype.bind`, but instead of a function it takes the name of a method on an object.\n * As a result, the function returned by `lateBind` will always call the function currently assigned to\n * the specified property on the object as of the moment the function it returns is called.\n *\n * @param instance The context object\n * @param method The name of the method on the context object to bind to itself\n * @param suppliedArgs An optional array of values to prepend to the `instance[method]` arguments list\n * @return The bound function\n */\nfunction lateBind(instance, method) {\n    var suppliedArgs = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        suppliedArgs[_i - 2] = arguments[_i];\n    }\n    return suppliedArgs.length ?\n        function () {\n            var args = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n            // TS7017\n            return instance[method].apply(instance, args);\n        } :\n        function () {\n            // TS7017\n            return instance[method].apply(instance, arguments);\n        };\n}\nexports.lateBind = lateBind;\nfunction mixin(target) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    return _mixin({\n        deep: false,\n        inherited: true,\n        sources: sources,\n        target: target\n    });\n}\nexports.mixin = mixin;\n/**\n * Returns a function which invokes the given function with the given arguments prepended to its argument list.\n * Like `Function.prototype.bind`, but does not alter execution context.\n *\n * @param targetFunction The function that needs to be bound\n * @param suppliedArgs An optional array of arguments to prepend to the `targetFunction` arguments list\n * @return The bound function\n */\nfunction partial(targetFunction) {\n    var suppliedArgs = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        suppliedArgs[_i - 1] = arguments[_i];\n    }\n    return function () {\n        var args = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n        return targetFunction.apply(this, args);\n    };\n}\nexports.partial = partial;\n/**\n * Returns an object with a destroy method that, when called, calls the passed-in destructor.\n * This is intended to provide a unified interface for creating \"remove\" / \"destroy\" handlers for\n * event listeners, timers, etc.\n *\n * @param destructor A function that will be called when the handle's `destroy` method is invoked\n * @return The handle object\n */\nfunction createHandle(destructor) {\n    return {\n        destroy: function () {\n            this.destroy = function () { };\n            destructor.call(this);\n        }\n    };\n}\nexports.createHandle = createHandle;\n/**\n * Returns a single handle that can be used to destroy multiple handles simultaneously.\n *\n * @param handles An array of handles with `destroy` methods\n * @return The handle object\n */\nfunction createCompositeHandle() {\n    var handles = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        handles[_i] = arguments[_i];\n    }\n    return createHandle(function () {\n        for (var _i = 0, handles_1 = handles; _i < handles_1.length; _i++) {\n            var handle = handles_1[_i];\n            handle.destroy();\n        }\n    });\n}\nexports.createCompositeHandle = createCompositeHandle;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar string_1 = __webpack_require__(47);\n__webpack_require__(0);\nvar staticDone = { done: true, value: undefined };\n/**\n * A class that provides \"shims\" an iterator interface on array like\n * objects.\n */\nvar ShimIterator = (function () {\n    function ShimIterator(list) {\n        this._nextIndex = -1;\n        if (isIterable(list)) {\n            this._nativeIterator = list[Symbol.iterator]();\n        }\n        else {\n            this._list = list;\n        }\n    }\n    ;\n    /**\n     * Return the next iteration result for the Iterator\n     */\n    ShimIterator.prototype.next = function () {\n        if (this._nativeIterator) {\n            return this._nativeIterator.next();\n        }\n        if (!this._list) {\n            return staticDone;\n        }\n        if (++this._nextIndex < this._list.length) {\n            return {\n                done: false,\n                value: this._list[this._nextIndex]\n            };\n        }\n        return staticDone;\n    };\n    ;\n    ShimIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    return ShimIterator;\n}());\nexports.ShimIterator = ShimIterator;\n/**\n * A type guard for checking if something has an Iterable interface\n *\n * @param value The value to type guard against\n */\nfunction isIterable(value) {\n    return value && typeof value[Symbol.iterator] === 'function';\n}\nexports.isIterable = isIterable;\n/**\n * A type guard for checking if something is ArrayLike\n *\n * @param value The value to type guard against\n */\nfunction isArrayLike(value) {\n    return value && typeof value.length === 'number';\n}\nexports.isArrayLike = isArrayLike;\n/**\n * Returns the iterator for an object\n *\n * @param iterable The iterable object to return the iterator for\n */\nfunction get(iterable) {\n    if (isIterable(iterable)) {\n        return iterable[Symbol.iterator]();\n    }\n    else if (isArrayLike(iterable)) {\n        return new ShimIterator(iterable);\n    }\n}\nexports.get = get;\n/**\n * Shims the functionality of `for ... of` blocks\n *\n * @param iterable The object the provides an interator interface\n * @param callback The callback which will be called for each item of the iterable\n * @param thisArg Optional scope to pass the callback\n */\nfunction forOf(iterable, callback, thisArg) {\n    var broken = false;\n    function doBreak() {\n        broken = true;\n    }\n    /* We need to handle iteration of double byte strings properly */\n    if (isArrayLike(iterable) && typeof iterable === 'string') {\n        var l = iterable.length;\n        for (var i = 0; i < l; ++i) {\n            var char = iterable[i];\n            if ((i + 1) < l) {\n                var code = char.charCodeAt(0);\n                if ((code >= string_1.HIGH_SURROGATE_MIN) && (code <= string_1.HIGH_SURROGATE_MAX)) {\n                    char += iterable[++i];\n                }\n            }\n            callback.call(thisArg, char, iterable, doBreak);\n            if (broken) {\n                return;\n            }\n        }\n    }\n    else {\n        var iterator = get(iterable);\n        if (iterator) {\n            var result = iterator.next();\n            while (!result.done) {\n                callback.call(thisArg, result.value, iterable, doBreak);\n                if (broken) {\n                    return;\n                }\n                result = iterator.next();\n            }\n        }\n    }\n}\nexports.forOf = forOf;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lang_1 = __webpack_require__(5);\nvar array_1 = __webpack_require__(17);\nvar Map_1 = __webpack_require__(9);\nvar WidgetBase_1 = __webpack_require__(4);\nvar THEME_KEY = ' _key';\n/**\n * Decorator for base css classes\n */\nfunction theme(theme) {\n    return WidgetBase_1.handleDecorator(function (target) {\n        target.addDecorator('baseThemeClasses', theme);\n    });\n}\nexports.theme = theme;\n/**\n * Split class strings containing spaces into separate array entries.\n * ie. ['class1 class2', 'class3] -> ['class1', 'class2', 'class3'];\n *\n * @param classes The array of class strings to split.\n * @return the complete classes array including any split classes.\n */\nfunction splitClassStrings(classes) {\n    return classes.reduce(function (splitClasses, className) {\n        if (className.indexOf(' ') > -1) {\n            splitClasses.push.apply(splitClasses, className.split(' '));\n        }\n        else {\n            splitClasses.push(className);\n        }\n        return splitClasses;\n    }, []);\n}\n/**\n * Returns the class object map based on the class names and whether they are\n * active.\n *\n * @param className an array of string class names\n * @param applied indicates is the class is applied\n */\nfunction createClassNameObject(classNames, applied) {\n    return classNames.reduce(function (flaggedClassNames, className) {\n        flaggedClassNames[className] = applied;\n        return flaggedClassNames;\n    }, {});\n}\n/**\n * Creates a reverse lookup for the classes passed in via the `theme` function.\n *\n * @param classes The baseClasses object\n * @requires\n */\nfunction createThemeClassesLookup(classes) {\n    return classes.reduce(function (currentClassNames, baseClass) {\n        Object.keys(baseClass).forEach(function (key) {\n            currentClassNames[baseClass[key]] = key;\n        });\n        return currentClassNames;\n    }, {});\n}\n/**\n * Function that returns a class decorated with with Themeable functionality\n */\nfunction ThemeableMixin(base) {\n    var Themeable = (function (_super) {\n        __extends(Themeable, _super);\n        function Themeable() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            /**\n             * All classes ever seen by the instance\n             */\n            _this._allClasses = {};\n            /**\n             * Indicates if classes meta data need to be calculated.\n             */\n            _this._recalculateClasses = true;\n            /**\n             * Map of registered classes\n             */\n            _this._registeredClassesMap = new Map_1.default();\n            /**\n             * Loaded theme\n             */\n            _this._theme = {};\n            return _this;\n        }\n        /**\n         * Function used to add themeable classes to a widget. Returns a chained function 'fixed'\n         * that can be used to pass non-themeable classes to a widget. Filters out any null\n         * values passed.\n         *\n         * @param classNames the classes to be added to the domNode. These classes must come from\n         * the baseClasses passed into the @theme decorator.\n         * @return A function chain continaing the 'fixed' function and a 'get' finaliser function.\n         * Class names passed to the 'fixed' function can be any string.\n         *\n         */\n        Themeable.prototype.classes = function () {\n            var classNames = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                classNames[_i] = arguments[_i];\n            }\n            if (this._recalculateClasses) {\n                this.recalculateThemeClasses();\n            }\n            var themeable = this;\n            function classesGetter() {\n                var themeClasses = themeable.getThemeClasses(this.classes);\n                var fixedClasses = themeable.getFixedClasses(this.fixedClasses);\n                return lang_1.assign({}, themeable._allClasses, themeClasses, fixedClasses);\n            }\n            var classesFunctionChain = {\n                classes: classNames,\n                fixedClasses: [],\n                fixed: function () {\n                    var classNames = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        classNames[_i] = arguments[_i];\n                    }\n                    var filteredClassNames = classNames.filter(function (className) { return className !== null; });\n                    (_a = this.fixedClasses).push.apply(_a, filteredClassNames);\n                    return this;\n                    var _a;\n                },\n                get: classesGetter\n            };\n            return lang_1.assign(classesGetter.bind(classesFunctionChain), classesFunctionChain);\n        };\n        /**\n         * Get theme class object from classNames\n         */\n        Themeable.prototype.getThemeClasses = function (classNames) {\n            var _this = this;\n            return classNames\n                .filter(function (className) { return className !== null; })\n                .reduce(function (appliedClasses, className) {\n                if (!_this._baseThemeClassesReverseLookup[className]) {\n                    console.warn(\"Class name: \" + className + \" not found, use chained 'fixed' method instead\");\n                    return appliedClasses;\n                }\n                className = _this._baseThemeClassesReverseLookup[className];\n                if (!_this._registeredClassesMap.has(className)) {\n                    _this.registerThemeClass(className);\n                }\n                return lang_1.assign(appliedClasses, _this._registeredClassesMap.get(className));\n            }, {});\n        };\n        /**\n         * Get fixed class object from classNames\n         */\n        Themeable.prototype.getFixedClasses = function (classNames) {\n            var splitClasses = splitClassStrings(classNames);\n            this.appendToAllClassNames(splitClasses);\n            return createClassNameObject(splitClasses, true);\n        };\n        /**\n         * Function fired when properties are changed on the widget.\n         *\n         * @param changedPropertyKeys Array of properties that have changed\n         */\n        Themeable.prototype.onPropertiesChanged = function (_a) {\n            var changedPropertyKeys = _a.changedPropertyKeys;\n            var themeChanged = array_1.includes(changedPropertyKeys, 'theme');\n            var extraClassesChanged = array_1.includes(changedPropertyKeys, 'extraClasses');\n            if (themeChanged || extraClassesChanged) {\n                this._recalculateClasses = true;\n            }\n        };\n        /**\n         * Adds classes to the internal allClasses property\n         *\n         * @param classNames an array of string class names\n         */\n        Themeable.prototype.appendToAllClassNames = function (classNames) {\n            var negativeClassFlags = createClassNameObject(classNames, false);\n            this._allClasses = lang_1.assign({}, this._allClasses, negativeClassFlags);\n        };\n        /**\n         * Register the classes object for the class name and adds the class to the instances `allClasses` object.\n         *\n         * @param className the name of the class to register.\n         */\n        Themeable.prototype.registerThemeClass = function (className) {\n            var _this = this;\n            var _a = this.properties.extraClasses, extraClasses = _a === void 0 ? {} : _a;\n            var themeClass = this._theme[className] ? this._theme[className] : this.getBaseThemeClass(className);\n            var extraClassNames = extraClasses[className] ? extraClasses[className].split(' ') : [];\n            var cssClassNames = themeClass.split(' ').concat(extraClassNames);\n            var classesObject = cssClassNames.reduce(function (classesObject, cssClassName) {\n                classesObject[cssClassName] = true;\n                _this._allClasses[cssClassName] = false;\n                return classesObject;\n            }, {});\n            this._registeredClassesMap.set(className, classesObject);\n        };\n        /**\n         * Recalculate registered classes for current theme.\n         */\n        Themeable.prototype.recalculateThemeClasses = function () {\n            var _this = this;\n            var _a = this.properties.theme, theme = _a === void 0 ? {} : _a;\n            if (!this._registeredBaseThemes) {\n                this._registeredBaseThemes = this.getDecorator('baseThemeClasses').slice().reverse();\n                this.checkForDuplicates();\n            }\n            var registeredBaseThemeKeys = this._registeredBaseThemes.map(function (registeredBaseThemeClasses) {\n                return registeredBaseThemeClasses[THEME_KEY];\n            });\n            this._baseThemeClassesReverseLookup = createThemeClassesLookup(this._registeredBaseThemes);\n            this._theme = registeredBaseThemeKeys.reduce(function (baseTheme, themeKey) {\n                return lang_1.assign(baseTheme, theme[themeKey]);\n            }, {});\n            this._registeredClassesMap.forEach(function (value, key) {\n                _this.registerThemeClass(key);\n            });\n            this._recalculateClasses = false;\n        };\n        /**\n         * Find the base theme class for the class name\n         */\n        Themeable.prototype.getBaseThemeClass = function (className) {\n            var registeredBaseTheme = array_1.find(this._registeredBaseThemes, function (registeredBaseThemeClasses) {\n                return Boolean(registeredBaseThemeClasses[className]);\n            });\n            return registeredBaseTheme[className] || '';\n        };\n        /**\n         * Check for duplicates across the registered base themes.\n         */\n        Themeable.prototype.checkForDuplicates = function () {\n            var _this = this;\n            this._registeredBaseThemes.forEach(function (registeredBaseThemeClasses, index) {\n                Object.keys(registeredBaseThemeClasses).some(function (key) {\n                    return _this.isDuplicate(key, registeredBaseThemeClasses);\n                });\n            });\n        };\n        /**\n         * Search for classname in other base themes\n         */\n        Themeable.prototype.isDuplicate = function (key, originatingBaseTheme) {\n            var duplicate = false;\n            if (key !== THEME_KEY) {\n                for (var i = 0; i < this._registeredBaseThemes.length; i++) {\n                    if (originatingBaseTheme === this._registeredBaseThemes[i]) {\n                        continue;\n                    }\n                    if (this._registeredBaseThemes[i][key]) {\n                        console.warn(\"Duplicate base theme class key '\" + key + \"' detected, this could cause unexpected results\");\n                        duplicate = true;\n                        break;\n                    }\n                }\n                return duplicate;\n            }\n            return duplicate;\n        };\n        return Themeable;\n    }(base));\n    __decorate([\n        WidgetBase_1.onPropertiesChanged(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object]),\n        __metadata(\"design:returntype\", void 0)\n    ], Themeable.prototype, \"onPropertiesChanged\", null);\n    return Themeable;\n}\nexports.ThemeableMixin = ThemeableMixin;\nexports.default = ThemeableMixin;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Map_1 = __webpack_require__(9);\nvar aspect_1 = __webpack_require__(36);\nvar Destroyable_1 = __webpack_require__(35);\n/**\n * Determines is the value is Actionable (has a `.do` function)\n *\n * @param value the value to check\n * @returns boolean indicating is the value is Actionable\n */\nfunction isActionable(value) {\n    return Boolean(value && typeof value.do === 'function');\n}\n/**\n * Resolve listeners.\n */\nfunction resolveListener(listener) {\n    return isActionable(listener) ? function (event) { return listener.do({ event: event }); } : listener;\n}\n/**\n * Handles an array of handles\n *\n * @param handles an array of handles\n * @returns a single Handle for handles passed\n */\nfunction handlesArraytoHandle(handles) {\n    return {\n        destroy: function () {\n            handles.forEach(function (handle) { return handle.destroy(); });\n        }\n    };\n}\n/**\n * Map of computed regular expressions, keyed by string\n */\nvar regexMap = new Map_1.default();\n/**\n * Determines is the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nfunction isGlobMatch(globString, targetString) {\n    if (globString.indexOf('*') !== -1) {\n        var regex = void 0;\n        if (regexMap.has(globString)) {\n            regex = regexMap.get(globString);\n        }\n        else {\n            regex = new RegExp(\"^\" + globString.replace(/\\*/g, '.*') + \"$\");\n            regexMap.set(globString, regex);\n        }\n        return regex.test(targetString);\n    }\n    else {\n        return globString === targetString;\n    }\n}\nexports.isGlobMatch = isGlobMatch;\n/**\n * Event Class\n */\nvar Evented = (function (_super) {\n    __extends(Evented, _super);\n    /**\n     * @constructor\n     * @param options The constructor argurments\n     */\n    function Evented(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        /**\n         * map of listeners keyed by event type\n         */\n        _this.listenersMap = new Map_1.default();\n        /**\n         * Catch all handler for various call signatures. The signatures are defined in\n         * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n         * `BaseEventedEvents`.  See example for details.\n         *\n         * @param args\n         *\n         * @example\n         *\n         * interface WidgetBaseEvents extends BaseEventedEvents {\n         *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n         * }\n         * class WidgetBase extends Evented {\n         *    on: WidgetBaseEvents;\n         * }\n         *\n         * @return {any}\n         */\n        _this.on = function () {\n            var _this = this;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (args.length === 2) {\n                var _a = args, type_1 = _a[0], listeners = _a[1];\n                if (Array.isArray(listeners)) {\n                    var handles = listeners.map(function (listener) { return aspect_1.on(_this.listenersMap, type_1, resolveListener(listener)); });\n                    return handlesArraytoHandle(handles);\n                }\n                else {\n                    return aspect_1.on(this.listenersMap, type_1, resolveListener(listeners));\n                }\n            }\n            else if (args.length === 1) {\n                var listenerMapArg_1 = args[0];\n                var handles = Object.keys(listenerMapArg_1).map(function (type) { return _this.on(type, listenerMapArg_1[type]); });\n                return handlesArraytoHandle(handles);\n            }\n            else {\n                throw new TypeError('Invalid arguments');\n            }\n        };\n        var listeners = options.listeners;\n        if (listeners) {\n            _this.own(_this.on(listeners));\n        }\n        return _this;\n    }\n    /**\n     * Emits the event objet for the specified type\n     *\n     * @param event the event to emit\n     */\n    Evented.prototype.emit = function (event) {\n        var _this = this;\n        this.listenersMap.forEach(function (method, type) {\n            if (isGlobMatch(type, event.type)) {\n                method.call(_this, event);\n            }\n        });\n    };\n    return Evented;\n}(Destroyable_1.Destroyable));\nexports.Evented = Evented;\nexports.default = Evented;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decorators_1 = __webpack_require__(12);\nvar global_1 = __webpack_require__(2);\nvar iterator_1 = __webpack_require__(6);\nvar object_1 = __webpack_require__(46);\n__webpack_require__(0);\nvar Shim;\n(function (Shim) {\n    /**\n     * An implementation analogous to the Map specification in ES2015.\n     */\n    var Map = (function () {\n        /**\n         * Creates a new Map\n         *\n         * @constructor\n         *\n         * @param iterator\n         * Array or iterator containing two-item tuples used to initially populate the map.\n         * The first item in each tuple corresponds to the key of the map entry.\n         * The second item corresponds to the value of the map entry.\n         */\n        function Map(iterable) {\n            var _this = this;\n            this._keys = [];\n            this._values = [];\n            this[Symbol.toStringTag] = 'Map';\n            if (iterable) {\n                iterator_1.forOf(iterable, function (value) {\n                    _this.set(value[0], value[1]);\n                });\n            }\n        }\n        /**\n         * An alternative to Array.prototype.indexOf using Object.is\n         * to check for equality. See http://mzl.la/1zuKO2V\n         */\n        Map.prototype._indexOfKey = function (keys, key) {\n            for (var i = 0, length_1 = keys.length; i < length_1; i++) {\n                if (object_1.is(keys[i], key)) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n        Object.defineProperty(Map.prototype, \"size\", {\n            /**\n             * Returns the number of key / value pairs in the Map.\n             *\n             * @return the number of key / value pairs in the Map\n             */\n            get: function () {\n                return this._keys.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * Deletes all keys and their associated values.\n         */\n        Map.prototype.clear = function () {\n            this._keys.length = this._values.length = 0;\n        };\n        /**\n         * Deletes a given key and its associated value.\n         *\n         * @param key The key to delete\n         * @return true if the key exists, false if it does not\n         */\n        Map.prototype.delete = function (key) {\n            var index = this._indexOfKey(this._keys, key);\n            if (index < 0) {\n                return false;\n            }\n            this._keys.splice(index, 1);\n            this._values.splice(index, 1);\n            return true;\n        };\n        /**\n         * Returns an iterator that yields each key/value pair as an array.\n         *\n         * @return An iterator for each key/value pair in the instance.\n         */\n        Map.prototype.entries = function () {\n            var _this = this;\n            var values = this._keys.map(function (key, i) {\n                return [key, _this._values[i]];\n            });\n            return new iterator_1.ShimIterator(values);\n        };\n        /**\n         * Executes a given function for each map entry. The function\n         * is invoked with three arguments: the element value, the\n         * element key, and the associated Map instance.\n         *\n         * @param callback The function to execute for each map entry,\n         * @param context The value to use for `this` for each execution of the calback\n         */\n        Map.prototype.forEach = function (callback, context) {\n            var keys = this._keys;\n            var values = this._values;\n            for (var i = 0, length_2 = keys.length; i < length_2; i++) {\n                callback.call(context, values[i], keys[i], this);\n            }\n        };\n        /**\n         * Returns the value associated with a given key.\n         *\n         * @param key The key to look up\n         * @return The value if one exists or undefined\n         */\n        Map.prototype.get = function (key) {\n            var index = this._indexOfKey(this._keys, key);\n            return index < 0 ? undefined : this._values[index];\n        };\n        /**\n         * Checks for the presence of a given key.\n         *\n         * @param key The key to check for\n         * @return true if the key exists, false if it does not\n         */\n        Map.prototype.has = function (key) {\n            return this._indexOfKey(this._keys, key) > -1;\n        };\n        /**\n         * Returns an iterator that yields each key in the map.\n         *\n         * @return An iterator containing the instance's keys.\n         */\n        Map.prototype.keys = function () {\n            return new iterator_1.ShimIterator(this._keys);\n        };\n        /**\n         * Sets the value associated with a given key.\n         *\n         * @param key The key to define a value to\n         * @param value The value to assign\n         * @return The Map instance\n         */\n        Map.prototype.set = function (key, value) {\n            var index = this._indexOfKey(this._keys, key);\n            index = index < 0 ? this._keys.length : index;\n            this._keys[index] = key;\n            this._values[index] = value;\n            return this;\n        };\n        /**\n         * Returns an iterator that yields each value in the map.\n         *\n         * @return An iterator containing the instance's values.\n         */\n        Map.prototype.values = function () {\n            return new iterator_1.ShimIterator(this._values);\n        };\n        Map.prototype[Symbol.iterator] = function () {\n            return this.entries();\n        };\n        return Map;\n    }());\n    Shim.Map = Map;\n})(Shim = exports.Shim || (exports.Shim = {}));\nvar Map = (function () {\n    /* istanbul ignore next */\n    function Map(iterable) {\n        /* istanbul ignore next */\n        this[Symbol.toStringTag] = 'Map';\n    }\n    ;\n    Object.defineProperty(Map.prototype, \"size\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error('Abstract method'); },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    /* istanbul ignore next */\n    Map.prototype.clear = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.delete = function (key) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.entries = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.forEach = function (callback, context) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.get = function (key) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.has = function (key) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.keys = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.set = function (key, value) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype.values = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Map.prototype[Symbol.iterator] = function () { throw new Error('Abstract method'); };\n    ;\n    return Map;\n}());\nMap = __decorate([\n    decorators_1.hasClass('es6-map', global_1.default.Map, Shim.Map)\n], Map);\nexports.default = Map;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(2);\nvar queue_1 = __webpack_require__(48);\nvar iterator_1 = __webpack_require__(6);\n__webpack_require__(0);\nvar decorators_1 = __webpack_require__(12);\nvar has_1 = __webpack_require__(1);\nvar Shim;\n(function (Shim) {\n    /**\n     * Returns true if a given value has a `then` method.\n     * @param {any} value The value to check if is Thenable\n     * @returns {is Thenable<T>} A type guard if the value is thenable\n     */\n    function isThenable(value) {\n        return value && typeof value.then === 'function';\n    }\n    Shim.isThenable = isThenable;\n    /**\n     * Promise is a partial implementation of the ES2015 Promise specification. It relies on Promise to do some safety\n     * checks such as verifying that a Promise isn't resolved with itself. This class is exported for testability, and is\n     * not intended to be used directly.\n     *\n     * @borrows Promise.all as Promise.all\n     * @borrows Promise.race as Promise.race\n     * @borrows Promise.reject as Promise.reject\n     * @borrows Promise.resolve as Promise.resolve\n     * @borrows Promise#catch as Promise#catch\n     * @borrows Promise#then as Promise#then\n     */\n    var Promise = (function () {\n        /**\n         * Creates a new Promise.\n         *\n         * @constructor\n         *\n         * @param executor\n         * The executor function is called immediately when the Promise is instantiated. It is responsible for\n         * starting the asynchronous operation when it is invoked.\n         *\n         * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n         * successfully, or the `reject` function when the operation fails.\n         */\n        function Promise(executor) {\n            var _this = this;\n            /**\n             * The current state of this promise.\n             */\n            this.state = 1 /* Pending */;\n            this[Symbol.toStringTag] = 'Promise';\n            /**\n             * If true, the resolution of this promise is chained (\"locked in\") to another promise.\n             */\n            var isChained = false;\n            /**\n             * Whether or not this promise is in a resolved state.\n             */\n            var isResolved = function () {\n                return _this.state !== 1 /* Pending */ || isChained;\n            };\n            /**\n             * Callbacks that should be invoked once the asynchronous operation has completed.\n             */\n            var callbacks = [];\n            /**\n             * Initially pushes callbacks onto a queue for execution once this promise settles. After the promise settles,\n             * enqueues callbacks for execution on the next event loop turn.\n             */\n            var whenFinished = function (callback) {\n                if (callbacks) {\n                    callbacks.push(callback);\n                }\n            };\n            /**\n             * Settles this promise.\n             *\n             * @param newState The resolved state for this promise.\n             * @param {T|any} value The resolved value for this promise.\n             */\n            var settle = function (newState, value) {\n                // A promise can only be settled once.\n                if (_this.state !== 1 /* Pending */) {\n                    return;\n                }\n                _this.state = newState;\n                _this.resolvedValue = value;\n                whenFinished = queue_1.queueMicroTask;\n                // Only enqueue a callback runner if there are callbacks so that initially fulfilled Promises don't have to\n                // wait an extra turn.\n                if (callbacks && callbacks.length > 0) {\n                    queue_1.queueMicroTask(function () {\n                        if (callbacks) {\n                            var count = callbacks.length;\n                            for (var i = 0; i < count; ++i) {\n                                callbacks[i].call(null);\n                            }\n                            callbacks = null;\n                        }\n                    });\n                }\n            };\n            /**\n             * Resolves this promise.\n             *\n             * @param newState The resolved state for this promise.\n             * @param {T|any} value The resolved value for this promise.\n             */\n            var resolve = function (newState, value) {\n                if (isResolved()) {\n                    return;\n                }\n                if (isThenable(value)) {\n                    value.then(settle.bind(null, 0 /* Fulfilled */), settle.bind(null, 2 /* Rejected */));\n                    isChained = true;\n                }\n                else {\n                    settle(newState, value);\n                }\n            };\n            this.then = function (onFulfilled, onRejected) {\n                return new Promise(function (resolve, reject) {\n                    // whenFinished initially queues up callbacks for execution after the promise has settled. Once the\n                    // promise has settled, whenFinished will schedule callbacks for execution on the next turn through the\n                    // event loop.\n                    whenFinished(function () {\n                        var callback = _this.state === 2 /* Rejected */ ? onRejected : onFulfilled;\n                        if (typeof callback === 'function') {\n                            try {\n                                resolve(callback(_this.resolvedValue));\n                            }\n                            catch (error) {\n                                reject(error);\n                            }\n                        }\n                        else if (_this.state === 2 /* Rejected */) {\n                            reject(_this.resolvedValue);\n                        }\n                        else {\n                            resolve(_this.resolvedValue);\n                        }\n                    });\n                });\n            };\n            try {\n                executor(resolve.bind(null, 0 /* Fulfilled */), resolve.bind(null, 2 /* Rejected */));\n            }\n            catch (error) {\n                settle(2 /* Rejected */, error);\n            }\n        }\n        Promise.all = function (iterable) {\n            return new this(function (resolve, reject) {\n                var values = [];\n                var complete = 0;\n                var total = 0;\n                var populating = true;\n                function fulfill(index, value) {\n                    values[index] = value;\n                    ++complete;\n                    finish();\n                }\n                function finish() {\n                    if (populating || complete < total) {\n                        return;\n                    }\n                    resolve(values);\n                }\n                function processItem(index, item) {\n                    ++total;\n                    if (isThenable(item)) {\n                        // If an item Promise rejects, this Promise is immediately rejected with the item\n                        // Promise's rejection error.\n                        item.then(fulfill.bind(null, index), reject);\n                    }\n                    else {\n                        Promise.resolve(item).then(fulfill.bind(null, index));\n                    }\n                }\n                var i = 0;\n                iterator_1.forOf(iterable, function (value) {\n                    processItem(i, value);\n                    i++;\n                });\n                populating = false;\n                finish();\n            });\n        };\n        Promise.race = function (iterable) {\n            return new this(function (resolve, reject) {\n                iterator_1.forOf(iterable, function (item) {\n                    if (item instanceof Promise) {\n                        // If a Promise item rejects, this Promise is immediately rejected with the item\n                        // Promise's rejection error.\n                        item.then(resolve, reject);\n                    }\n                    else {\n                        Promise.resolve(item).then(resolve);\n                    }\n                });\n            });\n        };\n        Promise.reject = function (reason) {\n            return new this(function (resolve, reject) {\n                reject(reason);\n            });\n        };\n        Promise.resolve = function (value) {\n            return new this(function (resolve) {\n                resolve(value);\n            });\n        };\n        Promise.prototype.catch = function (onRejected) {\n            return this.then(undefined, onRejected);\n        };\n        return Promise;\n    }());\n    Shim.Promise = Promise;\n})(Shim || (Shim = {}));\nvar Promise = (function () {\n    /**\n     * Creates a new Promise.\n     *\n     * @constructor\n     *\n     * @param executor\n     * The executor function is called immediately when the Promise is instantiated. It is responsible for\n     * starting the asynchronous operation when it is invoked.\n     *\n     * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n     * successfully, or the `reject` function when the operation fails.\n     */\n    /* istanbul ignore next */\n    function Promise(executor) {\n    }\n    /**\n     * Converts an iterable object containing promises into a single promise that resolves to a new iterable object\n     * containing the fulfilled values of all the promises in the iterable, in the same order as the Promises in the\n     * iterable. Iterable values that are not promises are converted to promises using Promise.resolve.\n     *\n     * @example\n     * Promise.all([ Promise.resolve('foo'), 'bar' ]).then(function (value) {\n     *     value[0] === 'foo'; // true\n     *     value[1] === 'bar'; // true\n     * });\n     *\n     * @example\n     * Promise.all({\n     *     foo: Promise.resolve('foo'),\n     *     bar: 'bar'\n     * }).then((value) => {\n     *     value.foo === 'foo'; // true\n     *     value.bar === 'bar'; // true\n     * });\n     */\n    /* istanbul ignore next */\n    Promise.all = function (iterable) {\n        throw new Error();\n    };\n    ;\n    /**\n     * Converts an iterable object containing promises into a single promise that resolves or rejects as soon as one of\n     * the promises in the iterable resolves or rejects, with the value of the resolved or rejected promise. Values in\n     * the iterable that are not Promises are converted to Promises with Promise.resolve.\n     *\n     * @example\n     * Promise.race([ Promise.resolve('foo'), Promise.resolve('bar') ]).then((value) => {\n     *     value === 'foo'; // true\n     * });\n     *\n     * @example\n     * Promise.race({\n     *     foo: Promise.resolve('foo'),\n     *     bar: Promise.resolve('bar')\n     * }).then((value) => {\n     *     value === 'foo'; // true\n     * });\n     */\n    /* istanbul ignore next */\n    Promise.race = function (iterable) {\n        throw new Error();\n    };\n    /**\n     * Creates a new promise that is rejected with the given error.\n     */\n    /* istanbul ignore next */\n    Promise.reject = function (reason) {\n        throw new Error();\n    };\n    /* istanbul ignore next */\n    Promise.resolve = function (value) {\n        throw new Error();\n    };\n    /* istanbul ignore next */\n    Promise.prototype.catch = function (onRejected) {\n        throw new Error();\n    };\n    /* istanbul ignore next */\n    Promise.prototype.then = function (onFulfilled, onRejected) {\n        throw new Error();\n    };\n    return Promise;\n}());\nPromise = __decorate([\n    decorators_1.hasClass('es6-promise', global_1.default.Promise, Shim.Promise)\n], Promise);\nexports.default = Promise;\nglobal_1.default.Promise = has_1.default('es6-promise') ? global_1.default.Promise : Shim.Promise;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decorators_1 = __webpack_require__(12);\nvar global_1 = __webpack_require__(2);\nvar iterator_1 = __webpack_require__(6);\n__webpack_require__(0);\nvar Shim;\n(function (Shim) {\n    var DELETED = {};\n    function getUID() {\n        return Math.floor(Math.random() * 100000000);\n    }\n    var generateName = (function () {\n        var startId = Math.floor(Date.now() % 100000000);\n        return function generateName() {\n            return '__wm' + getUID() + (startId++ + '__');\n        };\n    })();\n    var WeakMap = (function () {\n        function WeakMap(iterable) {\n            var _this = this;\n            this[Symbol.toStringTag] = 'WeakMap';\n            Object.defineProperty(this, '_name', {\n                value: generateName()\n            });\n            this._frozenEntries = [];\n            if (iterable) {\n                iterator_1.forOf(iterable, function (_a) {\n                    var key = _a[0], value = _a[1];\n                    return _this.set(key, value);\n                });\n            }\n        }\n        WeakMap.prototype._getFrozenEntryIndex = function (key) {\n            for (var i = 0; i < this._frozenEntries.length; i++) {\n                if (this._frozenEntries[i].key === key) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n        WeakMap.prototype.delete = function (key) {\n            if (key === undefined || key === null) {\n                return false;\n            }\n            var entry = key[this._name];\n            if (entry && entry.key === key && entry.value !== DELETED) {\n                entry.value = DELETED;\n                return true;\n            }\n            var frozenIndex = this._getFrozenEntryIndex(key);\n            if (frozenIndex >= 0) {\n                this._frozenEntries.splice(frozenIndex, 1);\n                return true;\n            }\n            return false;\n        };\n        WeakMap.prototype.get = function (key) {\n            if (key === undefined || key === null) {\n                return undefined;\n            }\n            var entry = key[this._name];\n            if (entry && entry.key === key && entry.value !== DELETED) {\n                return entry.value;\n            }\n            var frozenIndex = this._getFrozenEntryIndex(key);\n            if (frozenIndex >= 0) {\n                return this._frozenEntries[frozenIndex].value;\n            }\n        };\n        WeakMap.prototype.has = function (key) {\n            if (key === undefined || key === null) {\n                return false;\n            }\n            var entry = key[this._name];\n            if (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n                return true;\n            }\n            var frozenIndex = this._getFrozenEntryIndex(key);\n            if (frozenIndex >= 0) {\n                return true;\n            }\n            return false;\n        };\n        WeakMap.prototype.set = function (key, value) {\n            if (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n                throw new TypeError('Invalid value used as weak map key');\n            }\n            var entry = key[this._name];\n            if (!entry || entry.key !== key) {\n                entry = Object.create(null, {\n                    key: { value: key }\n                });\n                if (Object.isFrozen(key)) {\n                    this._frozenEntries.push(entry);\n                }\n                else {\n                    Object.defineProperty(key, this._name, {\n                        value: entry\n                    });\n                }\n            }\n            entry.value = value;\n            return this;\n        };\n        return WeakMap;\n    }());\n    Shim.WeakMap = WeakMap;\n})(Shim || (Shim = {}));\nvar WeakMap = (function () {\n    /* istanbul ignore next */\n    function WeakMap(iterable) {\n        /* istanbul ignore next */\n        this[Symbol.toStringTag] = 'WeakMap';\n    }\n    /* istanbul ignore next */\n    WeakMap.prototype.delete = function (key) { throw new Error(); };\n    /* istanbul ignore next */\n    WeakMap.prototype.get = function (key) { throw new Error(); };\n    /* istanbul ignore next */\n    WeakMap.prototype.has = function (key) { throw new Error(); };\n    /* istanbul ignore next */\n    WeakMap.prototype.set = function (key, value) { throw new Error(); };\n    return WeakMap;\n}());\nWeakMap = __decorate([\n    decorators_1.hasClass('es6-weakmap', global_1.default.WeakMap, Shim.WeakMap)\n], WeakMap);\nexports.default = WeakMap;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(1);\n/**\n * A class decorator that provides either a native class or a shimmed class based on a feature\n * test\n * @param feature The has feature to check\n * @param trueClass The class to use if feature test returns `true`\n * @param falseClass The class to use if the feature test returns `false` or is not defined\n */\nfunction hasClass(feature, trueClass, falseClass) {\n    return function (target) {\n        return has_1.default(feature) ? trueClass : falseClass;\n    };\n}\nexports.hasClass = hasClass;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lang_1 = __webpack_require__(5);\n/**\n * Parses a query string, returning a ParamList object.\n */\nfunction parseQueryString(input) {\n    var query = {};\n    for (var _i = 0, _a = input.split('&'); _i < _a.length; _i++) {\n        var entry = _a[_i];\n        var indexOfFirstEquals = entry.indexOf('=');\n        var key = void 0;\n        var value = '';\n        if (indexOfFirstEquals >= 0) {\n            key = entry.slice(0, indexOfFirstEquals);\n            value = entry.slice(indexOfFirstEquals + 1);\n        }\n        else {\n            key = entry;\n        }\n        key = key ? decodeURIComponent(key) : '';\n        value = value ? decodeURIComponent(value) : '';\n        if (key in query) {\n            query[key].push(value);\n        }\n        else {\n            query[key] = [value];\n        }\n    }\n    return query;\n}\n/**\n * Represents a set of URL query search parameters.\n */\nvar UrlSearchParams = (function () {\n    /**\n     * Constructs a new UrlSearchParams from a query string, an object of parameters and values, or another\n     * UrlSearchParams.\n     */\n    function UrlSearchParams(input) {\n        var list;\n        if (input instanceof UrlSearchParams) {\n            // Copy the incoming UrlSearchParam's internal list\n            list = lang_1.duplicate(input._list);\n        }\n        else if (typeof input === 'object') {\n            // Copy the incoming object, assuming its property values are either arrays or strings\n            list = {};\n            for (var key in input) {\n                var value = input[key];\n                if (Array.isArray(value)) {\n                    list[key] = value.length ? value.slice() : [''];\n                }\n                else if (value == null) {\n                    list[key] = [''];\n                }\n                else {\n                    list[key] = [value];\n                }\n            }\n        }\n        else if (typeof input === 'string') {\n            // Parse the incoming string as a query string\n            list = parseQueryString(input);\n        }\n        else {\n            list = {};\n        }\n        Object.defineProperty(this, '_list', { value: list });\n    }\n    /**\n     * Appends a new value to the set of values for a key.\n     * @param key The key to add a value for\n     * @param value The value to add\n     */\n    UrlSearchParams.prototype.append = function (key, value) {\n        if (!this.has(key)) {\n            this.set(key, value);\n        }\n        else {\n            var values = this._list[key];\n            if (values) {\n                values.push(value);\n            }\n        }\n    };\n    /**\n     * Deletes all values for a key.\n     * @param key The key whose values are to be removed\n     */\n    UrlSearchParams.prototype.delete = function (key) {\n        // Set to undefined rather than deleting the key, for better consistency across browsers.\n        // If a deleted key is re-added, most browsers put it at the end of iteration order, but IE maintains\n        // its original position.  This approach maintains the original position everywhere.\n        this._list[key] = undefined;\n    };\n    /**\n     * Returns the first value associated with a key.\n     * @param key The key to return the first value for\n     * @return The first string value for the key\n     */\n    UrlSearchParams.prototype.get = function (key) {\n        if (!this.has(key)) {\n            return undefined;\n        }\n        var value = this._list[key];\n        return value ? value[0] : undefined;\n    };\n    /**\n     * Returns all the values associated with a key.\n     * @param key The key to return all values for\n     * @return An array of strings containing all values for the key\n     */\n    UrlSearchParams.prototype.getAll = function (key) {\n        if (!this.has(key)) {\n            return undefined;\n        }\n        return this._list[key];\n    };\n    /**\n     * Returns true if a key has been set to any value, false otherwise.\n     * @param key The key to test for existence\n     * @return A boolean indicating if the key has been set\n     */\n    UrlSearchParams.prototype.has = function (key) {\n        return Array.isArray(this._list[key]);\n    };\n    /**\n     * Returns an array of all keys which have been set.\n     * @return An array of strings containing all keys set in the UrlSearchParams instance\n     */\n    UrlSearchParams.prototype.keys = function () {\n        var keys = [];\n        for (var key in this._list) {\n            if (this.has(key)) {\n                keys.push(key);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Sets the value associated with a key.\n     * @param key The key to set the value of\n     */\n    UrlSearchParams.prototype.set = function (key, value) {\n        this._list[key] = [value];\n    };\n    /**\n     * Returns this object's data as an encoded query string.\n     * @return A string in application/x-www-form-urlencoded format containing all of the set keys/values\n     */\n    UrlSearchParams.prototype.toString = function () {\n        var query = [];\n        for (var key in this._list) {\n            if (!this.has(key)) {\n                continue;\n            }\n            var values = this._list[key];\n            if (values) {\n                var encodedKey = encodeURIComponent(key);\n                for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                    var value = values_1[_i];\n                    query.push(encodedKey + (value ? ('=' + encodeURIComponent(value)) : ''));\n                }\n            }\n        }\n        return query.join('&');\n    };\n    return UrlSearchParams;\n}());\nexports.default = UrlSearchParams;\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar globalObject = (function () {\n    if (typeof window !== 'undefined') {\n        // Browsers\n        return window;\n    }\n    else if (typeof global !== 'undefined') {\n        // Node\n        return global;\n    }\n    else if (typeof self !== 'undefined') {\n        // Web workers\n        return self;\n    }\n    return {};\n})();\nexports.default = globalObject;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(13)))\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global, process) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isFeatureTestThenable(value) {\n    return value && value.then;\n}\n/**\n * A cache of results of feature tests\n */\nexports.testCache = {};\n/**\n * A cache of the un-resolved feature tests\n */\nexports.testFunctions = {};\n/**\n * A cache of unresolved thenables (probably promises)\n * @type {{}}\n */\nvar testThenables = {};\n/**\n * A reference to the global scope (`window` in a browser, `global` in NodeJS)\n */\nvar globalScope = (function () {\n    /* istanbul ignore else */\n    if (typeof window !== 'undefined') {\n        // Browsers\n        return window;\n    }\n    else if (typeof global !== 'undefined') {\n        // Node\n        return global;\n    }\n    else if (typeof self !== 'undefined') {\n        // Web workers\n        return self;\n    }\n    /* istanbul ignore next */\n    return {};\n})();\n/* Grab the staticFeatures if there are available */\nvar staticFeatures = (globalScope.DojoHasEnvironment || {}).staticFeatures;\n/* Cleaning up the DojoHasEnviornment */\nif ('DojoHasEnvironment' in globalScope) {\n    delete globalScope.DojoHasEnvironment;\n}\n/**\n * Custom type guard to narrow the `staticFeatures` to either a map or a function that\n * returns a map.\n *\n * @param value The value to guard for\n */\nfunction isStaticFeatureFunction(value) {\n    return typeof value === 'function';\n}\n/**\n * The cache of asserted features that were available in the global scope when the\n * module loaded\n */\nvar staticCache = staticFeatures\n    ? isStaticFeatureFunction(staticFeatures)\n        ? staticFeatures.apply(globalScope)\n        : staticFeatures\n    : {};/* Providing an empty cache, if none was in the environment\n\n/**\n* AMD plugin function.\n*\n* Conditional loads modules based on a has feature test value.\n*\n* @param resourceId Gives the resolved module id to load.\n* @param require The loader require function with respect to the module that contained the plugin resource in its\n*                dependency list.\n* @param load Callback to loader that consumes result of plugin demand.\n*/\nfunction load(resourceId, require, load, config) {\n    resourceId ? require([resourceId], load) : load();\n}\nexports.load = load;\n/**\n * AMD plugin function.\n *\n * Resolves resourceId into a module id based on possibly-nested tenary expression that branches on has feature test\n * value(s).\n *\n * @param resourceId The id of the module\n * @param normalize Resolves a relative module id into an absolute module id\n */\nfunction normalize(resourceId, normalize) {\n    var tokens = resourceId.match(/[\\?:]|[^:\\?]*/g) || [];\n    var i = 0;\n    function get(skip) {\n        var term = tokens[i++];\n        if (term === ':') {\n            // empty string module name, resolves to null\n            return null;\n        }\n        else {\n            // postfixed with a ? means it is a feature to branch on, the term is the name of the feature\n            if (tokens[i++] === '?') {\n                if (!skip && has(term)) {\n                    // matched the feature, get the first value from the options\n                    return get();\n                }\n                else {\n                    // did not match, get the second value, passing over the first\n                    get(true);\n                    return get(skip);\n                }\n            }\n            // a module\n            return term;\n        }\n    }\n    var id = get();\n    return id && normalize(id);\n}\nexports.normalize = normalize;\n/**\n * Check if a feature has already been registered\n *\n * @param feature the name of the feature\n */\nfunction exists(feature) {\n    var normalizedFeature = feature.toLowerCase();\n    return Boolean(normalizedFeature in staticCache || normalizedFeature in exports.testCache || exports.testFunctions[normalizedFeature]);\n}\nexports.exists = exists;\n/**\n * Register a new test for a named feature.\n *\n * @example\n * has.add('dom-addeventlistener', !!document.addEventListener);\n *\n * @example\n * has.add('touch-events', function () {\n *    return 'ontouchstart' in document\n * });\n *\n * @param feature the name of the feature\n * @param value the value reported of the feature, or a function that will be executed once on first test\n * @param overwrite if an existing value should be overwritten. Defaults to false.\n */\nfunction add(feature, value, overwrite) {\n    if (overwrite === void 0) { overwrite = false; }\n    var normalizedFeature = feature.toLowerCase();\n    if (exists(normalizedFeature) && !overwrite && !(normalizedFeature in staticCache)) {\n        throw new TypeError(\"Feature \\\"\" + feature + \"\\\" exists and overwrite not true.\");\n    }\n    if (typeof value === 'function') {\n        exports.testFunctions[normalizedFeature] = value;\n    }\n    else if (isFeatureTestThenable(value)) {\n        testThenables[feature] = value.then(function (resolvedValue) {\n            exports.testCache[feature] = resolvedValue;\n            delete testThenables[feature];\n        }, function () {\n            delete testThenables[feature];\n        });\n    }\n    else {\n        exports.testCache[normalizedFeature] = value;\n        delete exports.testFunctions[normalizedFeature];\n    }\n}\nexports.add = add;\n/**\n * Return the current value of a named feature.\n *\n * @param feature The name (if a string) or identifier (if an integer) of the feature to test.\n */\nfunction has(feature) {\n    var result;\n    var normalizedFeature = feature.toLowerCase();\n    if (normalizedFeature in staticCache) {\n        result = staticCache[normalizedFeature];\n    }\n    else if (exports.testFunctions[normalizedFeature]) {\n        result = exports.testCache[normalizedFeature] = exports.testFunctions[normalizedFeature].call(null);\n        delete exports.testFunctions[normalizedFeature];\n    }\n    else if (normalizedFeature in exports.testCache) {\n        result = exports.testCache[normalizedFeature];\n    }\n    else if (feature in testThenables) {\n        return false;\n    }\n    else {\n        throw new TypeError(\"Attempt to detect unregistered has feature \\\"\" + feature + \"\\\"\");\n    }\n    return result;\n}\nexports.default = has;\n/*\n * Out of the box feature tests\n */\n/* Environments */\n/* Used as a value to provide a debug only code path */\nadd('debug', true);\n/* Detects if the environment is \"browser like\" */\nadd('host-browser', typeof document !== 'undefined' && typeof location !== 'undefined');\n/* Detects if the environment appears to be NodeJS */\nadd('host-node', function () {\n    if (typeof process === 'object' && process.versions && process.versions.node) {\n        return process.versions.node;\n    }\n});\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(13), __webpack_require__(20)))\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(1);\nvar util_1 = __webpack_require__(18);\nvar iterator_1 = __webpack_require__(6);\nvar number_1 = __webpack_require__(45);\n/**\n * Ensures a non-negative, non-infinite, safe integer.\n *\n * @param length The number to validate\n * @return A proper length\n */\nfunction toLength(length) {\n    length = Number(length);\n    if (isNaN(length)) {\n        return 0;\n    }\n    if (isFinite(length)) {\n        length = Math.floor(length);\n    }\n    // Ensure a non-negative, real, safe integer\n    return Math.min(Math.max(length, 0), number_1.MAX_SAFE_INTEGER);\n}\n/**\n * From ES6 7.1.4 ToInteger()\n *\n * @param value A value to convert\n * @return An integer\n */\nfunction toInteger(value) {\n    value = Number(value);\n    if (isNaN(value)) {\n        return 0;\n    }\n    if (value === 0 || !isFinite(value)) {\n        return value;\n    }\n    return (value > 0 ? 1 : -1) * Math.floor(Math.abs(value));\n}\n/**\n * Normalizes an offset against a given length, wrapping it if negative.\n *\n * @param value The original offset\n * @param length The total length to normalize against\n * @return If negative, provide a distance from the end (length); otherwise provide a distance from 0\n */\nfunction normalizeOffset(value, length) {\n    return value < 0 ? Math.max(length + value, 0) : Math.min(value, length);\n}\n/**\n * A namespace that contains the polyfilled functionality that is then exported below, depending on if\n * the functionality is required or not.\n */\nvar Shim;\n(function (Shim) {\n    function from(arrayLike, mapFunction, thisArg) {\n        if (arrayLike == null) {\n            throw new TypeError('from: requires an array-like object');\n        }\n        if (mapFunction && thisArg) {\n            mapFunction = mapFunction.bind(thisArg);\n        }\n        /* tslint:disable-next-line:variable-name */\n        var Constructor = this;\n        var length = toLength(arrayLike.length);\n        // Support extension\n        var array = (typeof Constructor === 'function') ? Object(new Constructor(length)) : new Array(length);\n        if (!iterator_1.isArrayLike(arrayLike) && !iterator_1.isIterable(arrayLike)) {\n            return array;\n        }\n        var i = 0;\n        iterator_1.forOf(arrayLike, function (value) {\n            array[i] = mapFunction ? mapFunction(value, i) : value;\n            i++;\n        });\n        if (arrayLike.length !== undefined) {\n            array.length = length;\n        }\n        return array;\n    }\n    Shim.from = from;\n    function of() {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        return Array.prototype.slice.call(items);\n    }\n    Shim.of = of;\n    function copyWithin(target, offset, start, end) {\n        if (target == null) {\n            throw new TypeError('copyWithin: target must be an array-like object');\n        }\n        var length = toLength(target.length);\n        offset = normalizeOffset(toInteger(offset), length);\n        start = normalizeOffset(toInteger(start), length);\n        end = normalizeOffset(end === undefined ? length : toInteger(end), length);\n        var count = Math.min(end - start, length - offset);\n        var direction = 1;\n        if (offset > start && offset < (start + count)) {\n            direction = -1;\n            start += count - 1;\n            offset += count - 1;\n        }\n        while (count > 0) {\n            if (start in target) {\n                target[offset] = target[start];\n            }\n            else {\n                delete target[offset];\n            }\n            offset += direction;\n            start += direction;\n            count--;\n        }\n        return target;\n    }\n    Shim.copyWithin = copyWithin;\n    function fill(target, value, start, end) {\n        var length = toLength(target.length);\n        var i = normalizeOffset(toInteger(start), length);\n        end = normalizeOffset(end === undefined ? length : toInteger(end), length);\n        while (i < end) {\n            target[i++] = value;\n        }\n        return target;\n    }\n    Shim.fill = fill;\n    function find(target, callback, thisArg) {\n        var index = findIndex(target, callback, thisArg);\n        return index !== -1 ? target[index] : undefined;\n    }\n    Shim.find = find;\n    function findIndex(target, callback, thisArg) {\n        var length = toLength(target.length);\n        if (!callback) {\n            throw new TypeError('find: second argument must be a function');\n        }\n        if (thisArg) {\n            callback = callback.bind(thisArg);\n        }\n        for (var i = 0; i < length; i++) {\n            if (callback(target[i], i, target)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    Shim.findIndex = findIndex;\n    function includes(target, searchElement, fromIndex) {\n        if (fromIndex === void 0) { fromIndex = 0; }\n        var len = toLength(target.length);\n        for (var i = fromIndex; i < len; ++i) {\n            var currentElement = target[i];\n            if (searchElement === currentElement ||\n                (searchElement !== searchElement && currentElement !== currentElement)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Shim.includes = includes;\n})(Shim = exports.Shim || (exports.Shim = {}));\nexports.from = has_1.default('es6-array-from')\n    ? Array.from\n    : Shim.from;\n/**\n * Creates a new array from the function parameters.\n *\n * @param arguments Any number of arguments for the array\n * @return An array from the given arguments\n */\nexports.of = has_1.default('es6-array-of')\n    ? Array.of\n    : Shim.of;\n/* ES6 Array instance methods */\n/**\n * Copies data internally within an array or array-like object.\n *\n * @param target The target array-like object\n * @param offset The index to start copying values to; if negative, it counts backwards from length\n * @param start The first (inclusive) index to copy; if negative, it counts backwards from length\n * @param end The last (exclusive) index to copy; if negative, it counts backwards from length\n * @return The target\n */\nexports.copyWithin = has_1.default('es6-array-copywithin')\n    ? util_1.wrapNative(Array.prototype.copyWithin)\n    : Shim.copyWithin;\n/**\n * Fills elements of an array-like object with the specified value.\n *\n * @param target The target to fill\n * @param value The value to fill each element of the target with\n * @param start The first index to fill\n * @param end The (exclusive) index at which to stop filling\n * @return The filled target\n */\nexports.fill = has_1.default('es6-array-fill')\n    ? util_1.wrapNative(Array.prototype.fill)\n    : Shim.fill;\n/**\n * Finds and returns the first instance matching the callback or undefined if one is not found.\n *\n * @param target An array-like object\n * @param callback A function returning if the current value matches a criteria\n * @param [thisArg] The execution context for the find function\n * @return The first element matching the callback, or undefined if one does not exist\n */\nexports.find = has_1.default('es6-array-find')\n    ? util_1.wrapNative(Array.prototype.find)\n    : Shim.find;\n/**\n * Performs a linear search and returns the first index whose value satisfies the passed callback,\n * or -1 if no values satisfy it.\n *\n * @param target An array-like object\n * @param callback A function returning true if the current value satisfies its criteria\n * @param [thisArg] The execution context for the find function\n * @return The first index whose value satisfies the passed callback, or -1 if no values satisfy it\n */\nexports.findIndex = has_1.default('es6-array-findindex')\n    ? util_1.wrapNative(Array.prototype.findIndex)\n    : Shim.findIndex;\n/* ES7 Array instance methods */\n/**\n * Determines whether an array includes a given value\n *\n * @param target the target array-like object\n * @param searchElement the item to search for\n * @param fromIndex the starting index to search from\n * @return `true` if the array includes the element, otherwise `false`\n */\nexports.includes = has_1.default('es7-array-includes')\n    ? util_1.wrapNative(Array.prototype.includes)\n    : Shim.includes;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Helper function to generate a value property descriptor\n *\n * @param value        The value the property descriptor should be set to\n * @param enumerable   If the property should be enumberable, defaults to false\n * @param writable     If the property should be writable, defaults to true\n * @param configurable If the property should be configurable, defaults to true\n * @return             The property descriptor object\n */\nfunction getValueDescriptor(value, enumerable, writable, configurable) {\n    if (enumerable === void 0) { enumerable = false; }\n    if (writable === void 0) { writable = true; }\n    if (configurable === void 0) { configurable = true; }\n    return {\n        value: value,\n        enumerable: enumerable,\n        writable: writable,\n        configurable: configurable\n    };\n}\nexports.getValueDescriptor = getValueDescriptor;\n/**\n * A helper function which wraps a function where the first argument becomes the scope\n * of the call\n *\n * @param nativeFunction The source function to be wrapped\n */\nfunction wrapNative(nativeFunction) {\n    return function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return nativeFunction.apply(target, args);\n    };\n}\nexports.wrapNative = wrapNative;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) {\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\n        // CommonJS\n        factory(exports);\n    } else {\n        // Browser globals\n        factory(root.maquette = {});\n    }\n}(this, function (exports) {\n    'use strict';\n    var NAMESPACE_W3 = 'http://www.w3.org/';\n    var NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\n    var NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n    // Utilities\n    var emptyArray = [];\n    var extend = function (base, overrides) {\n        var result = {};\n        Object.keys(base).forEach(function (key) {\n            result[key] = base[key];\n        });\n        if (overrides) {\n            Object.keys(overrides).forEach(function (key) {\n                result[key] = overrides[key];\n            });\n        }\n        return result;\n    };\n    // Hyperscript helper functions\n    var same = function (vnode1, vnode2) {\n        if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\n            return false;\n        }\n        if (vnode1.properties && vnode2.properties) {\n            if (vnode1.properties.key !== vnode2.properties.key) {\n                return false;\n            }\n            return vnode1.properties.bind === vnode2.properties.bind;\n        }\n        return !vnode1.properties && !vnode2.properties;\n    };\n    var toTextVNode = function (data) {\n        return {\n            vnodeSelector: '',\n            properties: undefined,\n            children: undefined,\n            text: data.toString(),\n            domNode: null\n        };\n    };\n    var appendChildren = function (parentSelector, insertions, main) {\n        for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\n            var item = insertions[i];\n            if (Array.isArray(item)) {\n                appendChildren(parentSelector, item, main);\n            } else {\n                if (item !== null && item !== undefined) {\n                    if (!item.hasOwnProperty('vnodeSelector')) {\n                        item = toTextVNode(item);\n                    }\n                    main.push(item);\n                }\n            }\n        }\n    };\n    // Render helper functions\n    var missingTransition = function () {\n        throw new Error('Provide a transitions object to the projectionOptions to do animations');\n    };\n    var DEFAULT_PROJECTION_OPTIONS = {\n        namespace: undefined,\n        eventHandlerInterceptor: undefined,\n        styleApplyer: function (domNode, styleName, value) {\n            // Provides a hook to add vendor prefixes for browsers that still need it.\n            domNode.style[styleName] = value;\n        },\n        transitions: {\n            enter: missingTransition,\n            exit: missingTransition\n        }\n    };\n    var applyDefaultProjectionOptions = function (projectorOptions) {\n        return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\n    };\n    var checkStyleValue = function (styleValue) {\n        if (typeof styleValue !== 'string') {\n            throw new Error('Style values must be strings');\n        }\n    };\n    var setProperties = function (domNode, properties, projectionOptions) {\n        if (!properties) {\n            return;\n        }\n        var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\n        var propNames = Object.keys(properties);\n        var propCount = propNames.length;\n        var _loop_1 = function (i) {\n            var propName = propNames[i];\n            /* tslint:disable:no-var-keyword: edge case */\n            var propValue = properties[propName];\n            /* tslint:enable:no-var-keyword */\n            if (propName === 'className') {\n                throw new Error('Property \"className\" is not supported, use \"class\".');\n            } else if (propName === 'class') {\n                propValue.split(/\\s+/).forEach(function (token) {\n                    return domNode.classList.add(token);\n                });\n            } else if (propName === 'classes') {\n                // object with string keys and boolean values\n                var classNames = Object.keys(propValue);\n                var classNameCount = classNames.length;\n                for (var j = 0; j < classNameCount; j++) {\n                    var className = classNames[j];\n                    if (propValue[className]) {\n                        domNode.classList.add(className);\n                    }\n                }\n            } else if (propName === 'styles') {\n                // object with string keys and string (!) values\n                var styleNames = Object.keys(propValue);\n                var styleCount = styleNames.length;\n                for (var j = 0; j < styleCount; j++) {\n                    var styleName = styleNames[j];\n                    var styleValue = propValue[styleName];\n                    if (styleValue) {\n                        checkStyleValue(styleValue);\n                        projectionOptions.styleApplyer(domNode, styleName, styleValue);\n                    }\n                }\n            } else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n                var type = typeof propValue;\n                if (type === 'function') {\n                    if (propName.lastIndexOf('on', 0) === 0) {\n                        if (eventHandlerInterceptor) {\n                            propValue = eventHandlerInterceptor(propName, propValue, domNode, properties);    // intercept eventhandlers\n                        }\n                        if (propName === 'oninput') {\n                            (function () {\n                                // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\n                                var oldPropValue = propValue;\n                                propValue = function (evt) {\n                                    evt.target['oninput-value'] = evt.target.value;\n                                    // may be HTMLTextAreaElement as well\n                                    oldPropValue.apply(this, [evt]);\n                                };\n                            }());\n                        }\n                        domNode[propName] = propValue;\n                    }\n                } else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n                    if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                        domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                    } else {\n                        domNode.setAttribute(propName, propValue);\n                    }\n                } else {\n                    domNode[propName] = propValue;\n                }\n            }\n        };\n        for (var i = 0; i < propCount; i++) {\n            _loop_1(i);\n        }\n    };\n    var updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\n        if (!properties) {\n            return;\n        }\n        var propertiesUpdated = false;\n        var propNames = Object.keys(properties);\n        var propCount = propNames.length;\n        for (var i = 0; i < propCount; i++) {\n            var propName = propNames[i];\n            // assuming that properties will be nullified instead of missing is by design\n            var propValue = properties[propName];\n            var previousValue = previousProperties[propName];\n            if (propName === 'class') {\n                if (previousValue !== propValue) {\n                    throw new Error('\"class\" property may not be updated. Use the \"classes\" property for conditional css classes.');\n                }\n            } else if (propName === 'classes') {\n                var classList = domNode.classList;\n                var classNames = Object.keys(propValue);\n                var classNameCount = classNames.length;\n                for (var j = 0; j < classNameCount; j++) {\n                    var className = classNames[j];\n                    var on = !!propValue[className];\n                    var previousOn = !!previousValue[className];\n                    if (on === previousOn) {\n                        continue;\n                    }\n                    propertiesUpdated = true;\n                    if (on) {\n                        classList.add(className);\n                    } else {\n                        classList.remove(className);\n                    }\n                }\n            } else if (propName === 'styles') {\n                var styleNames = Object.keys(propValue);\n                var styleCount = styleNames.length;\n                for (var j = 0; j < styleCount; j++) {\n                    var styleName = styleNames[j];\n                    var newStyleValue = propValue[styleName];\n                    var oldStyleValue = previousValue[styleName];\n                    if (newStyleValue === oldStyleValue) {\n                        continue;\n                    }\n                    propertiesUpdated = true;\n                    if (newStyleValue) {\n                        checkStyleValue(newStyleValue);\n                        projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\n                    } else {\n                        projectionOptions.styleApplyer(domNode, styleName, '');\n                    }\n                }\n            } else {\n                if (!propValue && typeof previousValue === 'string') {\n                    propValue = '';\n                }\n                if (propName === 'value') {\n                    if (domNode[propName] !== propValue && domNode['oninput-value'] !== propValue) {\n                        domNode[propName] = propValue;\n                        // Reset the value, even if the virtual DOM did not change\n                        domNode['oninput-value'] = undefined;\n                    }\n                    // else do not update the domNode, otherwise the cursor position would be changed\n                    if (propValue !== previousValue) {\n                        propertiesUpdated = true;\n                    }\n                } else if (propValue !== previousValue) {\n                    var type = typeof propValue;\n                    if (type === 'function') {\n                        throw new Error('Functions may not be updated on subsequent renders (property: ' + propName + '). Hint: declare event handler functions outside the render() function.');\n                    }\n                    if (type === 'string' && propName !== 'innerHTML') {\n                        if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                            domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                        } else {\n                            domNode.setAttribute(propName, propValue);\n                        }\n                    } else {\n                        if (domNode[propName] !== propValue) {\n                            domNode[propName] = propValue;\n                        }\n                    }\n                    propertiesUpdated = true;\n                }\n            }\n        }\n        return propertiesUpdated;\n    };\n    var findIndexOfChild = function (children, sameAs, start) {\n        if (sameAs.vnodeSelector !== '') {\n            // Never scan for text-nodes\n            for (var i = start; i < children.length; i++) {\n                if (same(children[i], sameAs)) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    };\n    var nodeAdded = function (vNode, transitions) {\n        if (vNode.properties) {\n            var enterAnimation = vNode.properties.enterAnimation;\n            if (enterAnimation) {\n                if (typeof enterAnimation === 'function') {\n                    enterAnimation(vNode.domNode, vNode.properties);\n                } else {\n                    transitions.enter(vNode.domNode, vNode.properties, enterAnimation);\n                }\n            }\n        }\n    };\n    var nodeToRemove = function (vNode, transitions) {\n        var domNode = vNode.domNode;\n        if (vNode.properties) {\n            var exitAnimation = vNode.properties.exitAnimation;\n            if (exitAnimation) {\n                domNode.style.pointerEvents = 'none';\n                var removeDomNode = function () {\n                    if (domNode.parentNode) {\n                        domNode.parentNode.removeChild(domNode);\n                    }\n                };\n                if (typeof exitAnimation === 'function') {\n                    exitAnimation(domNode, removeDomNode, vNode.properties);\n                    return;\n                } else {\n                    transitions.exit(vNode.domNode, vNode.properties, exitAnimation, removeDomNode);\n                    return;\n                }\n            }\n        }\n        if (domNode.parentNode) {\n            domNode.parentNode.removeChild(domNode);\n        }\n    };\n    var checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\n        var childNode = childNodes[indexToCheck];\n        if (childNode.vnodeSelector === '') {\n            return;    // Text nodes need not be distinguishable\n        }\n        var properties = childNode.properties;\n        var key = properties ? properties.key === undefined ? properties.bind : properties.key : undefined;\n        if (!key) {\n            for (var i = 0; i < childNodes.length; i++) {\n                if (i !== indexToCheck) {\n                    var node = childNodes[i];\n                    if (same(node, childNode)) {\n                        if (operation === 'added') {\n                            throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' + 'added, but there is now more than one. You must add unique key properties to make them distinguishable.');\n                        } else {\n                            throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' + 'removed, but there were more than one. You must add unique key properties to make them distinguishable.');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    var createDom;\n    var updateDom;\n    var updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\n        if (oldChildren === newChildren) {\n            return false;\n        }\n        oldChildren = oldChildren || emptyArray;\n        newChildren = newChildren || emptyArray;\n        var oldChildrenLength = oldChildren.length;\n        var newChildrenLength = newChildren.length;\n        var transitions = projectionOptions.transitions;\n        var oldIndex = 0;\n        var newIndex = 0;\n        var i;\n        var textUpdated = false;\n        while (newIndex < newChildrenLength) {\n            var oldChild = oldIndex < oldChildrenLength ? oldChildren[oldIndex] : undefined;\n            var newChild = newChildren[newIndex];\n            if (oldChild !== undefined && same(oldChild, newChild)) {\n                textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\n                oldIndex++;\n            } else {\n                var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n                if (findOldIndex >= 0) {\n                    // Remove preceding missing children\n                    for (i = oldIndex; i < findOldIndex; i++) {\n                        nodeToRemove(oldChildren[i], transitions);\n                        checkDistinguishable(oldChildren, i, vnode, 'removed');\n                    }\n                    textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\n                    oldIndex = findOldIndex + 1;\n                } else {\n                    // New child\n                    createDom(newChild, domNode, oldIndex < oldChildrenLength ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\n                    nodeAdded(newChild, transitions);\n                    checkDistinguishable(newChildren, newIndex, vnode, 'added');\n                }\n            }\n            newIndex++;\n        }\n        if (oldChildrenLength > oldIndex) {\n            // Remove child fragments\n            for (i = oldIndex; i < oldChildrenLength; i++) {\n                nodeToRemove(oldChildren[i], transitions);\n                checkDistinguishable(oldChildren, i, vnode, 'removed');\n            }\n        }\n        return textUpdated;\n    };\n    var addChildren = function (domNode, children, projectionOptions) {\n        if (!children) {\n            return;\n        }\n        for (var i = 0; i < children.length; i++) {\n            createDom(children[i], domNode, undefined, projectionOptions);\n        }\n    };\n    var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\n        addChildren(domNode, vnode.children, projectionOptions);\n        // children before properties, needed for value property of <select>.\n        if (vnode.text) {\n            domNode.textContent = vnode.text;\n        }\n        setProperties(domNode, vnode.properties, projectionOptions);\n        if (vnode.properties && vnode.properties.afterCreate) {\n            vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [\n                domNode,\n                projectionOptions,\n                vnode.vnodeSelector,\n                vnode.properties,\n                vnode.children\n            ]);\n        }\n    };\n    createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\n        var domNode, i, c, start = 0, type, found;\n        var vnodeSelector = vnode.vnodeSelector;\n        if (vnodeSelector === '') {\n            domNode = vnode.domNode = document.createTextNode(vnode.text);\n            if (insertBefore !== undefined) {\n                parentNode.insertBefore(domNode, insertBefore);\n            } else {\n                parentNode.appendChild(domNode);\n            }\n        } else {\n            for (i = 0; i <= vnodeSelector.length; ++i) {\n                c = vnodeSelector.charAt(i);\n                if (i === vnodeSelector.length || c === '.' || c === '#') {\n                    type = vnodeSelector.charAt(start - 1);\n                    found = vnodeSelector.slice(start, i);\n                    if (type === '.') {\n                        domNode.classList.add(found);\n                    } else if (type === '#') {\n                        domNode.id = found;\n                    } else {\n                        if (found === 'svg') {\n                            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n                        }\n                        if (projectionOptions.namespace !== undefined) {\n                            domNode = vnode.domNode = document.createElementNS(projectionOptions.namespace, found);\n                        } else {\n                            domNode = vnode.domNode = document.createElement(found);\n                            if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\n                                // IE8 and older don't support setting input type after the DOM Node has been added to the document\n                                domNode.setAttribute('type', vnode.properties.type);\n                            }\n                        }\n                        if (insertBefore !== undefined) {\n                            parentNode.insertBefore(domNode, insertBefore);\n                        } else {\n                            parentNode.appendChild(domNode);\n                        }\n                    }\n                    start = i + 1;\n                }\n            }\n            initPropertiesAndChildren(domNode, vnode, projectionOptions);\n        }\n    };\n    updateDom = function (previous, vnode, projectionOptions) {\n        var domNode = previous.domNode;\n        var textUpdated = false;\n        if (previous === vnode) {\n            return false;    // By contract, VNode objects may not be modified anymore after passing them to maquette\n        }\n        var updated = false;\n        if (vnode.vnodeSelector === '') {\n            if (vnode.text !== previous.text) {\n                var newVNode = document.createTextNode(vnode.text);\n                domNode.parentNode.replaceChild(newVNode, domNode);\n                vnode.domNode = newVNode;\n                textUpdated = true;\n                return textUpdated;\n            }\n        } else {\n            if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) {\n                projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n            }\n            if (previous.text !== vnode.text) {\n                updated = true;\n                if (vnode.text === undefined) {\n                    domNode.removeChild(domNode.firstChild);    // the only textnode presumably\n                } else {\n                    domNode.textContent = vnode.text;\n                }\n            }\n            updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\n            updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\n            if (vnode.properties && vnode.properties.afterUpdate) {\n                vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [\n                    domNode,\n                    projectionOptions,\n                    vnode.vnodeSelector,\n                    vnode.properties,\n                    vnode.children\n                ]);\n            }\n        }\n        if (updated && vnode.properties && vnode.properties.updateAnimation) {\n            vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\n        }\n        vnode.domNode = previous.domNode;\n        return textUpdated;\n    };\n    var createProjection = function (vnode, projectionOptions) {\n        return {\n            update: function (updatedVnode) {\n                if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\n                    throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\n                }\n                updateDom(vnode, updatedVnode, projectionOptions);\n                vnode = updatedVnode;\n            },\n            domNode: vnode.domNode\n        };\n    };\n    // The other two parameters are not added here, because the Typescript compiler creates surrogate code for destructuring 'children'.\n    exports.h = function (selector) {\n        var properties = arguments[1];\n        if (typeof selector !== 'string') {\n            throw new Error();\n        }\n        var childIndex = 1;\n        if (properties && !properties.hasOwnProperty('vnodeSelector') && !Array.isArray(properties) && typeof properties === 'object') {\n            childIndex = 2;\n        } else {\n            // Optional properties argument was omitted\n            properties = undefined;\n        }\n        var text;\n        var children;\n        var argsLength = arguments.length;\n        // Recognize a common special case where there is only a single text node\n        if (argsLength === childIndex + 1) {\n            var onlyChild = arguments[childIndex];\n            if (typeof onlyChild === 'string') {\n                text = onlyChild;\n            } else if (onlyChild !== undefined && onlyChild !== null && onlyChild.length === 1 && typeof onlyChild[0] === 'string') {\n                text = onlyChild[0];\n            }\n        }\n        if (text === undefined) {\n            children = [];\n            for (; childIndex < argsLength; childIndex++) {\n                var child = arguments[childIndex];\n                if (child === null || child === undefined) {\n                } else if (Array.isArray(child)) {\n                    appendChildren(selector, child, children);\n                } else if (child.hasOwnProperty('vnodeSelector')) {\n                    children.push(child);\n                } else {\n                    children.push(toTextVNode(child));\n                }\n            }\n        }\n        return {\n            vnodeSelector: selector,\n            properties: properties,\n            children: children,\n            text: text === '' ? undefined : text,\n            domNode: null\n        };\n    };\n    /**\n * Contains simple low-level utility functions to manipulate the real DOM.\n */\n    exports.dom = {\n        /**\n     * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\n     * its [[Projection.domNode|domNode]] property.\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection.\n     * @returns The [[Projection]] which also contains the DOM Node that was created.\n     */\n        create: function (vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, document.createElement('div'), undefined, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Appends a new childnode to the DOM which is generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param parentNode - The parent node for the new childNode.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n        append: function (parentNode, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, parentNode, undefined, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Inserts a new DOM node which is generated from a [[VNode]].\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param beforeNode - The node that the DOM Node is inserted before.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\n     * NOTE: [[VNode]] objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n        insertBefore: function (beforeNode, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\n     * This means that the virtual DOM and the real DOM will have one overlapping element.\n     * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and childnodes are preserved.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\n     * may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n        merge: function (element, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            vnode.domNode = element;\n            initPropertiesAndChildren(element, vnode, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Replaces an existing DOM node with a node generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param element - The node for the [[VNode]] to replace.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n        replace: function (element, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, element.parentNode, element, projectionOptions);\n            element.parentNode.removeChild(element);\n            return createProjection(vnode, projectionOptions);\n        }\n    };\n    /**\n * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\n * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\n * For more information, see [[CalculationCache]].\n *\n * @param <Result> The type of the value that is cached.\n */\n    exports.createCache = function () {\n        var cachedInputs;\n        var cachedOutcome;\n        return {\n            invalidate: function () {\n                cachedOutcome = undefined;\n                cachedInputs = undefined;\n            },\n            result: function (inputs, calculation) {\n                if (cachedInputs) {\n                    for (var i = 0; i < inputs.length; i++) {\n                        if (cachedInputs[i] !== inputs[i]) {\n                            cachedOutcome = undefined;\n                        }\n                    }\n                }\n                if (!cachedOutcome) {\n                    cachedOutcome = calculation();\n                    cachedInputs = inputs;\n                }\n                return cachedOutcome;\n            }\n        };\n    };\n    /**\n * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\n * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\n *\n * @param <Source>       The type of source items. A database-record for instance.\n * @param <Target>       The type of target items. A [[Component]] for instance.\n * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\n * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\n *                       to the `callback` argument in `Array.map(callback)`.\n * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\n */\n    exports.createMapping = function (getSourceKey, createResult, updateResult) {\n        var keys = [];\n        var results = [];\n        return {\n            results: results,\n            map: function (newSources) {\n                var newKeys = newSources.map(getSourceKey);\n                var oldTargets = results.slice();\n                var oldIndex = 0;\n                for (var i = 0; i < newSources.length; i++) {\n                    var source = newSources[i];\n                    var sourceKey = newKeys[i];\n                    if (sourceKey === keys[oldIndex]) {\n                        results[i] = oldTargets[oldIndex];\n                        updateResult(source, oldTargets[oldIndex], i);\n                        oldIndex++;\n                    } else {\n                        var found = false;\n                        for (var j = 1; j < keys.length + 1; j++) {\n                            var searchIndex = (oldIndex + j) % keys.length;\n                            if (keys[searchIndex] === sourceKey) {\n                                results[i] = oldTargets[searchIndex];\n                                updateResult(newSources[i], oldTargets[searchIndex], i);\n                                oldIndex = searchIndex + 1;\n                                found = true;\n                                break;\n                            }\n                        }\n                        if (!found) {\n                            results[i] = createResult(source, i);\n                        }\n                    }\n                }\n                results.length = newSources.length;\n                keys = newKeys;\n            }\n        };\n    };\n    /**\n * Creates a [[Projector]] instance using the provided projectionOptions.\n *\n * For more information, see [[Projector]].\n *\n * @param projectorOptions   Options that influence how the DOM is rendered and updated.\n */\n    exports.createProjector = function (projectorOptions) {\n        var projector;\n        var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\n        projectionOptions.eventHandlerInterceptor = function (propertyName, eventHandler, domNode, properties) {\n            return function () {\n                // intercept function calls (event handlers) to do a render afterwards.\n                projector.scheduleRender();\n                return eventHandler.apply(properties.bind || this, arguments);\n            };\n        };\n        var renderCompleted = true;\n        var scheduled;\n        var stopped = false;\n        var projections = [];\n        var renderFunctions = [];\n        // matches the projections array\n        var doRender = function () {\n            scheduled = undefined;\n            if (!renderCompleted) {\n                return;    // The last render threw an error, it should be logged in the browser console.\n            }\n            renderCompleted = false;\n            for (var i = 0; i < projections.length; i++) {\n                var updatedVnode = renderFunctions[i]();\n                projections[i].update(updatedVnode);\n            }\n            renderCompleted = true;\n        };\n        projector = {\n            renderNow: doRender,\n            scheduleRender: function () {\n                if (!scheduled && !stopped) {\n                    scheduled = requestAnimationFrame(doRender);\n                }\n            },\n            stop: function () {\n                if (scheduled) {\n                    cancelAnimationFrame(scheduled);\n                    scheduled = undefined;\n                }\n                stopped = true;\n            },\n            resume: function () {\n                stopped = false;\n                renderCompleted = true;\n                projector.scheduleRender();\n            },\n            append: function (parentNode, renderMaquetteFunction) {\n                projections.push(exports.dom.append(parentNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            insertBefore: function (beforeNode, renderMaquetteFunction) {\n                projections.push(exports.dom.insertBefore(beforeNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            merge: function (domNode, renderMaquetteFunction) {\n                projections.push(exports.dom.merge(domNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            replace: function (domNode, renderMaquetteFunction) {\n                projections.push(exports.dom.replace(domNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            detach: function (renderMaquetteFunction) {\n                for (var i = 0; i < renderFunctions.length; i++) {\n                    if (renderFunctions[i] === renderMaquetteFunction) {\n                        renderFunctions.splice(i, 1);\n                        return projections.splice(i, 1)[0];\n                    }\n                }\n                throw new Error('renderMaquetteFunction was not found');\n            }\n        };\n        return projector;\n    };\n}));\n//# sourceMappingURL=maquette.js.map\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lang_1 = __webpack_require__(5);\nfunction emit(target, event) {\n    if (target.dispatchEvent &&\n        ((target.ownerDocument && target.ownerDocument.createEvent) ||\n            (target.document && target.document.createEvent) ||\n            target.createEvent) /* matches document */) {\n        var nativeEvent = (target.ownerDocument || target.document || target).createEvent('HTMLEvents');\n        nativeEvent.initEvent(event.type, Boolean(event.bubbles), Boolean(event.cancelable));\n        for (var key in event) {\n            if (!(key in nativeEvent)) {\n                nativeEvent[key] = event[key];\n            }\n        }\n        return target.dispatchEvent(nativeEvent);\n    }\n    if (target.emit) {\n        if (target.removeListener) {\n            // Node.js EventEmitter\n            target.emit(event.type, event);\n            return false;\n        }\n        else if (target.on) {\n            // Dojo Evented or similar\n            target.emit(event);\n            return false;\n        }\n    }\n    throw new Error('Target must be an event emitter');\n}\nexports.emit = emit;\nfunction on(target, type, listener, capture) {\n    if (Array.isArray(type)) {\n        var handles = type.map(function (type) {\n            return on(target, type, listener, capture);\n        });\n        return lang_1.createCompositeHandle.apply(void 0, handles);\n    }\n    var callback = function () {\n        listener.apply(this, arguments);\n    };\n    // DOM EventTarget\n    if (target.addEventListener && target.removeEventListener) {\n        target.addEventListener(type, callback, capture);\n        return lang_1.createHandle(function () {\n            target.removeEventListener(type, callback, capture);\n        });\n    }\n    if (target.on) {\n        // EventEmitter\n        if (target.removeListener) {\n            target.on(type, callback);\n            return lang_1.createHandle(function () {\n                target.removeListener(type, callback);\n            });\n        }\n        else if (target.emit) {\n            return target.on(type, listener);\n        }\n    }\n    throw new TypeError('Unknown event emitter object');\n}\nexports.default = on;\nfunction once(target, type, listener, capture) {\n    // FIXME\n    // tslint:disable-next-line:no-var-keyword\n    var handle = on(target, type, function () {\n        handle.destroy();\n        return listener.apply(this, arguments);\n    }, capture);\n    return handle;\n}\nexports.once = once;\nfunction pausable(target, type, listener, capture) {\n    var paused;\n    var handle = on(target, type, function () {\n        if (!paused) {\n            return listener.apply(this, arguments);\n        }\n    }, capture);\n    handle.pause = function () {\n        paused = true;\n    };\n    handle.resume = function () {\n        paused = false;\n    };\n    return handle;\n}\nexports.pausable = pausable;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Task_1 = __webpack_require__(38);\nvar Evented_1 = __webpack_require__(8);\nvar on_1 = __webpack_require__(21);\nvar UrlSearchParams_1 = __webpack_require__(14);\nvar array_1 = __webpack_require__(17);\nvar Promise_1 = __webpack_require__(10);\nvar WeakMap_1 = __webpack_require__(11);\nvar path_1 = __webpack_require__(23);\nvar parentMap = new WeakMap_1.default();\n/**\n * Whether the route has been appended to another route or router.\n */\nfunction hasBeenAppended(route) {\n    return parentMap.has(route) || route.parent !== undefined;\n}\nexports.hasBeenAppended = hasBeenAppended;\n/**\n * Finds the router whose route hierarchy the route has been appended to.\n *\n * Throws if the route was not appended to any router.\n */\nfunction findRouter(route) {\n    while (route.parent) {\n        route = route.parent;\n    }\n    var router = parentMap.get(route);\n    if (!router) {\n        throw new Error('Cannot generate link for route that is not in the hierarchy');\n    }\n    else {\n        return router;\n    }\n}\nexports.findRouter = findRouter;\n// istanbul ignore next\nvar noop = function () {\n};\nfunction createDeferral() {\n    // Use noop since TypeScript doesn't know we're assigning cancel and resume in the promise executor.\n    var cancel = noop;\n    var resume = noop;\n    var promise = new Promise_1.default(function (resolve, reject) {\n        cancel = reject;\n        // Wrap resolve to avoid resume being called with a thenable if type checking is not used.\n        resume = function () { return resolve(); };\n    });\n    return { cancel: cancel, promise: promise, resume: resume };\n}\nfunction reportError(router, context, path, error) {\n    router.emit({\n        context: context,\n        error: error,\n        path: path,\n        target: router,\n        type: 'error'\n    });\n}\nfunction catchRejection(router, context, path, thenable) {\n    if (thenable) {\n        Promise_1.default.resolve(thenable).catch(function (error) {\n            reportError(router, context, path, error);\n        });\n    }\n}\nvar Router = (function (_super) {\n    __extends(Router, _super);\n    function Router(options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        var context = options.context, fallback = options.fallback, history = options.history;\n        _this = _super.call(this, {}) || this;\n        var contextFactory;\n        if (typeof context === 'function') {\n            contextFactory = context;\n        }\n        else if (typeof context === 'undefined') {\n            contextFactory = function () {\n                return {};\n            };\n        }\n        else {\n            // Assign to a constant since the context variable may be changed after the function is defined,\n            // which would violate its typing.\n            var sharedContext_1 = context;\n            contextFactory = function () { return sharedContext_1; };\n        }\n        if (history) {\n            _this.own(history);\n        }\n        _this._contextFactory = contextFactory;\n        _this._currentSelection = [];\n        _this._dispatchFromStart = false;\n        _this._fallback = fallback;\n        _this._history = history;\n        _this._routes = [];\n        _this._started = false;\n        return _this;\n    }\n    Router.prototype.append = function (add) {\n        var _this = this;\n        var append = function (route) {\n            if (hasBeenAppended(route)) {\n                throw new Error('Cannot append route that has already been appended');\n            }\n            _this._routes.push(route);\n            parentMap.set(route, _this);\n        };\n        if (Array.isArray(add)) {\n            for (var _i = 0, add_1 = add; _i < add_1.length; _i++) {\n                var route = add_1[_i];\n                append(route);\n            }\n        }\n        else {\n            append(add);\n        }\n    };\n    Router.prototype.dispatch = function (context, path) {\n        var _this = this;\n        // Reset, any further calls can't have come from start(). This is necessary since the navstart listeners\n        // may call dispatch() themselves.\n        var dispatchFromStart = this._dispatchFromStart;\n        this._dispatchFromStart = false;\n        var canceled = false;\n        var cancel = function () {\n            canceled = true;\n        };\n        var deferrals = [];\n        this.emit({\n            cancel: cancel,\n            defer: function () {\n                var _a = createDeferral(), cancel = _a.cancel, promise = _a.promise, resume = _a.resume;\n                deferrals.push(promise);\n                return { cancel: cancel, resume: resume };\n            },\n            path: path,\n            target: this,\n            type: 'navstart'\n        });\n        // Synchronous cancelation.\n        if (canceled) {\n            return Task_1.default.resolve({ success: false });\n        }\n        var _a = path_1.parse(path), searchParams = _a.searchParams, segments = _a.segments, trailingSlash = _a.trailingSlash;\n        return new Task_1.default(function (resolve, reject) {\n            // *Always* start dispatching in a future turn, even if there were no deferrals.\n            Promise_1.default.all(deferrals).then(function () {\n                // The cancel() function used in the NavigationStartEvent is reused as the Task canceler.\n                // Strictly speaking any navstart listener can cancel the dispatch asynchronously, as long as it\n                // manages to do so before this turn.\n                if (canceled) {\n                    return { success: false };\n                }\n                var redirect;\n                var dispatched = _this._routes.some(function (route) {\n                    var result = route.select(context, segments, trailingSlash, searchParams);\n                    if (typeof result === 'string') {\n                        redirect = result;\n                        return true;\n                    }\n                    if (result.length === 0) {\n                        return false;\n                    }\n                    // Update the selected routes after selecting new routes, but before invoking the handlers.\n                    // This means the original value is available to guard() and params() functions, and the\n                    // new value when the newly selected routes are executed.\n                    //\n                    // Reset selected routes if not dispatched from start().\n                    _this._currentSelection = dispatchFromStart ? result : [];\n                    for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n                        var _a = result_1[_i], handler = _a.handler, params = _a.params;\n                        catchRejection(_this, context, path, handler({ context: context, params: params }));\n                    }\n                    return true;\n                });\n                // Reset the selected routes if the dispatch was unsuccessful, or if a redirect was requested.\n                if (!dispatched || redirect !== undefined) {\n                    _this._currentSelection = [];\n                }\n                if (!dispatched && _this._fallback) {\n                    catchRejection(_this, context, path, _this._fallback({ context: context, params: {} }));\n                    return { success: false };\n                }\n                var result = { success: dispatched };\n                if (redirect !== undefined) {\n                    result.redirect = redirect;\n                }\n                return result;\n            }, \n            // When deferrals are canceled their corresponding promise is rejected. Ensure the task resolves\n            // with `false` instead of being rejected too.\n            function () {\n                return { success: false };\n            }).then(resolve, function (error) {\n                reportError(_this, context, path, error);\n                reject(error);\n            });\n        }, cancel);\n    };\n    Router.prototype.link = function (route, params) {\n        var _this = this;\n        if (params === void 0) { params = {}; }\n        var hierarchy = [route];\n        for (var parent_1 = route.parent; parent_1 !== undefined; parent_1 = parent_1.parent) {\n            hierarchy.unshift(parent_1);\n        }\n        if (!array_1.includes(this._routes, hierarchy[0])) {\n            throw new Error('Cannot generate link for route that is not in the hierarchy');\n        }\n        var addLeadingSlash = hierarchy[0].path.leadingSlash;\n        var addTrailingSlash = false;\n        var segments = [];\n        var searchParams = new UrlSearchParams_1.default();\n        hierarchy\n            .map(function (route, index) {\n            var path = route.path;\n            var currentPathValues;\n            var currentSearchParams;\n            var selection = _this._currentSelection[index];\n            if (selection && selection.route === route) {\n                currentPathValues = selection.rawPathValues;\n                currentSearchParams = selection.rawSearchParams;\n            }\n            return { currentPathValues: currentPathValues, currentSearchParams: currentSearchParams, path: path };\n        })\n            .forEach(function (_a) {\n            var currentPathValues = _a.currentPathValues, currentSearchParams = _a.currentSearchParams, path = _a.path;\n            var expectedSegments = path.expectedSegments, searchParameters = path.searchParameters, trailingSlash = path.trailingSlash;\n            addTrailingSlash = trailingSlash;\n            var namedOffset = 0;\n            for (var _i = 0, expectedSegments_1 = expectedSegments; _i < expectedSegments_1.length; _i++) {\n                var segment = expectedSegments_1[_i];\n                if (path_1.isNamedSegment(segment)) {\n                    var value = params[segment.name];\n                    if (typeof value === 'string') {\n                        segments.push(value);\n                    }\n                    else if (Array.isArray(value)) {\n                        if (value.length === 1) {\n                            segments.push(value[0]);\n                        }\n                        else {\n                            throw new TypeError(\"Cannot generate link, multiple values for parameter '\" + segment.name + \"'\");\n                        }\n                    }\n                    else if (currentPathValues) {\n                        segments.push(currentPathValues[namedOffset]);\n                    }\n                    else {\n                        throw new Error(\"Cannot generate link, missing parameter '\" + segment.name + \"'\");\n                    }\n                    namedOffset++;\n                }\n                else {\n                    segments.push(segment.literal);\n                }\n            }\n            for (var _b = 0, searchParameters_1 = searchParameters; _b < searchParameters_1.length; _b++) {\n                var key = searchParameters_1[_b];\n                // Don't repeat the search parameter if a previous route in the hierarchy has already appended\n                // it.\n                if (searchParams.has(key)) {\n                    continue;\n                }\n                var value = params[key];\n                if (typeof value === 'string') {\n                    searchParams.append(key, value);\n                }\n                else if (Array.isArray(value)) {\n                    for (var _c = 0, value_1 = value; _c < value_1.length; _c++) {\n                        var item = value_1[_c];\n                        searchParams.append(key, item);\n                    }\n                }\n                else if (currentSearchParams) {\n                    for (var _d = 0, _e = currentSearchParams[key]; _d < _e.length; _d++) {\n                        var item = _e[_d];\n                        searchParams.append(key, item);\n                    }\n                }\n                else {\n                    throw new Error(\"Cannot generate link, missing search parameter '\" + key + \"'\");\n                }\n            }\n        });\n        var pathname = segments.join('/');\n        if (addLeadingSlash) {\n            pathname = '/' + pathname;\n        }\n        if (addTrailingSlash) {\n            pathname += '/';\n        }\n        if (this._history) {\n            pathname = this._history.prefix(pathname);\n        }\n        var search = searchParams.toString();\n        var path = search ? pathname + \"?\" + search : pathname;\n        return path;\n    };\n    Router.prototype.replacePath = function (path) {\n        if (!this._history) {\n            throw new Error('Cannot replace path, router was created without a history manager');\n        }\n        this._history.replace(path);\n    };\n    Router.prototype.setPath = function (path) {\n        if (!this._history) {\n            throw new Error('Cannot set path, router was created without a history manager');\n        }\n        this._history.set(path);\n    };\n    Router.prototype.start = function (startOptions) {\n        var _this = this;\n        if (startOptions === void 0) { startOptions = { dispatchCurrent: true }; }\n        var dispatchCurrent = startOptions.dispatchCurrent;\n        if (this._started) {\n            throw new Error('start can only be called once');\n        }\n        this._started = true;\n        if (!this._history) {\n            return {\n                pause: function () {\n                },\n                resume: function () {\n                },\n                destroy: function () {\n                }\n            };\n        }\n        var lastDispatch;\n        var redirectCount = 0;\n        var redirecting = false;\n        var dispatch = function (path) {\n            if (lastDispatch) {\n                lastDispatch.cancel();\n            }\n            // Reset redirect count if the dispatch was triggered by a non-redirect history change. This allows\n            // a route's exec / fallback / index handler to change the history, setting off a new flurry of\n            // redirects, without being encumbered by the number of redirects that led to that route being selected.\n            if (!redirecting) {\n                redirectCount = 0;\n            }\n            // Signal to dispatch() that it was called from here.\n            _this._dispatchFromStart = true;\n            var context = _this._contextFactory();\n            lastDispatch = _this.dispatch(context, path).then(function (dispatchResult) {\n                var _a = dispatchResult || { success: false }, success = _a.success, _b = _a.redirect, redirect = _b === void 0 ? undefined : _b;\n                if (success && redirect !== undefined) {\n                    redirectCount++;\n                    if (redirectCount > 20) {\n                        var error = new Error('More than 20 redirects, giving up');\n                        reportError(_this, context, path, error);\n                        throw error;\n                    }\n                    redirecting = true;\n                    // The history manager MUST emit the change event synchronously.\n                    _this._history.replace(redirect);\n                    redirecting = false;\n                }\n                return dispatchResult;\n            });\n        };\n        var listener = on_1.pausable(this._history, 'change', function (event) {\n            dispatch(event.value);\n        });\n        this.own(listener);\n        if (dispatchCurrent) {\n            dispatch(this._history.current);\n        }\n        return listener;\n    };\n    return Router;\n}(Evented_1.default));\nexports.Router = Router;\nexports.default = Router;\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UrlSearchParams_1 = __webpack_require__(14);\n/**\n * Parses a path\n * @param path The path to parse.\n * @return The search params, pathname segments, and whether it ended with a trailing slash.\n */\nfunction parse(path) {\n    var tokens = path.split(/([/?#])/).filter(Boolean);\n    var pathnameTokens = tokens;\n    var searchParams;\n    var searchStart = tokens.indexOf('?');\n    var hashStart = tokens.indexOf('#');\n    if (searchStart >= 0) {\n        if (hashStart >= 0) {\n            // Either `/foo?bar#baz` or `/foo#bar?baz`\n            pathnameTokens = tokens.slice(0, Math.min(searchStart, hashStart));\n            searchParams = new UrlSearchParams_1.default(tokens.slice(searchStart + 1, hashStart).join(''));\n        }\n        else {\n            // `/foo?bar`\n            pathnameTokens = tokens.slice(0, searchStart);\n            searchParams = new UrlSearchParams_1.default(tokens.slice(searchStart + 1).join(''));\n        }\n    }\n    else {\n        searchParams = new UrlSearchParams_1.default();\n        if (hashStart >= 0) {\n            // `/foo#bar`\n            pathnameTokens = tokens.slice(0, hashStart);\n        }\n    }\n    var segments = pathnameTokens.filter(function (t) { return t !== '/'; });\n    var trailingSlash = pathnameTokens[pathnameTokens.length - 1] === '/' && segments.length > 0;\n    return {\n        searchParams: searchParams,\n        segments: segments,\n        trailingSlash: trailingSlash\n    };\n}\nexports.parse = parse;\n/**\n * Determines whether a DeconstructedPath is a (partial) match for given pathname segments.\n * @param expectedSegments Part of a DeconstructedPath object.\n * @param segments Pathname segments as returned by `parse()`\n * @return A result object.\n */\nfunction match(_a, segments) {\n    var expectedSegments = _a.expectedSegments;\n    if (expectedSegments.length === 0) {\n        return {\n            hasRemaining: segments.length > 0,\n            offset: 0,\n            values: []\n        };\n    }\n    if (expectedSegments.length > segments.length) {\n        return null;\n    }\n    var isMatch = true;\n    var values = [];\n    for (var i = 0; isMatch && i < expectedSegments.length; i++) {\n        var value = segments[i];\n        var expected = expectedSegments[i];\n        if (isNamedSegment(expected)) {\n            values.push(value);\n        }\n        else if (expected.literal !== value) {\n            isMatch = false;\n        }\n    }\n    if (!isMatch) {\n        return null;\n    }\n    return {\n        hasRemaining: expectedSegments.length < segments.length,\n        offset: expectedSegments.length,\n        values: values\n    };\n}\nexports.match = match;\n/**\n * Determine whether the segment is a NamedSegment.\n *\n * @param segment The segment to be checked\n * @return true if the segment is a NamedSegment, false otherwise\n */\nfunction isNamedSegment(segment) {\n    return segment.name !== undefined;\n}\nexports.isNamedSegment = isNamedSegment;\n/**\n * Deconstruct a route path into its constituent parts.\n * @param path The path to deconstruct.\n * @return An object describing the path's constituent parts.\n */\nfunction deconstruct(path) {\n    var expectedSegments = [];\n    var parameters = [];\n    var searchParameters = [];\n    var trailingSlash = false;\n    var tokens = path.split(/([/{}?&])/).filter(Boolean);\n    var leadingSlash = tokens[0] === '/';\n    var i = 0;\n    var consume = function () { return tokens[i++]; };\n    var peek = function () { return tokens[i]; };\n    var inSearchComponent = false;\n    while (i < tokens.length) {\n        var t = consume();\n        switch (t) {\n            case '{': {\n                var name_1 = consume();\n                if (!name_1 || name_1 === '}') {\n                    throw new TypeError('Parameter must have a name');\n                }\n                // Reserve : for future use, e.g. including type data in the parameter declaration.\n                if (name_1 === '{' || name_1 === '&' || /:/.test(name_1)) {\n                    throw new TypeError('Parameter name must not contain \\'{\\', \\'&\\' or \\':\\'');\n                }\n                if (parameters.indexOf(name_1) !== -1 || searchParameters.indexOf(name_1) !== -1) {\n                    throw new TypeError(\"Parameter must have a unique name, got '\" + name_1 + \"'\");\n                }\n                var closing = consume();\n                if (!closing || closing !== '}') {\n                    throw new TypeError(\"Parameter name must be followed by '}', got '\" + closing + \"'\");\n                }\n                var separator = peek();\n                if (separator) {\n                    if (inSearchComponent) {\n                        if (separator !== '&') {\n                            throw new TypeError(\"Search parameter must be followed by '&', got '\" + separator + \"'\");\n                        }\n                    }\n                    else if (separator !== '/' && separator !== '?') {\n                        throw new TypeError(\"Parameter must be followed by '/' or '?', got '\" + separator + \"'\");\n                    }\n                }\n                if (inSearchComponent) {\n                    searchParameters.push(name_1);\n                }\n                else {\n                    parameters.push(name_1);\n                    expectedSegments.push(Object.freeze({ name: name_1 }));\n                }\n                break;\n            }\n            case '?':\n            case '/':\n                if (inSearchComponent) {\n                    throw new TypeError(\"Expected parameter in search component, got '\" + t + \"'\");\n                }\n                if (t === '?') {\n                    inSearchComponent = true;\n                    if (expectedSegments.length === 0) {\n                        throw new TypeError('Path must contain at least one segment');\n                    }\n                }\n                if (t === '/') {\n                    var next_1 = peek();\n                    if (next_1 === '/') {\n                        throw new TypeError('Path segment must not be empty');\n                    }\n                    if (expectedSegments.length > 0 && (!next_1 || next_1 === '?')) {\n                        trailingSlash = true;\n                    }\n                }\n                break;\n            case '&':\n                if (!inSearchComponent) {\n                    throw new TypeError('Path segment must not contain \\'&\\'');\n                }\n                var next = peek();\n                if (next === '&') {\n                    throw new TypeError('Expected parameter in search component, got \\'&\\'');\n                }\n                break;\n            default:\n                if (inSearchComponent) {\n                    throw new TypeError(\"Expected parameter in search component, got '\" + t + \"'\");\n                }\n                expectedSegments.push(Object.freeze({ literal: t }));\n        }\n    }\n    return Object.freeze({\n        expectedSegments: Object.freeze(expectedSegments),\n        leadingSlash: leadingSlash,\n        parameters: Object.freeze(parameters),\n        searchParameters: Object.freeze(searchParameters),\n        trailingSlash: trailingSlash\n    });\n}\nexports.deconstruct = deconstruct;\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Promise_1 = __webpack_require__(10);\nvar Map_1 = __webpack_require__(9);\nvar Symbol_1 = __webpack_require__(0);\nvar Evented_1 = __webpack_require__(8);\n/**\n * Widget base symbol type\n */\nexports.WIDGET_BASE_TYPE = Symbol_1.default('Widget Base');\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nfunction isWidgetBaseConstructor(item) {\n    return Boolean(item && item._type === exports.WIDGET_BASE_TYPE);\n}\nexports.isWidgetBaseConstructor = isWidgetBaseConstructor;\n/**\n * The WidgetRegistry implementation\n */\nvar WidgetRegistry = (function (_super) {\n    __extends(WidgetRegistry, _super);\n    function WidgetRegistry() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * internal map of labels and WidgetRegistryItem\n         */\n        _this.registry = new Map_1.default();\n        return _this;\n    }\n    WidgetRegistry.prototype.has = function (widgetLabel) {\n        return this.registry.has(widgetLabel);\n    };\n    WidgetRegistry.prototype.define = function (widgetLabel, item) {\n        var _this = this;\n        if (this.registry.has(widgetLabel)) {\n            throw new Error(\"widget has already been registered for '\" + widgetLabel + \"'\");\n        }\n        this.registry.set(widgetLabel, item);\n        if (item instanceof Promise_1.default) {\n            item.then(function (widgetCtor) {\n                _this.registry.set(widgetLabel, widgetCtor);\n                _this.emit({\n                    type: \"loaded:\" + widgetLabel\n                });\n                return widgetCtor;\n            }, function (error) {\n                throw error;\n            });\n        }\n        else {\n            this.emit({\n                type: \"loaded:\" + widgetLabel\n            });\n        }\n    };\n    WidgetRegistry.prototype.get = function (widgetLabel) {\n        var _this = this;\n        if (!this.has(widgetLabel)) {\n            return null;\n        }\n        var item = this.registry.get(widgetLabel);\n        if (isWidgetBaseConstructor(item)) {\n            return item;\n        }\n        if (item instanceof Promise_1.default) {\n            return null;\n        }\n        var promise = item();\n        this.registry.set(widgetLabel, promise);\n        promise.then(function (widgetCtor) {\n            _this.registry.set(widgetLabel, widgetCtor);\n            _this.emit({\n                type: \"loaded:\" + widgetLabel\n            });\n            return widgetCtor;\n        }, function (error) {\n            throw error;\n        });\n        return null;\n    };\n    return WidgetRegistry;\n}(Evented_1.default));\nexports.WidgetRegistry = WidgetRegistry;\nexports.default = WidgetRegistry;\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Projector_1 = __webpack_require__(52);\nvar Route_1 = __webpack_require__(41);\nvar TodoApp_1 = __webpack_require__(55);\nvar routes_1 = __webpack_require__(54);\nvar root = document.querySelector('my-app') || undefined;\nvar Projector = Projector_1.ProjectorMixin(TodoApp_1.default);\nvar projector = new Projector();\n// TODO find a better place for this\nvar filterRoute = new Route_1.default({\n    path: '/{filter}',\n    exec: function (request) {\n        var filter = request.params.filter;\n        projector.setProperties({ filter: filter });\n    }\n});\nroutes_1.default.append(filterRoute);\nprojector.append(root);\nroutes_1.default.start();\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoapp\":\"_2helPkSp\",\"main\":\"xEb6rSqo\",\" _key\":\"todoApp.css\"};\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"filters\":\"_1lLYSj_L\",\"selected\":\"_2tgAruHL\",\" _key\":\"todoFilter.css\"};\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"footer\":\"_1Aao3a1Z\",\"todoCount\":\"_2uMVmiNZ\",\"clearCompleted\":\"_2hpUH5HY\",\" _key\":\"todoFooter.css\"};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"title\":\"_1Ei11x0l\",\"newTodo\":\"_1fL1Y1K_\",\"toggleAll\":\"LW1AvW7w\",\" _key\":\"todoHeader.css\"};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoItem\":\"Roo8BkL2\",\"edit\":\"_3dDtP2Hl\",\"editing\":\"_3n3ruzKn\",\"view\":\"_1kpp6_fu\",\"toggle\":\"CZyfIY00\",\"todoLabel\":\"_1I8ANebp\",\"completed\":\"_1OfV0PVN\",\"destroy\":\"_3hkN9FMg\",\" _key\":\"todoItem.css\"};\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoList\":\"_3KGeCAdt\",\" _key\":\"todoList.css\"};\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n   true ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(13), __webpack_require__(20)))\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Promise_1 = __webpack_require__(10);\n/**\n * No operation function to replace own once instance is destoryed\n */\nfunction noop() {\n    return Promise_1.default.resolve(false);\n}\n/**\n * No op function used to replace own, once instance has been destoryed\n */\nfunction destroyed() {\n    throw new Error('Call made to destroyed method');\n}\nvar Destroyable = (function () {\n    /**\n     * @constructor\n     */\n    function Destroyable() {\n        this.handles = [];\n    }\n    /**\n     * Register handles for the instance that will be destroyed when `this.destroy` is called\n     *\n     * @param {Handle} handle The handle to add for the instance\n     * @returns {Handle} a handle for the handle, removes the handle for the instance and calls destroy\n     */\n    Destroyable.prototype.own = function (handle) {\n        var handles = this.handles;\n        handles.push(handle);\n        return {\n            destroy: function () {\n                handles.splice(handles.indexOf(handle));\n                handle.destroy();\n            }\n        };\n    };\n    /**\n     * Destrpys all handers registered for the instance\n     *\n     * @returns {Promise<any} a promise that resolves once all handles have been destroyed\n     */\n    Destroyable.prototype.destroy = function () {\n        var _this = this;\n        return new Promise_1.default(function (resolve) {\n            _this.handles.forEach(function (handle) {\n                handle && handle.destroy && handle.destroy();\n            });\n            _this.destroy = noop;\n            _this.own = destroyed;\n            resolve(true);\n        });\n    };\n    return Destroyable;\n}());\nexports.Destroyable = Destroyable;\nexports.default = Destroyable;\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WeakMap_1 = __webpack_require__(11);\nvar lang_1 = __webpack_require__(5);\n/**\n * An internal type guard that determines if an value is MapLike or not\n *\n * @param value The value to guard against\n */\nfunction isMapLike(value) {\n    return value && typeof value.get === 'function' && typeof value.set === 'function';\n}\n/**\n * A weak map of dispatchers used to apply the advice\n */\nvar dispatchAdviceMap = new WeakMap_1.default();\n/**\n * A UID for tracking advice ordering\n */\nvar nextId = 0;\n/**\n * Internal function that advises a join point\n *\n * @param dispatcher The current advice dispatcher\n * @param type The type of before or after advice to apply\n * @param advice The advice to apply\n * @param receiveArguments If true, the advice will receive the arguments passed to the join point\n * @return The handle that will remove the advice\n */\nfunction adviseObject(dispatcher, type, advice, receiveArguments) {\n    var previous = dispatcher && dispatcher[type];\n    var advised = {\n        id: nextId++,\n        advice: advice,\n        receiveArguments: receiveArguments\n    };\n    if (previous) {\n        if (type === 'after') {\n            // add the listener to the end of the list\n            // note that we had to change this loop a little bit to workaround a bizarre IE10 JIT bug\n            while (previous.next && (previous = previous.next)) { }\n            previous.next = advised;\n            advised.previous = previous;\n        }\n        else {\n            // add to the beginning\n            if (dispatcher) {\n                dispatcher.before = advised;\n            }\n            advised.next = previous;\n            previous.previous = advised;\n        }\n    }\n    else {\n        dispatcher && (dispatcher[type] = advised);\n    }\n    advice = previous = undefined;\n    return lang_1.createHandle(function () {\n        var _a = (advised || {}), _b = _a.previous, previous = _b === void 0 ? undefined : _b, _c = _a.next, next = _c === void 0 ? undefined : _c;\n        if (dispatcher && !previous && !next) {\n            dispatcher[type] = undefined;\n        }\n        else {\n            if (previous) {\n                previous.next = next;\n            }\n            else {\n                dispatcher && (dispatcher[type] = next);\n            }\n            if (next) {\n                next.previous = previous;\n            }\n        }\n        if (advised) {\n            delete advised.advice;\n        }\n        dispatcher = advised = undefined;\n    });\n}\n/**\n * Advise a join point (function) with supplied advice\n *\n * @param joinPoint The function to be advised\n * @param type The type of advice to be applied\n * @param advice The advice to apply\n */\nfunction adviseJoinPoint(joinPoint, type, advice) {\n    var dispatcher;\n    if (type === 'around') {\n        dispatcher = getJoinPointDispatcher(advice.apply(this, [joinPoint]));\n    }\n    else {\n        dispatcher = getJoinPointDispatcher(joinPoint);\n        var adviceMap = dispatchAdviceMap.get(dispatcher);\n        if (type === 'before') {\n            (adviceMap.before || (adviceMap.before = [])).unshift(advice);\n        }\n        else {\n            (adviceMap.after || (adviceMap.after = [])).push(advice);\n        }\n    }\n    return dispatcher;\n}\n/**\n * An internal function that resolves or creates the dispatcher for a given join point\n *\n * @param target The target object or map\n * @param methodName The name of the method that the dispatcher should be resolved for\n * @return The dispatcher\n */\nfunction getDispatcherObject(target, methodName) {\n    var existing = isMapLike(target) ? target.get(methodName) : target && target[methodName];\n    var dispatcher;\n    if (!existing || existing.target !== target) {\n        /* There is no existing dispatcher, therefore we will create one */\n        dispatcher = function () {\n            var executionId = nextId;\n            var args = arguments;\n            var results;\n            var before = dispatcher.before;\n            while (before) {\n                if (before.advice) {\n                    args = before.advice.apply(this, args) || args;\n                }\n                before = before.next;\n            }\n            if (dispatcher.around && dispatcher.around.advice) {\n                results = dispatcher.around.advice(this, args);\n            }\n            var after = dispatcher.after;\n            while (after && after.id !== undefined && after.id < executionId) {\n                if (after.advice) {\n                    if (after.receiveArguments) {\n                        var newResults = after.advice.apply(this, args);\n                        results = newResults === undefined ? results : newResults;\n                    }\n                    else {\n                        results = after.advice.call(this, results, args);\n                    }\n                }\n                after = after.next;\n            }\n            return results;\n        };\n        if (isMapLike(target)) {\n            target.set(methodName, dispatcher);\n        }\n        else {\n            target && (target[methodName] = dispatcher);\n        }\n        if (existing) {\n            dispatcher.around = {\n                advice: function (target, args) {\n                    return existing.apply(target, args);\n                }\n            };\n        }\n        dispatcher.target = target;\n    }\n    else {\n        dispatcher = existing;\n    }\n    return dispatcher;\n}\n/**\n * Returns the dispatcher function for a given joinPoint (method/function)\n *\n * @param joinPoint The function that is to be advised\n */\nfunction getJoinPointDispatcher(joinPoint) {\n    function dispatcher() {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = dispatchAdviceMap.get(dispatcher), before = _a.before, after = _a.after, joinPoint = _a.joinPoint;\n        if (before) {\n            args = before.reduce(function (previousArgs, advice) {\n                var currentArgs = advice.apply(_this, previousArgs);\n                return currentArgs || previousArgs;\n            }, args);\n        }\n        var result = joinPoint.apply(this, args);\n        if (after) {\n            result = after.reduce(function (previousResult, advice) {\n                return advice.apply(_this, [previousResult].concat(args));\n            }, result);\n        }\n        return result;\n    }\n    /* We want to \"clone\" the advice that has been applied already, if this\n     * joinPoint is already advised */\n    if (dispatchAdviceMap.has(joinPoint)) {\n        var adviceMap = dispatchAdviceMap.get(joinPoint);\n        var before_1 = adviceMap.before, after_1 = adviceMap.after;\n        if (before_1) {\n            before_1 = before_1.slice(0);\n        }\n        if (after_1) {\n            after_1 = after_1.slice(0);\n        }\n        dispatchAdviceMap.set(dispatcher, {\n            joinPoint: adviceMap.joinPoint,\n            before: before_1,\n            after: after_1\n        });\n    }\n    else {\n        dispatchAdviceMap.set(dispatcher, { joinPoint: joinPoint });\n    }\n    return dispatcher;\n}\n/**\n * Apply advice *after* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The after advice\n */\nfunction afterJoinPoint(joinPoint, advice) {\n    return adviseJoinPoint(joinPoint, 'after', advice);\n}\n/**\n * Attaches \"after\" advice to be executed after the original method.\n * The advising function will receive the original method's return value and arguments object.\n * The value it returns will be returned from the method when it is called (even if the return value is undefined).\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original method's return value and arguments object\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction afterObject(target, methodName, advice) {\n    return adviseObject(getDispatcherObject(target, methodName), 'after', advice);\n}\nfunction after(joinPointOrTarget, methodNameOrAdvice, objectAdvice) {\n    if (typeof joinPointOrTarget === 'function') {\n        return afterJoinPoint(joinPointOrTarget, methodNameOrAdvice);\n    }\n    else {\n        return afterObject(joinPointOrTarget, methodNameOrAdvice, objectAdvice);\n    }\n}\nexports.after = after;\n/**\n * Apply advice *around* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The around advice\n */\nfunction aroundJoinPoint(joinPoint, advice) {\n    return adviseJoinPoint(joinPoint, 'around', advice);\n}\nexports.aroundJoinPoint = aroundJoinPoint;\n/**\n * Attaches \"around\" advice around the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original function\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction aroundObject(target, methodName, advice) {\n    var dispatcher = getDispatcherObject(target, methodName);\n    var previous = dispatcher.around;\n    var advised;\n    if (advice) {\n        advised = advice(function () {\n            if (previous && previous.advice) {\n                return previous.advice(this, arguments);\n            }\n        });\n    }\n    dispatcher.around = {\n        advice: function (target, args) {\n            return advised ? advised.apply(target, args) : previous && previous.advice && previous.advice(target, args);\n        }\n    };\n    return lang_1.createHandle(function () {\n        advised = dispatcher = undefined;\n    });\n}\nexports.aroundObject = aroundObject;\nfunction around(joinPointOrTarget, methodNameOrAdvice, objectAdvice) {\n    if (typeof joinPointOrTarget === 'function') {\n        return aroundJoinPoint(joinPointOrTarget, methodNameOrAdvice);\n    }\n    else {\n        return aroundObject(joinPointOrTarget, methodNameOrAdvice, objectAdvice);\n    }\n}\nexports.around = around;\n/**\n * Apply advice *before* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The before advice\n */\nfunction beforeJoinPoint(joinPoint, advice) {\n    return adviseJoinPoint(joinPoint, 'before', advice);\n}\nexports.beforeJoinPoint = beforeJoinPoint;\n/**\n * Attaches \"before\" advice to be executed before the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original, and may return new arguments\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction beforeObject(target, methodName, advice) {\n    return adviseObject(getDispatcherObject(target, methodName), 'before', advice);\n}\nexports.beforeObject = beforeObject;\nfunction before(joinPointOrTarget, methodNameOrAdvice, objectAdvice) {\n    if (typeof joinPointOrTarget === 'function') {\n        return beforeJoinPoint(joinPointOrTarget, methodNameOrAdvice);\n    }\n    else {\n        return beforeObject(joinPointOrTarget, methodNameOrAdvice, objectAdvice);\n    }\n}\nexports.before = before;\n/**\n * Attaches advice to be executed after the original method.\n * The advising function will receive the same arguments as the original method.\n * The value it returns will be returned from the method when it is called *unless* its return value is undefined.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original method\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction on(target, methodName, advice) {\n    return adviseObject(getDispatcherObject(target, methodName), 'after', advice, true);\n}\nexports.on = on;\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterator_1 = __webpack_require__(6);\nvar Promise_1 = __webpack_require__(10);\n__webpack_require__(0);\n/**\n * Take a list of values, and if any are ExtensiblePromise objects, insert the wrapped Promise in its place,\n * otherwise use the original object. We use this to help use the native Promise methods like `all` and `race`.\n *\n * @param iterable    The list of objects to iterate over\n * @returns {any[]}    The list of objects, as an array, with ExtensiblePromises being replaced by Promises.\n */\nfunction unwrapPromises(iterable) {\n    var unwrapped = [];\n    iterator_1.forOf(iterable, function (item) {\n        unwrapped.push(item instanceof ExtensiblePromise ? item._promise : item);\n    });\n    return unwrapped;\n}\n/**\n * An extensible base to allow Promises to be extended in ES5. This class basically wraps a native Promise object,\n * giving an API like a native promise.\n */\nvar ExtensiblePromise = (function () {\n    /**\n     * Creates a new extended Promise.\n     *\n     * @constructor\n     *\n     * @param executor\n     * The executor function is called immediately when the Promise is instantiated. It is responsible for\n     * starting the asynchronous operation when it is invoked.\n     *\n     * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n     * successfully, or the `reject` function when the operation fails.\n     */\n    function ExtensiblePromise(executor) {\n        this._promise = new Promise_1.default(executor);\n    }\n    /**\n     * Return a rejected promise wrapped in an ExtensiblePromise\n     *\n     * @param {Error?} reason    The reason for the rejection\n     * @returns {ExtensiblePromise}\n     */\n    ExtensiblePromise.reject = function (reason) {\n        return new this(function (resolve, reject) { return reject(reason); });\n    };\n    ExtensiblePromise.resolve = function (value) {\n        return new this(function (resolve, reject) { return resolve(value); });\n    };\n    ExtensiblePromise.all = function (iterable) {\n        if (!iterator_1.isArrayLike(iterable) && !iterator_1.isIterable(iterable)) {\n            var promiseKeys_1 = Object.keys(iterable);\n            return new this(function (resolve, reject) {\n                Promise_1.default.all(promiseKeys_1.map(function (key) { return iterable[key]; })).then(function (promiseResults) {\n                    var returnValue = {};\n                    promiseResults.forEach(function (value, index) {\n                        returnValue[promiseKeys_1[index]] = value;\n                    });\n                    resolve(returnValue);\n                }, reject);\n            });\n        }\n        return new this(function (resolve, reject) {\n            Promise_1.default.all(unwrapPromises(iterable)).then(resolve, reject);\n        });\n    };\n    /**\n     * Return a ExtensiblePromise that resolves when one of the passed in objects have resolved\n     *\n     * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n     * @returns {ExtensiblePromise}\n     */\n    ExtensiblePromise.race = function (iterable) {\n        return new this(function (resolve, reject) {\n            Promise_1.default.race(unwrapPromises(iterable)).then(resolve, reject);\n        });\n    };\n    ExtensiblePromise.prototype.catch = function (onRejected) {\n        return this.then(undefined, onRejected);\n    };\n    ExtensiblePromise.prototype.then = function (onFulfilled, onRejected) {\n        var _this = this;\n        var e = function (resolve, reject) {\n            function handler(rejected, valueOrError) {\n                var callback = rejected ? onRejected : onFulfilled;\n                if (typeof callback === 'function') {\n                    try {\n                        resolve(callback(valueOrError));\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                }\n                else if (rejected) {\n                    reject(valueOrError);\n                }\n                else {\n                    resolve(valueOrError);\n                }\n            }\n            _this._promise.then(handler.bind(null, false), handler.bind(null, true));\n        };\n        return new this.constructor(e);\n    };\n    return ExtensiblePromise;\n}());\nexports.default = ExtensiblePromise;\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExtensiblePromise_1 = __webpack_require__(37);\n/**\n * A type guard that determines if `value` is a `Task`\n * @param value The value to guard\n */\nfunction isTask(value) {\n    return Boolean(value && typeof value.cancel === 'function' && Array.isArray(value.children) && isThenable(value));\n}\nexports.isTask = isTask;\n/**\n * Returns true if a given value has a `then` method.\n * @param {any} value The value to check if is Thenable\n * @returns {is Thenable<T>} A type guard if the value is thenable\n */\nfunction isThenable(value) {\n    return value && typeof value.then === 'function';\n}\nexports.isThenable = isThenable;\n/**\n * Task is an extension of Promise that supports cancellation and the Task#finally method.\n */\nvar Task = (function (_super) {\n    __extends(Task, _super);\n    /**\n     * @constructor\n     *\n     * Create a new task. Executor is run immediately. The canceler will be called when the task is canceled.\n     *\n     * @param executor Method that initiates some task\n     * @param canceler Method to call when the task is canceled\n     *\n     */\n    function Task(executor, canceler) {\n        var _this = this;\n        // we have to initialize these to avoid a compiler error of using them before they are initialized\n        var superResolve = function () { };\n        var superReject = function () { };\n        _this = _super.call(this, function (resolve, reject) {\n            superResolve = resolve;\n            superReject = reject;\n        }) || this;\n        _this._state = 1 /* Pending */;\n        _this.children = [];\n        _this.canceler = function () {\n            if (canceler) {\n                canceler();\n            }\n            _this._cancel();\n        };\n        // Don't let the Task resolve if it's been canceled\n        try {\n            executor(function (value) {\n                if (_this._state === 3 /* Canceled */) {\n                    return;\n                }\n                _this._state = 0 /* Fulfilled */;\n                superResolve(value);\n            }, function (reason) {\n                if (_this._state === 3 /* Canceled */) {\n                    return;\n                }\n                _this._state = 2 /* Rejected */;\n                superReject(reason);\n            });\n        }\n        catch (reason) {\n            _this._state = 2 /* Rejected */;\n            superReject(reason);\n        }\n        return _this;\n    }\n    /**\n     * Return a Task that resolves when one of the passed in objects have resolved\n     *\n     * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n     * @returns {Task}\n     */\n    Task.race = function (iterable) {\n        return _super.race.call(this, iterable);\n    };\n    /**\n     * Return a rejected promise wrapped in a Task\n     *\n     * @param {Error?} reason    The reason for the rejection\n     * @returns {Task}\n     */\n    Task.reject = function (reason) {\n        return new this(function (resolve, reject) { return reject(reason); });\n    };\n    Task.resolve = function (value) {\n        return new this(function (resolve, reject) { return resolve(value); });\n    };\n    Task.all = function (iterable) {\n        return _super.all.call(this, iterable);\n    };\n    Object.defineProperty(Task.prototype, \"state\", {\n        get: function () {\n            return this._state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Propagates cancellation down through a Task tree. The Task's state is immediately set to canceled. If a Thenable\n     * finally task was passed in, it is resolved before calling this Task's finally callback; otherwise, this Task's\n     * finally callback is immediately executed. `_cancel` is called for each child Task, passing in the value returned\n     * by this Task's finally callback or a Promise chain that will eventually resolve to that value.\n     */\n    Task.prototype._cancel = function (finallyTask) {\n        var _this = this;\n        this._state = 3 /* Canceled */;\n        var runFinally = function () {\n            try {\n                return _this._finally();\n            }\n            catch (error) {\n                // Any errors in a `finally` callback are completely ignored during cancelation\n            }\n        };\n        if (this._finally) {\n            if (isThenable(finallyTask)) {\n                finallyTask = finallyTask.then(runFinally, runFinally);\n            }\n            else {\n                finallyTask = runFinally();\n            }\n        }\n        this.children.forEach(function (child) {\n            child._cancel(finallyTask);\n        });\n    };\n    /**\n     * Immediately cancels this task if it has not already resolved. This Task and any descendants are synchronously set\n     * to the Canceled state and any `finally` added downstream from the canceled Task are invoked.\n     */\n    Task.prototype.cancel = function () {\n        if (this._state === 1 /* Pending */) {\n            this.canceler();\n        }\n    };\n    Task.prototype.catch = function (onRejected) {\n        return this.then(undefined, onRejected);\n    };\n    /**\n     * Allows for cleanup actions to be performed after resolution of a Promise.\n     */\n    Task.prototype.finally = function (callback) {\n        // if this task is already canceled, call the task\n        if (this._state === 3 /* Canceled */) {\n            callback();\n            return this;\n        }\n        var task = this.then(function (value) { return Task.resolve(callback()).then(function () { return value; }); }, function (reason) { return Task.resolve(callback()).then(function () {\n            throw reason;\n        }); });\n        // Keep a reference to the callback; it will be called if the Task is canceled\n        task._finally = callback;\n        return task;\n    };\n    Task.prototype.then = function (onFulfilled, onRejected) {\n        var _this = this;\n        // FIXME\n        // tslint:disable-next-line:no-var-keyword\n        var task = _super.prototype.then.call(this, \n        // Don't call the onFulfilled or onRejected handlers if this Task is canceled\n        function (value) {\n            if (task._state === 3 /* Canceled */) {\n                return;\n            }\n            if (onFulfilled) {\n                return onFulfilled(value);\n            }\n            return value;\n        }, function (error) {\n            if (task._state === 3 /* Canceled */) {\n                return;\n            }\n            if (onRejected) {\n                return onRejected(error);\n            }\n            throw error;\n        });\n        task.canceler = function () {\n            // If task's parent (this) hasn't been resolved, cancel it; downward propagation will start at the first\n            // unresolved parent\n            if (_this._state === 1 /* Pending */) {\n                _this.cancel();\n            }\n            else {\n                task._cancel();\n            }\n        };\n        // Keep track of child Tasks for propogating cancelation back down the chain\n        this.children.push(task);\n        return task;\n    };\n    return Task;\n}(ExtensiblePromise_1.default));\nexports.default = Task;\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(15);\nvar has_1 = __webpack_require__(1);\n__export(__webpack_require__(1));\nexports.default = has_1.default;\nhas_1.add('object-assign', typeof global_1.default.Object.assign === 'function');\nhas_1.add('arraybuffer', typeof global_1.default.ArrayBuffer !== 'undefined');\nhas_1.add('formdata', typeof global_1.default.FormData !== 'undefined');\nhas_1.add('filereader', typeof global_1.default.FileReader !== 'undefined', true);\nhas_1.add('xhr', typeof global_1.default.XMLHttpRequest !== 'undefined');\nhas_1.add('xhr2', has_1.default('xhr') && 'responseType' in global_1.default.XMLHttpRequest.prototype);\nhas_1.add('blob', function () {\n    if (!has_1.default('xhr2')) {\n        return false;\n    }\n    var request = new global_1.default.XMLHttpRequest();\n    request.open('GET', 'http://www.google.com', true);\n    request.responseType = 'blob';\n    request.abort();\n    return request.responseType === 'blob';\n});\nhas_1.add('node-buffer', 'Buffer' in global_1.default && typeof global_1.default.Buffer === 'function');\nhas_1.add('fetch', 'fetch' in global_1.default && typeof global_1.default.fetch === 'function');\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns a v4 compliant UUID.\n *\n * @returns {string}\n */\nfunction uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\nexports.default = uuid;\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UrlSearchParams_1 = __webpack_require__(14);\nvar WeakMap_1 = __webpack_require__(11);\nvar path_1 = __webpack_require__(23);\nvar Router_1 = __webpack_require__(22);\n// Store parent relationships in a separate map, since it's the parent that adds entries to this map. Parents shouldn't\n// change the private state of their children.\nvar parentMap = new WeakMap_1.default();\nvar noop = function () {\n};\nfunction computeDefaultParams(parameters, searchParameters, fromPathname, searchParams) {\n    var params = {};\n    parameters.forEach(function (name, index) {\n        params[name] = fromPathname[index];\n    });\n    searchParameters.forEach(function (name) {\n        var value = searchParams.get(name);\n        if (value !== undefined) {\n            params[name] = value;\n        }\n    });\n    return params;\n}\nvar Route = (function () {\n    function Route(options) {\n        if (options === void 0) { options = {}; }\n        var exec = options.exec, fallback = options.fallback, guard = options.guard, index = options.index, computeParams = options.params, path = options.path, _a = options.trailingSlashMustMatch, trailingSlashMustMatch = _a === void 0 ? true : _a;\n        if (path && /#/.test(path)) {\n            throw new TypeError('Path must not contain \\'#\\'');\n        }\n        var deconstructedPath = path_1.deconstruct(path || '/');\n        var parameters = deconstructedPath.parameters, searchParameters = deconstructedPath.searchParameters;\n        if (computeParams) {\n            if (parameters.length === 0 && searchParameters.length === 0) {\n                throw new TypeError('Can\\'t specify params() if path doesn\\'t contain any');\n            }\n            this._computeParams = computeParams;\n        }\n        else {\n            this._computeParams = function (fromPathname, searchParams) {\n                return computeDefaultParams(parameters, searchParameters, fromPathname, searchParams);\n            };\n        }\n        this._exec = exec;\n        this._fallback = fallback;\n        this._guard = guard;\n        this._index = index;\n        this._path = deconstructedPath;\n        this._routes = [];\n        this._trailingSlashMustMatch = trailingSlashMustMatch;\n    }\n    Object.defineProperty(Route.prototype, \"parent\", {\n        get: function () {\n            return parentMap.get(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Route.prototype, \"path\", {\n        get: function () {\n            return this._path;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Route.prototype.append = function (add) {\n        var _this = this;\n        var append = function (route) {\n            if (Router_1.hasBeenAppended(route)) {\n                throw new Error('Cannot append route that has already been appended');\n            }\n            _this._routes.push(route);\n            parentMap.set(route, _this);\n        };\n        if (Array.isArray(add)) {\n            for (var _i = 0, add_1 = add; _i < add_1.length; _i++) {\n                var route = add_1[_i];\n                append(route);\n            }\n        }\n        else {\n            append(add);\n        }\n    };\n    Route.prototype.link = function (params) {\n        return Router_1.findRouter(this).link(this, params);\n    };\n    Route.prototype.match = function (segments, hasTrailingSlash, searchParams) {\n        var result = path_1.match(this._path, segments);\n        if (result === null) {\n            return null;\n        }\n        if (!result.hasRemaining && this._trailingSlashMustMatch && this._path.trailingSlash !== hasTrailingSlash) {\n            return null;\n        }\n        // Only extract the search params defined in the route's path.\n        var knownSearchParams = this._path.searchParameters.reduce(function (list, name) {\n            var value = searchParams.getAll(name);\n            if (value !== undefined) {\n                list[name] = value;\n            }\n            return list;\n        }, {});\n        var params = this._computeParams(result.values, new UrlSearchParams_1.default(knownSearchParams));\n        if (params === null) {\n            return null;\n        }\n        return {\n            hasRemaining: result.hasRemaining,\n            offset: result.offset,\n            params: params,\n            rawPathValues: result.values,\n            rawSearchParams: knownSearchParams\n        };\n    };\n    Route.prototype.select = function (context, segments, hasTrailingSlash, searchParams) {\n        var matchResult = this.match(segments, hasTrailingSlash, searchParams);\n        // Return early if possible.\n        if (!matchResult || matchResult.hasRemaining && this._routes.length === 0 && !this._fallback) {\n            return [];\n        }\n        var params = matchResult.params;\n        if (this._guard) {\n            var guardResult = this._guard({ context: context, params: params });\n            if (typeof guardResult === 'string') {\n                return guardResult;\n            }\n            if (!guardResult) {\n                return [];\n            }\n        }\n        var handler = this._exec;\n        var redirect;\n        var remainingSelection;\n        var selected = false;\n        if (matchResult.hasRemaining) {\n            // Match the remaining segments. Return a hierarchy if nested routes were selected.\n            var remainingSegments_1 = segments.slice(matchResult.offset);\n            selected = this._routes.some(function (nested) {\n                var nestedResult = nested.select(context, remainingSegments_1, hasTrailingSlash, searchParams);\n                if (typeof nestedResult === 'string') {\n                    redirect = nestedResult;\n                    return true;\n                }\n                if (nestedResult.length > 0) {\n                    remainingSelection = nestedResult;\n                    return true;\n                }\n                return false;\n            });\n            // No remaining segments matched, only select this route if a fallback handler was specified.\n            if (!selected && this._fallback) {\n                selected = true;\n                handler = this._fallback;\n            }\n        }\n        else {\n            selected = true;\n            if (this._index) {\n                handler = this._index;\n            }\n        }\n        if (!selected) {\n            return [];\n        }\n        if (redirect !== undefined) {\n            return redirect;\n        }\n        var rawPathValues = matchResult.rawPathValues, rawSearchParams = matchResult.rawSearchParams;\n        var selection = {\n            // Use a noop handler if exec was not provided. Something needs to be returned otherwise the router may\n            // think no routes were selected.\n            handler: handler || noop,\n            path: this.path,\n            params: params,\n            rawPathValues: rawPathValues,\n            rawSearchParams: rawSearchParams,\n            route: this\n        };\n        return remainingSelection ? [selection].concat(remainingSelection) : [selection];\n    };\n    return Route;\n}());\nexports.Route = Route;\nexports.default = Route;\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(15);\nvar on_1 = __webpack_require__(21);\nvar HistoryBase_1 = __webpack_require__(43);\nvar HashHistory = (function (_super) {\n    __extends(HashHistory, _super);\n    function HashHistory(_a) {\n        var window = (_a === void 0 ? { window: global_1.default } : _a).window;\n        var _this = _super.call(this, {}) || this;\n        var browserLocation = window.location;\n        _this._current = browserLocation.hash.slice(1);\n        _this._browserLocation = browserLocation;\n        _this.own(on_1.default(window, 'hashchange', function () {\n            var path = browserLocation.hash.slice(1);\n            // Ignore hashchange for the current path. Guards against browsers firing hashchange when the history\n            // manager sets the hash.\n            if (path !== _this._current) {\n                _this._current = path;\n                _this.emit({\n                    type: 'change',\n                    value: path\n                });\n            }\n        }));\n        return _this;\n    }\n    Object.defineProperty(HashHistory.prototype, \"current\", {\n        get: function () {\n            return this._current;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HashHistory.prototype.prefix = function (path) {\n        return \"#\" + path;\n    };\n    HashHistory.prototype.set = function (path) {\n        if (this._current === path) {\n            return;\n        }\n        this._current = path;\n        this._browserLocation.hash = this.prefix(path);\n        this.emit({\n            type: 'change',\n            value: path\n        });\n    };\n    HashHistory.prototype.replace = function (path) {\n        if (this._current === path) {\n            return;\n        }\n        this._current = path;\n        var _a = this._browserLocation, pathname = _a.pathname, search = _a.search;\n        this._browserLocation.replace(pathname + search + this.prefix(path));\n        this.emit({\n            type: 'change',\n            value: path\n        });\n    };\n    return HashHistory;\n}(HistoryBase_1.HistoryBase));\nexports.HashHistory = HashHistory;\nexports.default = HashHistory;\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Evented_1 = __webpack_require__(8);\nvar HistoryBase = (function (_super) {\n    __extends(HistoryBase, _super);\n    function HistoryBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return HistoryBase;\n}(Evented_1.Evented));\nexports.HistoryBase = HistoryBase;\nexports.default = HistoryBase;\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decorators_1 = __webpack_require__(12);\nvar global_1 = __webpack_require__(2);\nvar iterator_1 = __webpack_require__(6);\n__webpack_require__(0);\nvar Shim;\n(function (Shim) {\n    var Set = (function () {\n        function Set(iterable) {\n            var _this = this;\n            this._setData = [];\n            this[Symbol.toStringTag] = 'Set';\n            if (iterable) {\n                iterator_1.forOf(iterable, function (value) { return _this.add(value); });\n            }\n        }\n        ;\n        Set.prototype.add = function (value) {\n            if (this.has(value)) {\n                return this;\n            }\n            this._setData.push(value);\n            return this;\n        };\n        ;\n        Set.prototype.clear = function () {\n            this._setData.length = 0;\n        };\n        ;\n        Set.prototype.delete = function (value) {\n            var idx = this._setData.indexOf(value);\n            if (idx === -1) {\n                return false;\n            }\n            this._setData.splice(idx, 1);\n            return true;\n        };\n        ;\n        Set.prototype.entries = function () {\n            return new iterator_1.ShimIterator(this._setData.map(function (value) { return [value, value]; }));\n        };\n        ;\n        Set.prototype.forEach = function (callbackfn, thisArg) {\n            var iterator = this.values();\n            var result = iterator.next();\n            while (!result.done) {\n                callbackfn.call(thisArg, result.value, result.value, this);\n                result = iterator.next();\n            }\n        };\n        ;\n        Set.prototype.has = function (value) {\n            return this._setData.indexOf(value) > -1;\n        };\n        ;\n        Set.prototype.keys = function () {\n            return new iterator_1.ShimIterator(this._setData);\n        };\n        ;\n        Object.defineProperty(Set.prototype, \"size\", {\n            get: function () {\n                return this._setData.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ;\n        Set.prototype.values = function () {\n            return new iterator_1.ShimIterator(this._setData);\n        };\n        ;\n        Set.prototype[Symbol.iterator] = function () {\n            return new iterator_1.ShimIterator(this._setData);\n        };\n        ;\n        return Set;\n    }());\n    Shim.Set = Set;\n})(Shim = exports.Shim || (exports.Shim = {}));\nvar Set = (function () {\n    /* istanbul ignore next */\n    function Set(iterable) {\n        /* istanbul ignore next */\n        this[Symbol.toStringTag] = 'Set';\n    }\n    ;\n    /* istanbul ignore next */\n    Set.prototype.add = function (value) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.clear = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.delete = function (value) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.entries = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.forEach = function (callbackfn, thisArg) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.has = function (value) { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype.keys = function () { throw new Error('Abstract method'); };\n    ;\n    Object.defineProperty(Set.prototype, \"size\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error('Abstract method'); },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    /* istanbul ignore next */\n    Set.prototype.values = function () { throw new Error('Abstract method'); };\n    ;\n    /* istanbul ignore next */\n    Set.prototype[Symbol.iterator] = function () { throw new Error('Abstract method'); };\n    ;\n    return Set;\n}());\nSet = __decorate([\n    decorators_1.hasClass('es6-set', global_1.default.Set, Shim.Set)\n], Set);\nexports.default = Set;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(2);\n/**\n * The smallest interval between two representable numbers.\n */\nexports.EPSILON = 1;\n/**\n * The maximum safe integer in JavaScript\n */\nexports.MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n/**\n * The minimum safe integer in JavaScript\n */\nexports.MIN_SAFE_INTEGER = -exports.MAX_SAFE_INTEGER;\n/**\n * Determines whether the passed value is NaN without coersion.\n *\n * @param value The value to test\n * @return true if the value is NaN, false if it is not\n */\nfunction isNaN(value) {\n    return typeof value === 'number' && global_1.default.isNaN(value);\n}\nexports.isNaN = isNaN;\n/**\n * Determines whether the passed value is a finite number without coersion.\n *\n * @param value The value to test\n * @return true if the value is finite, false if it is not\n */\nfunction isFinite(value) {\n    return typeof value === 'number' && global_1.default.isFinite(value);\n}\nexports.isFinite = isFinite;\n/**\n * Determines whether the passed value is an integer.\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nfunction isInteger(value) {\n    return isFinite(value) && Math.floor(value) === value;\n}\nexports.isInteger = isInteger;\n/**\n * Determines whether the passed value is an integer that is 'safe,' meaning:\n *   1. it can be expressed as an IEEE-754 double precision number\n *   2. it has a one-to-one mapping to a mathematical integer, meaning its\n *      IEEE-754 representation cannot be the result of rounding any other\n *      integer to fit the IEEE-754 representation\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nfunction isSafeInteger(value) {\n    return isInteger(value) && Math.abs(value) <= exports.MAX_SAFE_INTEGER;\n}\nexports.isSafeInteger = isSafeInteger;\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(1);\nvar Symbol_1 = __webpack_require__(0);\nvar Shim;\n(function (Shim) {\n    function is(value1, value2) {\n        if (value1 === value2) {\n            return value1 !== 0 || 1 / value1 === 1 / value2; // -0\n        }\n        return value1 !== value1 && value2 !== value2; // NaN\n    }\n    Shim.is = is;\n    function getOwnPropertySymbols(o) {\n        return Object.getOwnPropertyNames(o).filter(function (key) { return Boolean(key.match(/^@@.+/)); })\n            .map(function (key) { return Symbol.for(key.substring(2)); });\n    }\n    Shim.getOwnPropertySymbols = getOwnPropertySymbols;\n    function getOwnPropertyNames(o) {\n        return Object.getOwnPropertyNames(o).filter(function (key) { return !Boolean(key.match(/^@@.+/)); });\n    }\n    Shim.getOwnPropertyNames = getOwnPropertyNames;\n    function symbolAwareKeys(o) {\n        return Object.keys(o).filter(function (key) { return !Boolean(key.match(/^@@.+/)); });\n    }\n    Shim.symbolAwareKeys = symbolAwareKeys;\n    function getOwnPropertyDescriptor(o, prop) {\n        if (Symbol_1.isSymbol(prop)) {\n            return Object.getOwnPropertyDescriptor(o, prop);\n        }\n        else {\n            return Object.getOwnPropertyDescriptor(o, prop);\n        }\n    }\n    Shim.getOwnPropertyDescriptor = getOwnPropertyDescriptor;\n    function values(o) {\n        return exports.keys(o).map(function (key) { return o[key]; });\n    }\n    Shim.values = values;\n    function entries(o) {\n        return exports.keys(o).map(function (key) { return [key, o[key]]; });\n    }\n    Shim.entries = entries;\n})(Shim || (Shim = {}));\n/**\n * Determines whether two values are the same value.\n *\n * @param value1 The first value to compare\n * @param value2 The second value to compare\n * @return true if the values are the same; false otherwise\n */\nexports.is = 'is' in Object\n    ? Object.is\n    : Shim.is;\n/**\n * Detect if there is native support for Symbol properties in Object\n */\nvar hasGetOwnPropertySymbols = has_1.default('es6-symbol') && 'getOwnPropertySymbols' in Object;\n/**\n * Returns an array of own properties who key is a symbol\n *\n * @param o The object to return the properties for\n */\nexports.getOwnPropertySymbols = hasGetOwnPropertySymbols\n    ? Object.getOwnPropertySymbols\n    : Shim.getOwnPropertySymbols;\n/**\n * Returns an array of own properties who key is a string\n *\n * @param o The object to return the properties for\n */\n/* intentionally detecting `getOwnPropertySymbols` because we should should provide the shim\n * when there is no support for symbols */\nexports.getOwnPropertyNames = hasGetOwnPropertySymbols\n    ? Object.getOwnPropertyNames\n    : Shim.getOwnPropertyNames;\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\n/* intentionally detecting `getOwnPropertySymbols` because we should should provide the shim\n * when there is no support for symbols */\nexports.keys = hasGetOwnPropertySymbols\n    ? Object.keys\n    : Shim.symbolAwareKeys;\n/**\n * Returns the values of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods.\n */\nexports.values = 'values' in Object\n    ? Object.values\n    : Shim.values;\n/**\n * Returns the keys and values of the enumerable properties and methods of an object. Each entry will be returned as an\n * array holding the [key, value].\n * @param o Object that contains the properties and methods.\n */\nexports.entries = 'entries' in Object\n    ? Object.entries\n    : Shim.entries;\nexports.getOwnPropertyDescriptor = hasGetOwnPropertySymbols\n    ? Object.getOwnPropertyDescriptor\n    : Shim.getOwnPropertyDescriptor;\nfunction getOwnPropertyDescriptorsWrapper(o) {\n    var descriptors = exports.getOwnPropertyNames(o).reduce(function (descriptors, key) {\n        descriptors[key] = exports.getOwnPropertyDescriptor(o, key);\n        return descriptors;\n    }, {});\n    exports.getOwnPropertySymbols(o).forEach(function (sym) {\n        descriptors[sym] = exports.getOwnPropertyDescriptor(o, sym);\n    });\n    return descriptors;\n}\n/* Return descriptors for enumerable and non enumerable properties on an object */\nexports.getOwnPropertyDescriptors = 'getOwnPropertyDescriptors' in Object\n    ? Object.getOwnPropertyDescriptors\n    : getOwnPropertyDescriptorsWrapper;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar has_1 = __webpack_require__(1);\nvar util_1 = __webpack_require__(18);\n/**\n * The minimum location of high surrogates\n */\nexports.HIGH_SURROGATE_MIN = 0xD800;\n/**\n * The maximum location of high surrogates\n */\nexports.HIGH_SURROGATE_MAX = 0xDBFF;\n/**\n * The minimum location of low surrogates\n */\nexports.LOW_SURROGATE_MIN = 0xDC00;\n/**\n * The maximum location of low surrogates\n */\nexports.LOW_SURROGATE_MAX = 0xDFFF;\nvar Shim;\n(function (Shim) {\n    /**\n     * Validates that text is defined, and normalizes position (based on the given default if the input is NaN).\n     * Used by startsWith, includes, and endsWith.\n     *\n     * @return Normalized position.\n     */\n    function normalizeSubstringArgs(name, text, search, position, isEnd) {\n        if (isEnd === void 0) { isEnd = false; }\n        if (text == null) {\n            throw new TypeError('string.' + name + ' requires a valid string to search against.');\n        }\n        var length = text.length;\n        position = position !== position ? (isEnd ? length : 0) : position;\n        return [text, String(search), Math.min(Math.max(position, 0), length)];\n    }\n    function raw(callSite) {\n        var substitutions = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            substitutions[_i - 1] = arguments[_i];\n        }\n        var rawStrings = callSite.raw;\n        var result = '';\n        var numSubstitutions = substitutions.length;\n        if (callSite == null || callSite.raw == null) {\n            throw new TypeError('string.raw requires a valid callSite object with a raw value');\n        }\n        for (var i = 0, length_1 = rawStrings.length; i < length_1; i++) {\n            result += rawStrings[i] + (i < numSubstitutions && i < length_1 - 1 ? substitutions[i] : '');\n        }\n        return result;\n    }\n    Shim.raw = raw;\n    function fromCodePoint() {\n        var codePoints = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            codePoints[_i] = arguments[_i];\n        }\n        // Adapted from https://github.com/mathiasbynens/String.fromCodePoint\n        var length = arguments.length;\n        if (!length) {\n            return '';\n        }\n        var fromCharCode = String.fromCharCode;\n        var MAX_SIZE = 0x4000;\n        var codeUnits = [];\n        var index = -1;\n        var result = '';\n        while (++index < length) {\n            var codePoint = Number(arguments[index]);\n            // Code points must be finite integers within the valid range\n            var isValid = isFinite(codePoint) && Math.floor(codePoint) === codePoint &&\n                codePoint >= 0 && codePoint <= 0x10FFFF;\n            if (!isValid) {\n                throw RangeError('string.fromCodePoint: Invalid code point ' + codePoint);\n            }\n            if (codePoint <= 0xFFFF) {\n                // BMP code point\n                codeUnits.push(codePoint);\n            }\n            else {\n                // Astral code point; split in surrogate halves\n                // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                codePoint -= 0x10000;\n                var highSurrogate = (codePoint >> 10) + exports.HIGH_SURROGATE_MIN;\n                var lowSurrogate = (codePoint % 0x400) + exports.LOW_SURROGATE_MIN;\n                codeUnits.push(highSurrogate, lowSurrogate);\n            }\n            if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n                result += fromCharCode.apply(null, codeUnits);\n                codeUnits.length = 0;\n            }\n        }\n        return result;\n    }\n    Shim.fromCodePoint = fromCodePoint;\n    function codePointAt(text, position) {\n        if (position === void 0) { position = 0; }\n        // Adapted from https://github.com/mathiasbynens/String.prototype.codePointAt\n        if (text == null) {\n            throw new TypeError('string.codePointAt requries a valid string.');\n        }\n        var length = text.length;\n        if (position !== position) {\n            position = 0;\n        }\n        if (position < 0 || position >= length) {\n            return undefined;\n        }\n        // Get the first code unit\n        var first = text.charCodeAt(position);\n        if (first >= exports.HIGH_SURROGATE_MIN && first <= exports.HIGH_SURROGATE_MAX && length > position + 1) {\n            // Start of a surrogate pair (high surrogate and there is a next code unit); check for low surrogate\n            // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            var second = text.charCodeAt(position + 1);\n            if (second >= exports.LOW_SURROGATE_MIN && second <= exports.LOW_SURROGATE_MAX) {\n                return (first - exports.HIGH_SURROGATE_MIN) * 0x400 + second - exports.LOW_SURROGATE_MIN + 0x10000;\n            }\n        }\n        return first;\n    }\n    Shim.codePointAt = codePointAt;\n    /* TODO: Missing normalize */\n    function repeat(text, count) {\n        if (count === void 0) { count = 0; }\n        // Adapted from https://github.com/mathiasbynens/String.prototype.repeat\n        if (text == null) {\n            throw new TypeError('string.repeat requires a valid string.');\n        }\n        if (count !== count) {\n            count = 0;\n        }\n        if (count < 0 || count === Infinity) {\n            throw new RangeError('string.repeat requires a non-negative finite count.');\n        }\n        var result = '';\n        while (count) {\n            if (count % 2) {\n                result += text;\n            }\n            if (count > 1) {\n                text += text;\n            }\n            count >>= 1;\n        }\n        return result;\n    }\n    Shim.repeat = repeat;\n    function startsWith(text, search, position) {\n        if (position === void 0) { position = 0; }\n        search = String(search);\n        _a = normalizeSubstringArgs('startsWith', text, search, position), text = _a[0], search = _a[1], position = _a[2];\n        var end = position + search.length;\n        if (end > text.length) {\n            return false;\n        }\n        return text.slice(position, end) === search;\n        var _a;\n    }\n    Shim.startsWith = startsWith;\n    function endsWith(text, search, endPosition) {\n        if (endPosition == null) {\n            endPosition = text.length;\n        }\n        _a = normalizeSubstringArgs('endsWith', text, search, endPosition, true), text = _a[0], search = _a[1], endPosition = _a[2];\n        var start = endPosition - search.length;\n        if (start < 0) {\n            return false;\n        }\n        return text.slice(start, endPosition) === search;\n        var _a;\n    }\n    Shim.endsWith = endsWith;\n    function includes(text, search, position) {\n        if (position === void 0) { position = 0; }\n        _a = normalizeSubstringArgs('includes', text, search, position), text = _a[0], search = _a[1], position = _a[2];\n        return text.indexOf(search, position) !== -1;\n        var _a;\n    }\n    Shim.includes = includes;\n    function padEnd(text, maxLength, fillString) {\n        if (fillString === void 0) { fillString = ' '; }\n        if (text === null || text === undefined) {\n            throw new TypeError('string.repeat requires a valid string.');\n        }\n        if (maxLength === Infinity) {\n            throw new RangeError('string.padEnd requires a non-negative finite count.');\n        }\n        if (maxLength === null || maxLength === undefined || maxLength < 0) {\n            maxLength = 0;\n        }\n        var strText = String(text);\n        var padding = maxLength - strText.length;\n        if (padding > 0) {\n            strText += repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length);\n        }\n        return strText;\n    }\n    Shim.padEnd = padEnd;\n    function padStart(text, maxLength, fillString) {\n        if (fillString === void 0) { fillString = ' '; }\n        if (text === null || text === undefined) {\n            throw new TypeError('string.repeat requires a valid string.');\n        }\n        if (maxLength === Infinity) {\n            throw new RangeError('string.padStart requires a non-negative finite count.');\n        }\n        if (maxLength === null || maxLength === undefined || maxLength < 0) {\n            maxLength = 0;\n        }\n        var strText = String(text);\n        var padding = maxLength - strText.length;\n        if (padding > 0) {\n            strText = repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length) + strText;\n        }\n        return strText;\n    }\n    Shim.padStart = padStart;\n    /* TODO: Provide an iterator for a string to mimic [Symbol.iterator]? */\n})(Shim = exports.Shim || (exports.Shim = {}));\n/**\n * A tag function for template strings to get the template string's raw string form.\n *\n * @param callSite Call site object (or a template string in TypeScript, which will transpile to one)\n * @param substitutions Values to substitute within the template string (TypeScript will generate these automatically)\n * @return String containing the raw template string with variables substituted\n *\n * @example\n * // Within TypeScript; logs 'The answer is:\\\\n42'\n * let answer = 42;\n * console.log(string.raw`The answer is:\\n${answer}`);\n *\n * @example\n * // The same example as above, but directly specifying a JavaScript object and substitution\n * console.log(string.raw({ raw: [ 'The answer is:\\\\n', '' ] }, 42));\n */\nexports.raw = has_1.default('es6-string-raw')\n    ? String.raw\n    : Shim.raw;\n/**\n * Returns the UTF-16 encoded code point value of a given position in a string.\n *\n * @param text The string containing the element whose code point is to be determined\n * @param position Position of an element within the string to retrieve the code point value from\n * @return A non-negative integer representing the UTF-16 encoded code point value\n */\nexports.fromCodePoint = has_1.default('es6-string-fromcodepoint')\n    ? String.fromCodePoint\n    : Shim.fromCodePoint;\n/**\n * Returns the UTF-16 encoded code point value of a given position in a string.\n *\n * @param text The string containing the element whose code point is to be determined\n * @param position Position of an element within the string to retrieve the code point value from\n * @return A non-negative integer representing the UTF-16 encoded code point value\n */\nexports.codePointAt = has_1.default('es6-string-codepointat')\n    ? util_1.wrapNative(String.prototype.codePointAt)\n    : Shim.codePointAt;\n/**\n * Returns a string containing the given string repeated the specified number of times.\n *\n * @param text The string to repeat\n * @param count The number of times to repeat the string\n * @return A string containing the input string repeated count times\n */\nexports.repeat = has_1.default('es6-string-repeat')\n    ? util_1.wrapNative(String.prototype.repeat)\n    : Shim.repeat;\n/**\n * Determines whether a string begins with the given substring (optionally starting from a given index).\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param position The index to begin searching at\n * @return Boolean indicating if the search string was found at the beginning of the given string\n */\nexports.startsWith = has_1.default('es6-string-startswith')\n    ? util_1.wrapNative(String.prototype.startsWith)\n    : Shim.startsWith;\n/**\n * Determines whether a string ends with the given substring.\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param endPosition The index searching should stop before (defaults to text.length)\n * @return Boolean indicating if the search string was found at the end of the given string\n */\nexports.endsWith = has_1.default('es6-string-endswith')\n    ? util_1.wrapNative(String.prototype.endsWith)\n    : Shim.endsWith;\n/**\n * Determines whether a string includes the given substring (optionally starting from a given index).\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param position The index to begin searching at\n * @return Boolean indicating if the search string was found within the given string\n */\nexports.includes = has_1.default('es6-string-includes')\n    ? util_1.wrapNative(String.prototype.includes)\n    : Shim.includes;\n/**\n * Pads the beginning of a string with a fill string until the string is a certain length.\n *\n * @param text          The string to pad\n * @param maxLength     The desired length of the string\n * @param fillString    The string to be repeated (fully or partially) until text is the maximum length\n *\n * @return A string that is at least the maximum length specified, padded in the front if necessary.\n */\nexports.padStart = has_1.default('es6-string-padstart')\n    ? util_1.wrapNative(String.prototype.padStart)\n    : Shim.padStart;\n/**\n * Pads the end of a string with a fill string until the string is a certain length.\n *\n * @param text          The string to pad\n * @param maxLength     The desired length of the string\n * @param fillString    The string to be repeated (fully or partially) until text is the maximum length\n *\n * @return A string that is at least the maximum length specified, padded at the end if necessary.\n */\nexports.padEnd = has_1.default('es6-string-padend')\n    ? util_1.wrapNative(String.prototype.padEnd)\n    : Shim.padEnd;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(setImmediate) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(2);\nvar has_1 = __webpack_require__(1);\nfunction executeTask(item) {\n    if (item && item.isActive && item.callback) {\n        item.callback();\n    }\n}\nfunction getQueueHandle(item, destructor) {\n    return {\n        destroy: function () {\n            this.destroy = function () { };\n            item.isActive = false;\n            item.callback = null;\n            if (destructor) {\n                destructor();\n            }\n        }\n    };\n}\nvar checkMicroTaskQueue;\nvar microTasks;\n/**\n * Schedules a callback to the macrotask queue.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexports.queueTask = (function () {\n    var destructor;\n    var enqueue;\n    // Since the IE implementation of `setImmediate` is not flawless, we will test for `postMessage` first.\n    if (has_1.default('postmessage')) {\n        var queue_1 = [];\n        global_1.default.addEventListener('message', function (event) {\n            // Confirm that the event was triggered by the current window and by this particular implementation.\n            if (event.source === global_1.default && event.data === 'dojo-queue-message') {\n                event.stopPropagation();\n                if (queue_1.length) {\n                    executeTask(queue_1.shift());\n                }\n            }\n        });\n        enqueue = function (item) {\n            queue_1.push(item);\n            global_1.default.postMessage('dojo-queue-message', '*');\n        };\n    }\n    else if (has_1.default('setimmediate')) {\n        destructor = global_1.default.clearImmediate;\n        enqueue = function (item) {\n            return setImmediate(executeTask.bind(null, item));\n        };\n    }\n    else {\n        destructor = global_1.default.clearTimeout;\n        enqueue = function (item) {\n            return setTimeout(executeTask.bind(null, item), 0);\n        };\n    }\n    function queueTask(callback) {\n        var item = {\n            isActive: true,\n            callback: callback\n        };\n        var id = enqueue(item);\n        return getQueueHandle(item, destructor && function () {\n            destructor(id);\n        });\n    }\n    ;\n    // TODO: Use aspect.before when it is available.\n    return has_1.default('microtasks') ? queueTask : function (callback) {\n        checkMicroTaskQueue();\n        return queueTask(callback);\n    };\n})();\n// When no mechanism for registering microtasks is exposed by the environment, microtasks will\n// be queued and then executed in a single macrotask before the other macrotasks are executed.\nif (!has_1.default('microtasks')) {\n    var isMicroTaskQueued_1 = false;\n    microTasks = [];\n    checkMicroTaskQueue = function () {\n        if (!isMicroTaskQueued_1) {\n            isMicroTaskQueued_1 = true;\n            exports.queueTask(function () {\n                isMicroTaskQueued_1 = false;\n                if (microTasks.length) {\n                    var item = void 0;\n                    while (item = microTasks.shift()) {\n                        executeTask(item);\n                    }\n                }\n            });\n        }\n    };\n}\n/**\n * Schedules an animation task with `window.requestAnimationFrame` if it exists, or with `queueTask` otherwise.\n *\n * Since requestAnimationFrame's behavior does not match that expected from `queueTask`, it is not used there.\n * However, at times it makes more sense to delegate to requestAnimationFrame; hence the following method.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexports.queueAnimationTask = (function () {\n    if (!has_1.default('raf')) {\n        return exports.queueTask;\n    }\n    function queueAnimationTask(callback) {\n        var item = {\n            isActive: true,\n            callback: callback\n        };\n        var rafId = requestAnimationFrame(executeTask.bind(null, item));\n        return getQueueHandle(item, function () {\n            cancelAnimationFrame(rafId);\n        });\n    }\n    // TODO: Use aspect.before when it is available.\n    return has_1.default('microtasks') ? queueAnimationTask : function (callback) {\n        checkMicroTaskQueue();\n        return queueAnimationTask(callback);\n    };\n})();\n/**\n * Schedules a callback to the microtask queue.\n *\n * Any callbacks registered with `queueMicroTask` will be executed before the next macrotask. If no native\n * mechanism for scheduling macrotasks is exposed, then any callbacks will be fired before any macrotask\n * registered with `queueTask` or `queueAnimationTask`.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexports.queueMicroTask = (function () {\n    var enqueue;\n    if (has_1.default('host-node')) {\n        enqueue = function (item) {\n            global_1.default.process.nextTick(executeTask.bind(null, item));\n        };\n    }\n    else if (has_1.default('es6-promise')) {\n        enqueue = function (item) {\n            global_1.default.Promise.resolve(item).then(executeTask);\n        };\n    }\n    else if (has_1.default('dom-mutationobserver')) {\n        /* tslint:disable-next-line:variable-name */\n        var HostMutationObserver = global_1.default.MutationObserver || global_1.default.WebKitMutationObserver;\n        var node_1 = document.createElement('div');\n        var queue_2 = [];\n        var observer = new HostMutationObserver(function () {\n            while (queue_2.length > 0) {\n                var item = queue_2.shift();\n                if (item && item.isActive && item.callback) {\n                    item.callback();\n                }\n            }\n        });\n        observer.observe(node_1, { attributes: true });\n        enqueue = function (item) {\n            queue_2.push(item);\n            node_1.setAttribute('queueStatus', '1');\n        };\n    }\n    else {\n        enqueue = function (item) {\n            checkMicroTaskQueue();\n            microTasks.push(item);\n        };\n    }\n    return function (callback) {\n        var item = {\n            isActive: true,\n            callback: callback\n        };\n        enqueue(item);\n        return getQueueHandle(item);\n    };\n})();\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(53).setImmediate))\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Evented_1 = __webpack_require__(8);\nvar RegistryHandler = (function (_super) {\n    __extends(RegistryHandler, _super);\n    function RegistryHandler() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._registries = [];\n        return _this;\n    }\n    RegistryHandler.prototype.add = function (registry) {\n        this._registries.unshift({ registry: registry });\n    };\n    RegistryHandler.prototype.remove = function (registry) {\n        var _this = this;\n        return this._registries.some(function (registryWrapper, i) {\n            if (registryWrapper.registry === registry) {\n                registry.destroy();\n                _this._registries.splice(i, 1);\n                return true;\n            }\n            return false;\n        });\n    };\n    RegistryHandler.prototype.replace = function (original, replacement) {\n        return this._registries.some(function (registryWrapper, i) {\n            if (registryWrapper.registry === original) {\n                original.destroy();\n                registryWrapper.registry = replacement;\n                return true;\n            }\n            return false;\n        });\n    };\n    RegistryHandler.prototype.has = function (widgetLabel) {\n        return this._registries.some(function (registryWrapper) {\n            return registryWrapper.registry.has(widgetLabel);\n        });\n    };\n    RegistryHandler.prototype.get = function (widgetLabel) {\n        var _this = this;\n        var _loop_1 = function (i) {\n            var registryWrapper = this_1._registries[i];\n            var item = registryWrapper.registry.get(widgetLabel);\n            if (item) {\n                return { value: item };\n            }\n            else if (!registryWrapper.handle) {\n                registryWrapper.handle = registryWrapper.registry.on(\"loaded:\" + widgetLabel, function () {\n                    _this.emit({ type: 'invalidate' });\n                    registryWrapper.handle.destroy();\n                    registryWrapper.handle = undefined;\n                });\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < this._registries.length; i++) {\n            var state_1 = _loop_1(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return null;\n    };\n    return RegistryHandler;\n}(Evented_1.Evented));\nexports.default = RegistryHandler;\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browserSpecificTransitionEndEventName = '';\nvar browserSpecificAnimationEndEventName = '';\nfunction determineBrowserStyleNames(element) {\n    if ('WebkitTransition' in element.style) {\n        browserSpecificTransitionEndEventName = 'webkitTransitionEnd';\n        browserSpecificAnimationEndEventName = 'webkitAnimationEnd';\n    }\n    else if (('transition' in element.style) || ('MozTransition' in element.style)) {\n        browserSpecificTransitionEndEventName = 'transitionend';\n        browserSpecificAnimationEndEventName = 'animationend';\n    }\n    else {\n        throw new Error('Your browser is not supported');\n    }\n}\nfunction initialize(element) {\n    if (browserSpecificAnimationEndEventName === '') {\n        determineBrowserStyleNames(element);\n    }\n}\nfunction runAndCleanUp(element, startAnimation, finishAnimation) {\n    initialize(element);\n    var finished = false;\n    var transitionEnd = function () {\n        if (!finished) {\n            finished = true;\n            element.removeEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n            element.removeEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n            finishAnimation();\n        }\n    };\n    startAnimation();\n    element.addEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n    element.addEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n}\nfunction exit(node, properties, exitAnimation, removeNode) {\n    var activeClass = properties.exitAnimationActive || exitAnimation + \"-active\";\n    runAndCleanUp(node, function () {\n        node.classList.add(exitAnimation);\n        requestAnimationFrame(function () {\n            node.classList.add(activeClass);\n        });\n    }, function () {\n        removeNode();\n    });\n}\nfunction enter(node, properties, enterAnimation) {\n    var activeClass = properties.enterAnimationActive || enterAnimation + \"-active\";\n    runAndCleanUp(node, function () {\n        node.classList.add(enterAnimation);\n        requestAnimationFrame(function () {\n            node.classList.add(activeClass);\n        });\n    }, function () {\n        node.classList.remove(enterAnimation);\n        node.classList.remove(activeClass);\n    });\n}\nexports.default = {\n    enter: enter,\n    exit: exit\n};\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObjectOrArray(value) {\n    return Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\nfunction always(previousProperty, newProperty) {\n    return {\n        changed: true,\n        value: newProperty\n    };\n}\nfunction ignore(previousProperty, newProperty) {\n    return {\n        changed: false,\n        value: newProperty\n    };\n}\nfunction custom(previousProperty, newProperty, meta) {\n    var diffFunction = meta.diffFunction, scope = meta.scope;\n    if (!diffFunction) {\n        return {\n            changed: false,\n            value: newProperty\n        };\n    }\n    return diffFunction.call(scope, previousProperty, newProperty);\n}\nfunction reference(previousProperty, newProperty) {\n    return {\n        changed: previousProperty !== newProperty,\n        value: newProperty\n    };\n}\nfunction shallow(previousProperty, newProperty) {\n    var changed = false;\n    var validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n    var validNewProperty = newProperty && isObjectOrArray(newProperty);\n    if (!validOldProperty || !validNewProperty) {\n        return {\n            changed: true,\n            value: newProperty\n        };\n    }\n    var previousKeys = Object.keys(previousProperty);\n    var newKeys = Object.keys(newProperty);\n    if (previousKeys.length !== newKeys.length) {\n        changed = true;\n    }\n    else {\n        changed = newKeys.some(function (key) {\n            return newProperty[key] !== previousProperty[key];\n        });\n    }\n    return {\n        changed: changed,\n        value: newProperty\n    };\n}\nfunction diff(propertyName, diffDiffType, previousProperty, newProperty, meta) {\n    var result;\n    switch (diffDiffType) {\n        case 1 /* CUSTOM */:\n            result = custom(previousProperty, newProperty, meta);\n            break;\n        case 2 /* ALWAYS */:\n            result = always(previousProperty, newProperty);\n            break;\n        case 3 /* IGNORE */:\n            result = ignore(previousProperty, newProperty);\n            break;\n        case 4 /* REFERENCE */:\n            result = reference(previousProperty, newProperty);\n            break;\n        case 5 /* SHALLOW */:\n            result = shallow(previousProperty, newProperty);\n            break;\n        case 6 /* AUTO */:\n            if (typeof newProperty === 'function') {\n                result = ignore(previousProperty, newProperty);\n            }\n            else if (isObjectOrArray(newProperty)) {\n                result = shallow(previousProperty, newProperty);\n            }\n            else {\n                result = reference(previousProperty, newProperty);\n            }\n            break;\n        default:\n            console.warn(\"no valid DiffType provided, will mark property '\" + propertyName + \"' as changed\");\n            result = always(previousProperty, newProperty);\n    }\n    return result;\n}\nexports.default = diff;\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar global_1 = __webpack_require__(15);\nvar maquette_1 = __webpack_require__(19);\n__webpack_require__(33);\nvar cssTransitions_1 = __webpack_require__(50);\n/**\n * Represents the attach state of the projector\n */\nvar ProjectorAttachState;\n(function (ProjectorAttachState) {\n    ProjectorAttachState[ProjectorAttachState[\"Attached\"] = 1] = \"Attached\";\n    ProjectorAttachState[ProjectorAttachState[\"Detached\"] = 2] = \"Detached\";\n})(ProjectorAttachState = exports.ProjectorAttachState || (exports.ProjectorAttachState = {}));\n/**\n * Attach type for the projector\n */\nvar AttachType;\n(function (AttachType) {\n    AttachType[AttachType[\"Append\"] = 1] = \"Append\";\n    AttachType[AttachType[\"Merge\"] = 2] = \"Merge\";\n    AttachType[AttachType[\"Replace\"] = 3] = \"Replace\";\n})(AttachType = exports.AttachType || (exports.AttachType = {}));\nvar eventHandlers = [\n    'ontouchcancel',\n    'ontouchend',\n    'ontouchmove',\n    'ontouchstart',\n    'onblur',\n    'onchange',\n    'onclick',\n    'ondblclick',\n    'onfocus',\n    'oninput',\n    'onkeydown',\n    'onkeypress',\n    'onkeyup',\n    'onload',\n    'onmousedown',\n    'onmouseenter',\n    'onmouseleave',\n    'onmousemove',\n    'onmouseout',\n    'onmouseover',\n    'onmouseup',\n    'onmousewheel',\n    'onscroll',\n    'onsubmit'\n];\nfunction ProjectorMixin(base) {\n    return (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var _this = _super.apply(this, args) || this;\n            _this._projectionOptions = {\n                transitions: cssTransitions_1.default,\n                eventHandlerInterceptor: _this.eventHandlerInterceptor.bind(_this)\n            };\n            _this._boundDoRender = _this.doRender.bind(_this);\n            _this._boundRender = _this.__render__.bind(_this);\n            _this.own(_this.on('widget:children', _this.invalidate));\n            _this.own(_this.on('properties:changed', _this.invalidate));\n            _this.own(_this.on('invalidated', _this.scheduleRender));\n            _this.root = document.body;\n            _this.projectorState = ProjectorAttachState.Detached;\n            return _this;\n        }\n        class_1.prototype.append = function (root) {\n            var options = {\n                type: AttachType.Append,\n                root: root\n            };\n            return this.attach(options);\n        };\n        class_1.prototype.merge = function (root) {\n            var options = {\n                type: AttachType.Merge,\n                root: root\n            };\n            return this.attach(options);\n        };\n        class_1.prototype.replace = function (root) {\n            var options = {\n                type: AttachType.Replace,\n                root: root\n            };\n            return this.attach(options);\n        };\n        class_1.prototype.pause = function () {\n            if (this._scheduled) {\n                global_1.default.cancelAnimationFrame(this._scheduled);\n                this._scheduled = undefined;\n            }\n            this._paused = true;\n        };\n        class_1.prototype.resume = function () {\n            this._paused = false;\n            this.scheduleRender();\n        };\n        class_1.prototype.scheduleRender = function () {\n            if (this.projectorState === ProjectorAttachState.Attached && !this._scheduled && !this._paused) {\n                this._scheduled = global_1.default.requestAnimationFrame(this._boundDoRender);\n            }\n        };\n        Object.defineProperty(class_1.prototype, \"root\", {\n            get: function () {\n                return this._root;\n            },\n            set: function (root) {\n                if (this.projectorState === ProjectorAttachState.Attached) {\n                    throw new Error('Projector already attached, cannot change root element');\n                }\n                this._root = root;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        class_1.prototype.setChildren = function (children) {\n            _super.prototype.__setChildren__.call(this, children);\n        };\n        class_1.prototype.setProperties = function (properties) {\n            _super.prototype.__setProperties__.call(this, properties);\n        };\n        class_1.prototype.__render__ = function () {\n            var result = _super.prototype.__render__.call(this);\n            if (typeof result === 'string' || result === null) {\n                throw new Error('Must provide a VNode at the root of a projector');\n            }\n            return result;\n        };\n        class_1.prototype.eventHandlerInterceptor = function (propertyName, eventHandler, domNode, properties) {\n            var _this = this;\n            if (eventHandlers.indexOf(propertyName) > -1) {\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    return eventHandler.apply(properties.bind || this, args);\n                };\n            }\n            else {\n                // remove \"on\" from event name\n                var eventName = propertyName.substr(2);\n                domNode.addEventListener(eventName, function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    eventHandler.apply(properties.bind || _this, args);\n                });\n            }\n        };\n        class_1.prototype.doRender = function () {\n            this._scheduled = undefined;\n            if (this._projection) {\n                this._projection.update(this._boundRender());\n            }\n        };\n        class_1.prototype.attach = function (_a) {\n            var _this = this;\n            var type = _a.type, root = _a.root;\n            if (root) {\n                this.root = root;\n            }\n            if (this.projectorState === ProjectorAttachState.Attached) {\n                return this._attachHandle;\n            }\n            this.projectorState = ProjectorAttachState.Attached;\n            this._attachHandle = this.own({\n                destroy: function () {\n                    if (_this.projectorState === ProjectorAttachState.Attached) {\n                        _this.pause();\n                        _this._projection = undefined;\n                        _this.projectorState = ProjectorAttachState.Detached;\n                    }\n                    _this._attachHandle = { destroy: function () { } };\n                }\n            });\n            switch (type) {\n                case AttachType.Append:\n                    this._projection = maquette_1.dom.append(this.root, this._boundRender(), this._projectionOptions);\n                    break;\n                case AttachType.Merge:\n                    this._projection = maquette_1.dom.merge(this.root, this._boundRender(), this._projectionOptions);\n                    break;\n                case AttachType.Replace:\n                    this._projection = maquette_1.dom.replace(this.root, this._boundRender(), this._projectionOptions);\n                    break;\n            }\n            return this._attachHandle;\n        };\n        return class_1;\n    }(base));\n}\nexports.ProjectorMixin = ProjectorMixin;\nexports.default = ProjectorMixin;\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(34);\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Router_1 = __webpack_require__(22);\nvar HashHistory_1 = __webpack_require__(42);\nvar router = new Router_1.default({ history: new HashHistory_1.default() });\nexports.default = router;\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Map_1 = __webpack_require__(9);\nvar uuid_1 = __webpack_require__(40);\nvar lang_1 = __webpack_require__(5);\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar d_2 = __webpack_require__(3);\nvar TodoHeader_1 = __webpack_require__(58);\nvar TodoList_1 = __webpack_require__(60);\nvar TodoItem_1 = __webpack_require__(59);\nvar TodoFooter_1 = __webpack_require__(57);\nvar TodoFilter_1 = __webpack_require__(56);\nvar css = __webpack_require__(27);\nd_2.registry.define('todo-header', TodoHeader_1.default);\nd_2.registry.define('todo-list', TodoList_1.default);\nd_2.registry.define('todo-item', TodoItem_1.default);\nd_2.registry.define('todo-footer', TodoFooter_1.default);\nd_2.registry.define('todo-filter', TodoFilter_1.default);\nexports.TodoAppBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nvar TodoApp = (function (_super) {\n    __extends(TodoApp, _super);\n    function TodoApp() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.todos = new Map_1.default();\n        _this.todoItem = '';\n        _this.completedCount = 0;\n        _this.updated = uuid_1.default();\n        return _this;\n    }\n    TodoApp.prototype.render = function () {\n        var _a = this, todoItem = _a.todoItem, updateTodo = _a.updateTodo, updated = _a.updated, todos = _a.todos, completedCount = _a.completedCount, clearCompleted = _a.clearCompleted, editTodo = _a.editTodo, removeTodo = _a.removeTodo, toggleTodo = _a.toggleTodo, toggleAllTodos = _a.toggleAllTodos;\n        var activeFilter = this.properties.filter || 'all';\n        var allCompleted = todos.size !== 0 && completedCount === todos.size;\n        var activeCount = todos.size - completedCount;\n        var completedItems = completedCount > 0;\n        return d_1.v('section', { classes: this.classes(css.todoapp) }, [\n            d_1.w('todo-header', { value: todoItem, updateTodo: updateTodo, allCompleted: allCompleted, addTodo: this.setTodo, toggleAllTodos: toggleAllTodos }),\n            d_1.v('section', {}, [\n                d_1.w('todo-list', { updated: updated, activeFilter: activeFilter, todos: todos, editTodo: editTodo, removeTodo: removeTodo, toggleTodo: toggleTodo, updateTodo: this.setTodo })\n            ]),\n            todos.size ? d_1.w('todo-footer', { activeFilter: activeFilter, clearCompleted: clearCompleted, activeCount: activeCount, completedItems: completedItems }) : null\n        ]);\n    };\n    TodoApp.prototype.removeTodo = function (id) {\n        var todo = this.todos.get(id);\n        if (todo) {\n            this.todos.delete(id);\n            todo.completed && --this.completedCount;\n            this.onUpdate();\n        }\n    };\n    TodoApp.prototype.toggleTodo = function (id) {\n        var todo = this.todos.get(id);\n        if (todo) {\n            var completed = !todo.completed;\n            completed ? ++this.completedCount : --this.completedCount;\n            this.setTodo({ completed: completed }, id);\n        }\n    };\n    TodoApp.prototype.toggleAllTodos = function () {\n        var _this = this;\n        var completed = this.completedCount !== this.todos.size;\n        this.todos.forEach(function (todo, key) {\n            _this.setTodo({ completed: completed }, key);\n        });\n        this.completedCount = completed ? this.todos.size : 0;\n        this.onUpdate();\n    };\n    TodoApp.prototype.editTodo = function (id) {\n        var todo = this.todos.get(id);\n        if (todo) {\n            this.setTodo({ editing: true }, id);\n            this.onUpdate();\n        }\n    };\n    TodoApp.prototype.clearCompleted = function () {\n        var _this = this;\n        this.todos.forEach(function (todo, key) {\n            if (todo.completed) {\n                _this.todos.delete(key);\n            }\n        });\n        this.completedCount = 0;\n        this.onUpdate();\n    };\n    TodoApp.prototype.updateTodo = function (todo) {\n        this.todoItem = todo;\n        this.invalidate();\n    };\n    TodoApp.prototype.setTodo = function (todo, id) {\n        if (!id) {\n            id = uuid_1.default();\n            this.todoItem = '';\n        }\n        if (todo.label) {\n            todo.label = todo.label.trim();\n            if (!todo.label) {\n                this.removeTodo(id);\n                return;\n            }\n        }\n        this.todos.set(id, lang_1.assign({ id: id }, this.todos.get(id) || {}, todo));\n        this.onUpdate();\n    };\n    TodoApp.prototype.onUpdate = function () {\n        this.updated = uuid_1.default();\n        this.invalidate();\n    };\n    return TodoApp;\n}(exports.TodoAppBase));\nTodoApp = __decorate([\n    Themeable_1.theme(css)\n], TodoApp);\nexports.default = TodoApp;\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar css = __webpack_require__(28);\nexports.TodoFilterBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nvar TodoFilter = (function (_super) {\n    __extends(TodoFilter, _super);\n    function TodoFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TodoFilter.prototype.render = function () {\n        var activeFilter = this.properties.activeFilter;\n        return d_1.v('ul', { classes: this.classes(css.filters) }, [\n            d_1.v('li', [\n                d_1.v('a', { href: '#all', innerHTML: 'all', classes: this.classes(activeFilter === 'all' ? css.selected : null) }),\n                d_1.v('a', { href: '#active', innerHTML: 'active', classes: this.classes(activeFilter === 'active' ? css.selected : null) }),\n                d_1.v('a', { href: '#completed', innerHTML: 'completed', classes: this.classes(activeFilter === 'completed' ? css.selected : null) })\n            ])\n        ]);\n    };\n    return TodoFilter;\n}(exports.TodoFilterBase));\nTodoFilter = __decorate([\n    Themeable_1.theme(css)\n], TodoFilter);\nexports.default = TodoFilter;\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar css = __webpack_require__(29);\nexports.TodoHeaderBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nvar TodoFooter = (function (_super) {\n    __extends(TodoFooter, _super);\n    function TodoFooter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TodoFooter.prototype.clearCompleted = function () {\n        this.properties.clearCompleted();\n    };\n    TodoFooter.prototype.render = function () {\n        var _a = this.properties, activeFilter = _a.activeFilter, activeCount = _a.activeCount, completedItems = _a.completedItems;\n        var countLabel = activeCount === 1 ? 'item' : 'items';\n        return d_1.v('footer', { classes: this.classes(css.footer) }, [\n            d_1.v('span', { classes: this.classes(css.todoCount) }, [\n                d_1.v('strong', [activeCount + ' ']),\n                d_1.v('span', [countLabel + ' left'])\n            ]),\n            d_1.w('todo-filter', { activeFilter: activeFilter }),\n            completedItems ? d_1.v('button', {\n                onclick: this.clearCompleted,\n                innerHTML: 'Clear completed',\n                classes: this.classes(css.clearCompleted)\n            }) : null\n        ]);\n    };\n    return TodoFooter;\n}(exports.TodoHeaderBase));\nTodoFooter = __decorate([\n    Themeable_1.theme(css)\n], TodoFooter);\nexports.default = TodoFooter;\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar css = __webpack_require__(30);\nexports.TodoHeaderBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nvar TodoHeader = (function (_super) {\n    __extends(TodoHeader, _super);\n    function TodoHeader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TodoHeader.prototype.render = function () {\n        var _a = this.properties, value = _a.value, allCompleted = _a.allCompleted;\n        var newTodoProperties = {\n            id: 'new-todo',\n            afterCreate: this.afterCreate,\n            classes: this.classes(css.newTodo),\n            onkeyup: this.addTodo,\n            oninput: this.updateTodo,\n            value: value,\n            placeholder: 'What needs to be done?'\n        };\n        return d_1.v('header', [\n            d_1.v('h1', { classes: this.classes(css.title) }, ['todos']),\n            d_1.v('input', newTodoProperties),\n            d_1.v('input', { onchange: this.toggleAllTodos, checked: allCompleted, type: 'checkbox', classes: this.classes(css.toggleAll) })\n        ]);\n    };\n    TodoHeader.prototype.addTodo = function (_a) {\n        var which = _a.which, label = _a.target.value;\n        if (which === 13 && label) {\n            this.properties.addTodo({ label: label, completed: false });\n        }\n    };\n    TodoHeader.prototype.updateTodo = function (_a) {\n        var value = _a.target.value;\n        this.properties.updateTodo(value);\n    };\n    TodoHeader.prototype.toggleAllTodos = function () {\n        this.properties.toggleAllTodos();\n    };\n    TodoHeader.prototype.afterCreate = function (element) {\n        setTimeout(function () { return element.focus(); }, 0);\n    };\n    return TodoHeader;\n}(exports.TodoHeaderBase));\nTodoHeader = __decorate([\n    Themeable_1.theme(css)\n], TodoHeader);\nexports.default = TodoHeader;\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar css = __webpack_require__(31);\nexports.TodoItemBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nvar TodoItem = (function (_super) {\n    __extends(TodoItem, _super);\n    function TodoItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TodoItem.prototype.render = function () {\n        var todo = this.properties.todo;\n        return d_1.v('li', { id: 'todo-item', classes: this.classes(css.todoItem, Boolean(todo.editing) ? css.editing : null, Boolean(todo.completed && !todo.editing) ? css.completed : null) }, [\n            d_1.v('div', { classes: this.classes(css.view) }, [\n                d_1.v('input', { id: 'toggle', classes: this.classes(css.toggle), type: 'checkbox', checked: todo.completed, onchange: this.toggleTodo }),\n                d_1.v('label', { classes: this.classes(css.todoLabel), innerHTML: todo.label, ondblclick: this.editTodo }),\n                d_1.v('button', { id: 'destroy', onclick: this.removeTodo, classes: this.classes(css.destroy) })\n            ]),\n            todo.editing ? d_1.v('input', { afterCreate: this.afterCreate, onkeyup: this.updateTodo, onblur: this.updateTodo, value: todo.label, classes: this.classes(css.edit) }) : null\n        ]);\n    };\n    TodoItem.prototype.toggleTodo = function () {\n        this.properties.toggleTodo(this.properties.key);\n    };\n    TodoItem.prototype.editTodo = function () {\n        this.properties.editTodo(this.properties.key);\n    };\n    TodoItem.prototype.updateTodo = function (_a) {\n        var which = _a.which, label = _a.target.value;\n        var _b = this.properties, todo = _b.todo, key = _b.key;\n        var editing = false;\n        if (which === 13 || (!which && todo.editing)) {\n            label ? this.properties.updateTodo({ label: label, editing: editing }, key) : this.removeTodo();\n        }\n        else if (which === 27) {\n            this.properties.updateTodo({ editing: editing }, key);\n        }\n    };\n    TodoItem.prototype.removeTodo = function () {\n        this.properties.removeTodo(this.properties.key);\n    };\n    TodoItem.prototype.afterCreate = function (element) {\n        setTimeout(function () { return element.focus(); }, 0);\n    };\n    return TodoItem;\n}(exports.TodoItemBase));\nTodoItem = __decorate([\n    Themeable_1.theme(css)\n], TodoItem);\nexports.default = TodoItem;\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar array_1 = __webpack_require__(17);\nvar WidgetBase_1 = __webpack_require__(4);\nvar Themeable_1 = __webpack_require__(7);\nvar d_1 = __webpack_require__(3);\nvar css = __webpack_require__(32);\nexports.TodoListBase = Themeable_1.ThemeableMixin(WidgetBase_1.WidgetBase);\nfunction filter(filterName, todo) {\n    switch (filterName) {\n        case 'completed':\n            return !!todo.completed;\n        case 'active':\n            return !todo.completed;\n        default:\n            return true;\n    }\n}\nvar TodoList = (function (_super) {\n    __extends(TodoList, _super);\n    function TodoList() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TodoList.prototype.render = function () {\n        var _a = this.properties, activeFilter = _a.activeFilter, todos = _a.todos, toggleTodo = _a.toggleTodo, editTodo = _a.editTodo, updateTodo = _a.updateTodo, removeTodo = _a.removeTodo;\n        var todoItems = array_1.from(todos.entries()).filter(function (_a) {\n            var value = _a[1];\n            return filter(activeFilter, value);\n        });\n        return d_1.v('ul', { id: 'todo-list', classes: this.classes(css.todoList) }, todoItems.map(function (_a) {\n            var key = _a[0], todo = _a[1];\n            return d_1.w('todo-item', { key: key, todo: todo, toggleTodo: toggleTodo, editTodo: editTodo, removeTodo: removeTodo, updateTodo: updateTodo });\n        }));\n    };\n    return TodoList;\n}(exports.TodoListBase));\nTodoList = __decorate([\n    Themeable_1.theme(css)\n], TodoList);\nexports.default = TodoList;\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(25);\nmodule.exports = __webpack_require__(26);\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// src/main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 61);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a1da5f2d15cb21bfc5c","import has from './support/has';\nimport global from './support/global';\nimport { getValueDescriptor } from './support/util';\n\ndeclare global {\n\tinterface SymbolConstructor {\n\t\tobservable: symbol;\n\t}\n}\n\nexport namespace Shim {\n\t/* tslint:disable-next-line:variable-name */\n\tlet Symbol: SymbolConstructor;\n\t/* tslint:disable-next-line:variable-name */\n\tlet InternalSymbol: SymbolConstructor;\n\n\tconst defineProperties = Object.defineProperties;\n\tconst defineProperty = Object.defineProperty;\n\tconst create = Object.create;\n\n\tconst objPrototype = Object.prototype;\n\n\tinterface GlobalSymbols {\n\t\t[key: string]: symbol;\n\t}\n\n\tconst globalSymbols: GlobalSymbols = {};\n\n\tinterface TypedPropertyDescriptor<T> extends PropertyDescriptor {\n\t\tvalue?: T;\n\t\tget? (): T;\n\t\tset? (v: T): void;\n\t}\n\n\tconst getSymbolName = (function () {\n\t\tconst created = create(null);\n\t\treturn function (desc: string|number): string {\n\t\t\tlet postfix = 0;\n\t\t\tlet name: string;\n\t\t\twhile (created[String(desc) + (postfix || '')]) {\n\t\t\t\t++postfix;\n\t\t\t}\n\t\t\tdesc += String(postfix || '');\n\t\t\tcreated[desc] = true;\n\t\t\tname = '@@' + desc;\n\n\t\t\t// FIXME: Temporary guard until the duplicate execution when testing can be\n\t\t\t// pinned down.\n\t\t\tif (!Object.getOwnPropertyDescriptor(objPrototype, name)) {\n\t\t\t\tdefineProperty(objPrototype, name, {\n\t\t\t\t\tset: function (this: Symbol, value: any) {\n\t\t\t\t\t\tdefineProperty(this, name, getValueDescriptor(value));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn name;\n\t\t};\n\t}());\n\n\tInternalSymbol = function Symbol(this: any, description?: string|number): symbol {\n\t\tif (this instanceof InternalSymbol) {\n\t\t\tthrow new TypeError('TypeError: Symbol is not a constructor');\n\t\t}\n\t\treturn Symbol(description);\n\t} as SymbolConstructor;\n\n\tSymbol = function Symbol(this: Symbol, description?: string|number): symbol {\n\t\tif (this instanceof Symbol) {\n\t\t\tthrow new TypeError('TypeError: Symbol is not a constructor');\n\t\t}\n\t\tconst sym = Object.create(InternalSymbol.prototype);\n\t\tdescription = (description === undefined ? '' : String(description));\n\t\treturn defineProperties(sym, {\n\t\t\t__description__: getValueDescriptor(description),\n\t\t\t__name__: getValueDescriptor(getSymbolName(description))\n\t\t});\n\t} as SymbolConstructor;\n\n\t/**\n\t * A custom guard function that determines if an object is a symbol or not\n\t * @param  {any}       value The value to check to see if it is a symbol or not\n\t * @return {is symbol}       Returns true if a symbol or not (and narrows the type guard)\n\t */\n\texport function isSymbol(value: any): value is symbol {\n\t\treturn (value && ((typeof value === 'symbol') || (value['@@toStringTag'] === 'Symbol'))) || false;\n\t}\n\n\t/**\n\t * Throws if the value is not a symbol, used internally within the Shim\n\t * @param  {any}    value The value to check\n\t * @return {symbol}       Returns the symbol or throws\n\t */\n\tfunction validateSymbol(value: any): symbol {\n\t\tif (!isSymbol(value)) {\n\t\t\tthrow new TypeError(value + ' is not a symbol');\n\t\t}\n\t\treturn value;\n\t}\n\n\t/* Decorate the Symbol function with the appropriate properties */\n\tdefineProperty(Symbol, 'for', getValueDescriptor(function (key: string): symbol {\n\t\tif (globalSymbols[key]) {\n\t\t\treturn globalSymbols[key];\n\t\t}\n\t\treturn (globalSymbols[key] = Symbol(String(key)));\n\t}));\n\tdefineProperties(Symbol, {\n\t\tkeyFor: getValueDescriptor(function (sym: symbol): string | undefined {\n\t\t\tlet key: string;\n\t\t\tvalidateSymbol(sym);\n\t\t\tfor (key in globalSymbols) {\n\t\t\t\tif (globalSymbols[key] === sym) {\n\t\t\t\t\treturn key;\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\thasInstance: getValueDescriptor(Symbol.for('hasInstance'), false, false),\n\t\tisConcatSpreadable: getValueDescriptor(Symbol.for('isConcatSpreadable'), false, false),\n\t\titerator: getValueDescriptor(Symbol.for('iterator'), false, false),\n\t\tmatch: getValueDescriptor(Symbol.for('match'), false, false),\n\t\tobservable: getValueDescriptor(Symbol.for('observable'), false, false),\n\t\treplace: getValueDescriptor(Symbol.for('replace'), false, false),\n\t\tsearch: getValueDescriptor(Symbol.for('search'), false, false),\n\t\tspecies: getValueDescriptor(Symbol.for('species'), false, false),\n\t\tsplit: getValueDescriptor(Symbol.for('split'), false, false),\n\t\ttoPrimitive: getValueDescriptor(Symbol.for('toPrimitive'), false, false),\n\t\ttoStringTag: getValueDescriptor(Symbol.for('toStringTag'), false, false),\n\t\tunscopables: getValueDescriptor(Symbol.for('unscopables'), false, false)\n\t});\n\n\t/* Decorate the InternalSymbol object */\n\tdefineProperties(InternalSymbol.prototype, {\n\t\tconstructor: getValueDescriptor(Symbol),\n\t\ttoString: getValueDescriptor(function (this: { __name__: string }) { return this.__name__; }, false, false)\n\t});\n\n\t/* Decorate the Symbol.prototype */\n\tdefineProperties(Symbol.prototype, {\n\t\ttoString: getValueDescriptor(function (this: Symbol) { return 'Symbol (' + (<any> validateSymbol(this)).__description__ + ')'; }),\n\t\tvalueOf: getValueDescriptor(function (this: Symbol) { return validateSymbol(this); })\n\t});\n\n\tdefineProperty(Symbol.prototype, <any> Symbol.toPrimitive, getValueDescriptor(function (this: Symbol) { return validateSymbol(this); }));\n\tdefineProperty(Symbol.prototype, <any> Symbol.toStringTag, getValueDescriptor('Symbol', false, false, true));\n\n\tdefineProperty(InternalSymbol.prototype, <any> Symbol.toPrimitive, getValueDescriptor((<any> Symbol).prototype[Symbol.toPrimitive], false, false, true));\n\tdefineProperty(InternalSymbol.prototype, <any> Symbol.toStringTag, getValueDescriptor((<any> Symbol).prototype[Symbol.toStringTag], false, false, true));\n\n\t/* tslint:disable-next-line:variable-name */\n\texport const Exposed = Symbol;\n}\n\n/* tslint:disable-next-line:variable-name */\nconst SymbolShim: SymbolConstructor = has('es6-symbol') ? global.Symbol : global.Symbol = Shim.Exposed;\n\n/**\n * Fill any missing well known symbols if the native Symbol is missing them\n */\n[ 'hasInstance', 'isConcatSpreadable', 'iterator', 'species', 'replace', 'search', 'split', 'match', 'toPrimitive',\n\t'toStringTag', 'unscopables', 'observable' ].forEach((wellKnown) => {\n\t\tif (!(<any> Symbol)[wellKnown]) {\n\t\t\tObject.defineProperty(Symbol, wellKnown, getValueDescriptor(Symbol.for(wellKnown), false, false));\n\t\t}\n\t});\n\nexport const isSymbol = Shim.isSymbol;\n\nexport default SymbolShim;\n\n\n\n// WEBPACK FOOTER //\n// Symbol.ts","import global from './global';\nimport has, { add } from '@dojo/shim/support/has';\n\nexport * from '@dojo/shim/support/has';\nexport default has;\n\nadd('object-assign', typeof global.Object.assign === 'function');\n\nadd('arraybuffer', typeof global.ArrayBuffer !== 'undefined');\nadd('formdata', typeof global.FormData !== 'undefined');\nadd('filereader', typeof global.FileReader !== 'undefined', true);\nadd('xhr', typeof global.XMLHttpRequest !== 'undefined');\nadd('xhr2', has('xhr') && 'responseType' in global.XMLHttpRequest.prototype);\nadd('blob', function () {\n\tif (!has('xhr2')) {\n\t\treturn false;\n\t}\n\n\tconst request = new global.XMLHttpRequest();\n\trequest.open('GET', 'http://www.google.com', true);\n\trequest.responseType = 'blob';\n\trequest.abort();\n\treturn request.responseType === 'blob';\n});\n\nadd('node-buffer', 'Buffer' in global && typeof global.Buffer === 'function');\n\nadd('fetch', 'fetch' in global && typeof global.fetch === 'function');\n\n\n\n// WEBPACK FOOTER //\n// has.ts","const globalObject: any = (function (): any {\n\tif (typeof window !== 'undefined') {\n\t\t// Browsers\n\t\treturn window;\n\t}\n\telse if (typeof global !== 'undefined') {\n\t\t// Node\n\t\treturn global;\n\t}\n\telse if (typeof self !== 'undefined') {\n\t\t// Web workers\n\t\treturn self;\n\t}\n\treturn {};\n})();\n\nexport default globalObject;\n\n\n\n// WEBPACK FOOTER //\n// global.ts","import { assign } from '@dojo/core/lang';\nimport { VNode } from '@dojo/interfaces/vdom';\nimport Symbol from '@dojo/shim/Symbol';\nimport { h } from 'maquette';\nimport {\n\tConstructor,\n\tDNode,\n\tHNode,\n\tWNode,\n\tVirtualDomProperties,\n\tWidgetBaseInterface,\n\tDefaultWidgetBaseInterface\n} from './interfaces';\nimport WidgetRegistry from './WidgetRegistry';\n\n/**\n * The symbol identifier for a WNode type\n */\nexport const WNODE = Symbol('Identifier for a WNode.');\n\n/**\n * The symbol identifier for a HNode type\n */\nexport const HNODE = Symbol('Identifier for a HNode.');\n\n/**\n * Helper function that returns true if the `DNode` is a `WNode` using the `type` property\n */\nexport function isWNode<W extends WidgetBaseInterface = DefaultWidgetBaseInterface>(child: DNode<W>): child is WNode<W> {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === WNODE);\n}\n\n/**\n * Helper function that returns true if the `DNode` is a `HNode` using the `type` property\n */\nexport function isHNode(child: DNode): child is HNode {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === HNODE);\n}\n\n/**\n * Generic decorate function for DNodes. The nodes are modified in place based on the provided predicate\n * and modifier functions.\n *\n * The children of each node are flattened and added to the array for decoration.\n *\n * If no predicate is supplied then the modifier will be executed on all nodes.\n */\nexport function decorate(dNodes: DNode, modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode;\nexport function decorate(dNodes: DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode[];\nexport function decorate(dNodes: DNode | DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode | DNode[] {\n\tlet nodes = Array.isArray(dNodes) ? [ ...dNodes ] : [ dNodes ];\n\twhile (nodes.length) {\n\t\tconst node = nodes.pop();\n\t\tif (node) {\n\t\t\tif (!predicate || predicate(node)) {\n\t\t\t\tmodifier(node);\n\t\t\t}\n\t\t\tif ((isWNode(node) || isHNode(node)) && node.children) {\n\t\t\t\tnodes = [ ...nodes, ...node.children ];\n\t\t\t}\n\t\t}\n\t}\n\treturn dNodes;\n}\n\n/**\n * Global widget registry instance\n */\nexport const registry = new WidgetRegistry();\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseInterface>(widgetConstructor: Constructor<W> | string, properties: W['properties'], children: W['children'] = []): WNode<W> {\n\n\treturn {\n\t\tchildren,\n\t\twidgetConstructor,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create hyperscript, lazily executes the hyperscript creation\n */\nexport function v(tag: string, properties: VirtualDomProperties, children?: DNode[]): HNode;\nexport function v(tag: string, children: DNode[]): HNode;\nexport function v(tag: string): HNode;\nexport function v(tag: string, propertiesOrChildren: VirtualDomProperties | DNode[] = {}, children: DNode[] = []): HNode {\n\t\tlet properties: VirtualDomProperties = propertiesOrChildren;\n\n\t\tif (Array.isArray(propertiesOrChildren)) {\n\t\t\tchildren = propertiesOrChildren;\n\t\t\tproperties = {};\n\t\t}\n\n\t\tif (properties) {\n\t\t\tlet { classes } = properties;\n\t\t\tif (typeof classes === 'function') {\n\t\t\t\tclasses = classes();\n\t\t\t\tproperties = assign(properties, { classes });\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttag,\n\t\t\tchildren,\n\t\t\tproperties,\n\t\t\trender<T>(this: { vNodes: VNode[], properties: VirtualDomProperties }, options: { bind?: T } = { }) {\n\n\t\t\t\treturn h(tag, assign(options, this.properties), this.vNodes);\n\t\t\t},\n\t\t\ttype: HNODE\n\t\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// d.ts","import { Evented, BaseEventedEvents } from '@dojo/core/Evented';\nimport { EventedListenerOrArray } from '@dojo/interfaces/bases';\nimport { Handle } from '@dojo/interfaces/core';\nimport { VNode, ProjectionOptions, VNodeProperties } from '@dojo/interfaces/vdom';\nimport Map from '@dojo/shim/Map';\nimport Promise from '@dojo/shim/Promise';\nimport Set from '@dojo/shim/Set';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { v, registry, isWNode, isHNode, decorate } from './d';\nimport diff, { DiffType } from './diff';\nimport {\n\tDNode,\n\tWidgetBaseConstructor,\n\tWidgetProperties,\n\tWidgetBaseInterface,\n\tPropertyChangeRecord,\n\tPropertiesChangeEvent,\n\tHNode\n} from './interfaces';\nimport { isWidgetBaseConstructor, WIDGET_BASE_TYPE } from './WidgetRegistry';\nimport RegistryHandler from './RegistryHandler';\n\nexport { DiffType };\n\n/**\n * Widget cache wrapper for instance management\n */\ninterface WidgetCacheWrapper {\n\tchild: WidgetBaseInterface<WidgetProperties>;\n\twidgetConstructor: WidgetBaseConstructor;\n\tused: boolean;\n}\n\n/**\n * Diff property configuration\n */\ninterface DiffPropertyConfig {\n\tpropertyName: string;\n\tdiffType: DiffType;\n\tdiffFunction?<P>(previousProperty: P, newProperty: P): PropertyChangeRecord;\n}\n\nexport interface WidgetBaseEvents<P extends WidgetProperties> extends BaseEventedEvents {\n\t(type: 'properties:changed', handler: EventedListenerOrArray<WidgetBase<P>, PropertiesChangeEvent<WidgetBase<P>, P>>): Handle;\n}\n\nconst decoratorMap = new Map<Function, Map<string, any[]>>();\n\n/**\n * Decorator that can be used to register a function to run as an aspect to `render`\n */\nexport function afterRender(method: Function): (target: any) => void;\nexport function afterRender(): (target: any, propertyKey: string) => void;\nexport function afterRender(method?: Function) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('afterRender', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\n/**\n * Decorator that can be used to register a reducer function to run as an aspect before to `render`\n */\nexport function beforeRender(method: Function): (target: any) => void;\nexport function beforeRender(): (target: any, propertyKey: string) => void;\nexport function beforeRender(method?: Function) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('beforeRender', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\n/**\n * Decorator that can be used to register a function as a specific property diff\n *\n * @param propertyName  The name of the property of which the diff function is applied\n * @param diffType      The diff type, default is DiffType.AUTO.\n * @param diffFunction  A diff function to run if diffType if DiffType.CUSTOM\n */\nexport function diffProperty(propertyName: string, diffType = DiffType.AUTO, diffFunction?: Function) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('diffProperty', {\n\t\t\tpropertyName,\n\t\t\tdiffType: propertyKey ? DiffType.CUSTOM : diffType,\n\t\t\tdiffFunction: propertyKey ? target[propertyKey] : diffFunction\n\t\t});\n\t});\n}\n\n/**\n * Decorator used to register listeners to the `properties:changed` event.\n */\nexport function onPropertiesChanged(method: Function): (target: any) => void;\nexport function onPropertiesChanged(): (target: any, propertyKey: any) => void;\nexport function onPropertiesChanged(method?: Function) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('onPropertiesChanged', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\n/**\n * Generic decorator handler to take care of whether or not the decorator was called at the class level\n * or the method level.\n *\n * @param handler\n */\nexport function handleDecorator(handler: (target: any, propertyKey?: string) => void) {\n\treturn function (target: any, propertyKey?: string, descriptor?: PropertyDescriptor) {\n\t\tif (typeof target === 'function') {\n\t\t\thandler(target.prototype, undefined);\n\t\t}\n\t\telse {\n\t\t\thandler(target, propertyKey);\n\t\t}\n\t};\n}\n\n/**\n * Function that identifies DNodes that are HNodes with key properties.\n */\nfunction isHNodeWithKey(node: DNode): node is HNode {\n\treturn isHNode(node) && (node.properties != null) && (node.properties.key != null);\n}\n\n/**\n * Main widget base for all widgets to extend\n */\n@diffProperty('bind', DiffType.REFERENCE)\nexport class WidgetBase<P extends WidgetProperties = WidgetProperties, C extends DNode = DNode> extends Evented implements WidgetBaseInterface<P, C> {\n\n\t/**\n\t * static identifier\n\t */\n\tstatic _type: symbol = WIDGET_BASE_TYPE;\n\n\t/**\n\t * on for the events defined for widget base\n\t */\n\tpublic on: WidgetBaseEvents<P>;\n\n\t/**\n\t * children array\n\t */\n\tprivate _children: (C | null)[];\n\n\t/**\n\t * marker indicating if the widget requires a render\n\t */\n\tprivate _dirty: boolean;\n\n\t/**\n\t * cachedVNode from previous render\n\t */\n\tprivate _cachedVNode?: VNode | string;\n\n\t/**\n\t * internal widget properties\n\t */\n\tprivate  _properties: P;\n\n\t/**\n\t * properties from the previous render\n\t */\n\tprivate _previousProperties: P & { [index: string]: any };\n\n\t/**\n\t * cached chldren map for instance management\n\t */\n\tprivate _cachedChildrenMap: Map<string | Promise<WidgetBaseConstructor> | WidgetBaseConstructor, WidgetCacheWrapper[]>;\n\n\t/**\n\t * map of specific property diff functions\n\t */\n\tprivate _diffPropertyFunctionMap: Map<string, string>;\n\n\t/**\n\t * map of decorators that are applied to this widget\n\t */\n\tprivate _decoratorCache: Map<string, any[]>;\n\n\t/**\n\t * set of render decorators\n\t */\n\tprivate _renderDecorators: Set<string>;\n\n\tprivate _registries: RegistryHandler;\n\n\t/**\n\t * Map of functions properties for the bound function\n\t */\n\tprivate _bindFunctionPropertyMap: WeakMap<(...args: any[]) => any, { boundFunc: (...args: any[]) => any, scope: any }>;\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tsuper({});\n\n\t\tthis._children = [];\n\t\tthis._decoratorCache = new Map<string, any[]>();\n\t\tthis._properties = <P> {};\n\t\tthis._previousProperties = <P> {};\n\t\tthis._cachedChildrenMap = new Map<string | Promise<WidgetBaseConstructor> | WidgetBaseConstructor, WidgetCacheWrapper[]>();\n\t\tthis._diffPropertyFunctionMap = new Map<string, string>();\n\t\tthis._renderDecorators = new Set<string>();\n\t\tthis._bindFunctionPropertyMap = new WeakMap<(...args: any[]) => any, { boundFunc: (...args: any[]) => any, scope: any }>();\n\t\tthis._registries = new RegistryHandler();\n\t\tthis._registries.add(registry);\n\t\tthis.own(this._registries);\n\n\t\tthis.own(this._registries.on('invalidate', this.invalidate.bind(this)));\n\n\t\tthis.own(this.on('properties:changed', (evt) => {\n\t\t\tthis._dirty = true;\n\n\t\t\tconst propertiesChangedListeners = this.getDecorator('onPropertiesChanged');\n\t\t\tpropertiesChangedListeners.forEach((propertiesChangedFunction) => {\n\t\t\t\tpropertiesChangedFunction.call(this, evt);\n\t\t\t});\n\t\t}));\n\t}\n\n\t/**\n\t * A render decorator that registers vnode callbacks for 'afterCreate' and\n\t * 'afterUpdate' that will in turn call lifecycle methods onElementCreated and onElementUpdated.\n\t */\n\t@afterRender()\n\tprotected attachLifecycleCallbacks (node: DNode): DNode {\n\t\t// Create vnode afterCreate and afterUpdate callback functions that will only be set on nodes\n\t\t// with \"key\" properties.\n\n\t\tdecorate(node, (node: HNode) => {\n\t\t\tnode.properties.afterCreate = this.afterCreateCallback;\n\t\t\tnode.properties.afterUpdate = this.afterUpdateCallback;\n\t\t}, isHNodeWithKey);\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * vnode afterCreate callback that calls the onElementCreated lifecycle method.\n\t */\n\tprivate afterCreateCallback(element: Element, projectionOptions: ProjectionOptions, vnodeSelector: string,\n\t\tproperties: VNodeProperties, children: VNode[]): void {\n\t\tthis.onElementCreated(element, String(properties.key));\n\t}\n\n\t/**\n\t * vnode afterUpdate callback that calls the onElementUpdated lifecycle method.\n\t */\n\tprivate afterUpdateCallback(element: Element, projectionOptions: ProjectionOptions, vnodeSelector: string,\n\t\tproperties: VNodeProperties, children: VNode[]): void {\n\t\tthis.onElementUpdated(element, String(properties.key));\n\t}\n\n\t/**\n\t * Widget lifecycle method that is called whenever a dom node is created for a vnode.\n\t * Override this method to access the dom nodes that were inserted into the dom.\n\t * @param element The dom node represented by the vdom node.\n\t * @param key The vdom node's key.\n\t */\n\tprotected onElementCreated(element: Element, key: string): void {\n\t\t// Do nothing by default.\n\t}\n\n\t/**\n\t * Widget lifecycle method that is called whenever a dom node that is associated with a vnode is updated.\n\t * Note: this method is dependant on the Maquette afterUpdate callback which is called if a dom\n\t * node might have been updated.  Maquette does not guarantee the dom node was updated.\n\t * Override this method to access the dom node.\n\t * @param element The dom node represented by the vdom node.\n\t * @param key The vdom node's key.\n\t */\n\tprotected onElementUpdated(element: Element, key: string): void {\n\t\t// Do nothing by default.\n\t}\n\n\tpublic get properties(): Readonly<P> {\n\t\treturn this._properties;\n\t}\n\n\tpublic __setProperties__(properties: P): void {\n\t\tconst diffPropertyResults: { [index: string]: any } = {};\n\t\tconst diffPropertyChangedKeys: string[] = [];\n\n\t\tthis.bindFunctionProperties(properties);\n\n\t\tconst registeredDiffPropertyConfigs: DiffPropertyConfig[] = this.getDecorator('diffProperty');\n\n\t\tconst allProperties = [...Object.keys(this._previousProperties), ...Object.keys(properties)].filter((value, index, self) => {\n\t\t\treturn self.indexOf(value) === index;\n\t\t});\n\n\t\tconst propertyDiffHandlers = allProperties.reduce((diffFunctions: any, propertyName) => {\n\t\t\tdiffFunctions[propertyName] = [\n\t\t\t\t...registeredDiffPropertyConfigs.filter(value => {\n\t\t\t\t\treturn value.propertyName === propertyName;\n\t\t\t\t})\n\t\t\t];\n\n\t\t\treturn diffFunctions;\n\t\t}, {});\n\n\t\tallProperties.forEach(propertyName => {\n\t\t\tconst previousValue = this._previousProperties[propertyName];\n\t\t\tconst newValue = (<any> properties)[propertyName];\n\t\t\tconst diffHandlers = propertyDiffHandlers[propertyName];\n\t\t\tlet result: PropertyChangeRecord = {\n\t\t\t\tchanged: false,\n\t\t\t\tvalue: newValue\n\t\t\t};\n\n\t\t\tif (diffHandlers.length) {\n\t\t\t\tfor (let i = 0; i < diffHandlers.length; i++) {\n\t\t\t\t\tconst { diffFunction, diffType } = diffHandlers[i];\n\n\t\t\t\t\tconst meta = {\n\t\t\t\t\t\tdiffFunction: diffFunction,\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t};\n\n\t\t\t\t\tresult = diff(propertyName, diffType, previousValue, newValue, meta);\n\n\t\t\t\t\tif (result.changed) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult = diff(propertyName, DiffType.AUTO, previousValue, newValue);\n\t\t\t}\n\n\t\t\tif (propertyName in properties) {\n\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t}\n\n\t\t\tif (result.changed) {\n\t\t\t\tdiffPropertyChangedKeys.push(propertyName);\n\t\t\t}\n\t\t});\n\n\t\tthis._properties = <P> diffPropertyResults;\n\n\t\tif (diffPropertyChangedKeys.length) {\n\t\t\tthis.emit({\n\t\t\t\ttype: 'properties:changed',\n\t\t\t\ttarget: this,\n\t\t\t\tproperties: this.properties,\n\t\t\t\tchangedPropertyKeys: diffPropertyChangedKeys\n\t\t\t});\n\t\t}\n\t\tthis._previousProperties = this.properties;\n\t}\n\n\tpublic get children(): (C | null)[] {\n\t\treturn this._children;\n\t}\n\n\tpublic __setChildren__(children: (C | null)[]): void {\n\t\tthis._dirty = true;\n\t\tthis._children = children;\n\t\tthis.emit({\n\t\t\ttype: 'widget:children',\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\tpublic __render__(): VNode | string | null {\n\t\tif (this._dirty || !this._cachedVNode) {\n\t\t\tthis._dirty = false;\n\t\t\tconst beforeRenders = this.getDecorator('beforeRender');\n\t\t\tconst render = beforeRenders.reduce((render, beforeRenderFunction) => {\n\t\t\t\treturn beforeRenderFunction.call(this, render, this._properties, this._children);\n\t\t\t}, this.render.bind(this));\n\t\t\tlet dNode = render();\n\t\t\tconst afterRenders = this.getDecorator('afterRender');\n\t\t\tafterRenders.forEach((afterRenderFunction: Function) => {\n\t\t\t\tdNode = afterRenderFunction.call(this, dNode);\n\t\t\t});\n\t\t\tconst widget = this.dNodeToVNode(dNode);\n\t\t\tthis.manageDetachedChildren();\n\t\t\tif (widget) {\n\t\t\t\tthis._cachedVNode = widget;\n\t\t\t}\n\t\t\treturn widget;\n\t\t}\n\t\treturn this._cachedVNode;\n\t}\n\n\tpublic invalidate(): void {\n\t\tthis._dirty = true;\n\t\tthis.emit({\n\t\t\ttype: 'invalidated',\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\tprotected render(): DNode {\n\t\treturn v('div', {}, this.children);\n\t}\n\n\t/**\n\t * Function to add decorators to WidgetBase\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @param value The value of the decorator\n\t */\n\tprotected addDecorator(decoratorKey: string, value: any): void {\n\t\tvalue = Array.isArray(value) ? value : [ value ];\n\t\tif (this.hasOwnProperty('constructor')) {\n\t\t\tlet decoratorList = decoratorMap.get(this.constructor);\n\t\t\tif (!decoratorList) {\n\t\t\t\tdecoratorList = new Map<string, any[]>();\n\t\t\t\tdecoratorMap.set(this.constructor, decoratorList);\n\t\t\t}\n\n\t\t\tlet specificDecoratorList = decoratorList.get(decoratorKey);\n\t\t\tif (!specificDecoratorList) {\n\t\t\t\tspecificDecoratorList = [];\n\t\t\t\tdecoratorList.set(decoratorKey, specificDecoratorList);\n\t\t\t}\n\t\t\tspecificDecoratorList.push(...value);\n\t\t}\n\t\telse {\n\t\t\tconst decorators = this._decoratorCache.get(decoratorKey) || [];\n\t\t\tthis._decoratorCache.set(decoratorKey, [ ...decorators, ...value ]);\n\t\t}\n\t}\n\n\t/**\n\t * Function to build the list of decorators from the global decorator map.\n\t *\n\t * @param decoratorKey  The key of the decorator\n\t * @return An array of decorator values\n\t * @private\n\t */\n\tprivate _buildDecoratorList(decoratorKey: string): any[] {\n\t\tconst allDecorators = [];\n\n\t\tlet constructor = this.constructor;\n\n\t\twhile (constructor) {\n\t\t\tconst instanceMap = decoratorMap.get(constructor);\n\t\t\tif (instanceMap) {\n\t\t\t\tconst decorators = instanceMap.get(decoratorKey);\n\n\t\t\t\tif (decorators) {\n\t\t\t\t\tallDecorators.unshift(...decorators);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconstructor = Object.getPrototypeOf(constructor);\n\t\t}\n\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Function to retrieve decorator values\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @returns An array of decorator values\n\t */\n\tprotected getDecorator(decoratorKey: string): any[] {\n\t\tlet allDecorators = this._decoratorCache.get(decoratorKey);\n\n\t\tif (allDecorators !== undefined) {\n\t\t\treturn allDecorators;\n\t\t}\n\n\t\tallDecorators = this._buildDecoratorList(decoratorKey);\n\n\t\tthis._decoratorCache.set(decoratorKey, allDecorators);\n\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Binds unbound property functions to the specified `bind` property\n\t *\n\t * @param properties properties to check for functions\n\t */\n\tprivate bindFunctionProperties(properties: P & { [index: string]: any }): void {\n\t\tObject.keys(properties).forEach((propertyKey) => {\n\t\t\tconst property = properties[propertyKey];\n\t\t\tconst bind = properties.bind;\n\n\t\t\tif (typeof property === 'function' && !isWidgetBaseConstructor(property)) {\n\t\t\t\tconst bindInfo = this._bindFunctionPropertyMap.get(property) || {};\n\t\t\t\tlet { boundFunc, scope } = bindInfo;\n\n\t\t\t\tif (!boundFunc || scope !== bind) {\n\t\t\t\t\tboundFunc = property.bind(bind);\n\t\t\t\t\tthis._bindFunctionPropertyMap.set(property, { boundFunc, scope: bind });\n\t\t\t\t}\n\t\t\t\tproperties[propertyKey] = boundFunc;\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected get registries(): RegistryHandler {\n\t\treturn this._registries;\n\t}\n\n\t/**\n\t * Process a structure of DNodes into VNodes, string or null. `null` results are filtered.\n\t *\n\t * @param dNode the dnode to process\n\t * @returns a VNode, string or null\n\t */\n\tprivate dNodeToVNode(dNode: DNode): VNode | string | null {\n\n\t\tif (typeof dNode === 'string' || dNode === null) {\n\t\t\treturn dNode;\n\t\t}\n\n\t\tif (isWNode(dNode)) {\n\t\t\tconst { children, properties = {} } = dNode;\n\t\t\tconst { key } = properties;\n\n\t\t\tlet { widgetConstructor } = dNode;\n\t\t\tlet child: WidgetBaseInterface<WidgetProperties>;\n\n\t\t\tif (typeof widgetConstructor === 'string') {\n\t\t\t\tconst item = this._registries.get(widgetConstructor);\n\t\t\t\tif (item === null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\twidgetConstructor = <WidgetBaseConstructor> item;\n\t\t\t}\n\n\t\t\tconst childrenMapKey = key || widgetConstructor;\n\t\t\tlet cachedChildren = this._cachedChildrenMap.get(childrenMapKey) || [];\n\t\t\tlet cachedChild: WidgetCacheWrapper | undefined;\n\t\t\tcachedChildren.some((cachedChildWrapper) => {\n\t\t\t\tif (cachedChildWrapper.widgetConstructor === widgetConstructor && !cachedChildWrapper.used) {\n\t\t\t\t\tcachedChild = cachedChildWrapper;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (!properties.hasOwnProperty('bind')) {\n\t\t\t\tproperties.bind = this;\n\t\t\t}\n\n\t\t\tif (cachedChild) {\n\t\t\t\tchild = cachedChild.child;\n\t\t\t\tchild.__setProperties__(properties);\n\t\t\t\tcachedChild.used = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchild = new widgetConstructor();\n\t\t\t\tchild.__setProperties__(properties);\n\t\t\t\tchild.own(child.on('invalidated', () => {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}));\n\t\t\t\tcachedChildren = [...cachedChildren, { child, widgetConstructor, used: true }];\n\t\t\t\tthis._cachedChildrenMap.set(childrenMapKey, cachedChildren);\n\t\t\t\tthis.own(child);\n\t\t\t}\n\t\t\tif (!key && cachedChildren.length > 1) {\n\t\t\t\tconst errorMsg = 'It is recommended to provide a unique `key` property when using the same widget multiple times';\n\t\t\t\tconsole.warn(errorMsg);\n\t\t\t\tthis.emit({ type: 'error', target: this, error: new Error(errorMsg) });\n\t\t\t}\n\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tchild.__setChildren__(children);\n\t\t\t}\n\t\t\treturn child.__render__();\n\t\t}\n\n\t\tdNode.vNodes = dNode.children\n\t\t.filter((child) => child !== null)\n\t\t.map((child: DNode) => {\n\t\t\treturn this.dNodeToVNode(child);\n\t\t});\n\n\t\treturn dNode.render({ bind: this });\n\t}\n\n\t/**\n\t * Manage widget instances after render processing\n\t */\n\tprivate manageDetachedChildren(): void {\n\t\tthis._cachedChildrenMap.forEach((cachedChildren, key) => {\n\t\t\tconst filterCachedChildren = cachedChildren.filter((cachedChild) => {\n\t\t\t\tif (cachedChild.used) {\n\t\t\t\t\tcachedChild.used = false;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tcachedChild.child.destroy();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tthis._cachedChildrenMap.set(key, filterCachedChildren);\n\t\t});\n\t}\n}\n\nexport default WidgetBase;\n\n\n\n// WEBPACK FOOTER //\n// WidgetBase.ts","import has from './has';\nimport { Handle } from '@dojo/interfaces/core';\n\nconst slice = Array.prototype.slice;\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Type guard that ensures that the value can be coerced to Object\n * to weed out host objects that do not derive from Object.\n * This function is used to check if we want to deep copy an object or not.\n * Note: In ES6 it is possible to modify an object's Symbol.toStringTag property, which will\n * change the value returned by `toString`. This is a rare edge case that is difficult to handle,\n * so it is not handled here.\n * @param  value The value to check\n * @return       If the value is coercible into an Object\n */\nfunction shouldDeepCopyObject(value: any): value is Object {\n\treturn Object.prototype.toString.call(value) === '[object Object]';\n}\n\nfunction copyArray<T>(array: T[], inherited: boolean): T[] {\n\treturn array.map(function (item: T): T {\n\t\tif (Array.isArray(item)) {\n\t\t\treturn  <any> copyArray(<any> item, inherited);\n\t\t}\n\n\t\treturn !shouldDeepCopyObject(item) ?\n\t\t\titem :\n\t\t\t_mixin({\n\t\t\t\tdeep: true,\n\t\t\t\tinherited: inherited,\n\t\t\t\tsources: <Array<T>> [ item ],\n\t\t\t\ttarget: <T> {}\n\t\t\t});\n\t});\n}\n\ninterface MixinArgs<T extends {}, U extends {}> {\n\tdeep: boolean;\n\tinherited: boolean;\n\tsources: (U | null | undefined)[];\n\ttarget: T;\n\tcopied?: any[];\n}\n\nfunction _mixin<T extends {}, U extends {}>(kwArgs: MixinArgs<T, U>): T&U {\n\tconst deep = kwArgs.deep;\n\tconst inherited = kwArgs.inherited;\n\tconst target: any = kwArgs.target;\n\tconst copied = kwArgs.copied || [];\n\tconst copiedClone = [ ...copied ];\n\n\tfor (let source of kwArgs.sources) {\n\t\tif (source === null || source === undefined) {\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let key in source) {\n\t\t\tif (inherited || hasOwnProperty.call(source, key)) {\n\t\t\t\tlet value: any = source[key];\n\n\t\t\t\tif (copiedClone.indexOf(value) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deep) {\n\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\tvalue = copyArray(value, inherited);\n\t\t\t\t\t}\n\t\t\t\t\telse if (shouldDeepCopyObject(value)) {\n\t\t\t\t\t\tconst targetValue: any = target[key] || {};\n\t\t\t\t\t\tcopied.push(source);\n\t\t\t\t\t\tvalue = _mixin({\n\t\t\t\t\t\t\tdeep: true,\n\t\t\t\t\t\t\tinherited: inherited,\n\t\t\t\t\t\t\tsources: [ value ],\n\t\t\t\t\t\t\ttarget: targetValue,\n\t\t\t\t\t\t\tcopied\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttarget[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <T&U> target;\n}\n\ninterface ObjectAssignConstructor extends ObjectConstructor {\n\tassign<T extends {}, U extends {}>(target: T, ...sources: (U | null | undefined)[]): T&U;\n}\n\n/**\n * Copies the values of all enumerable own properties of one or more source objects to the target object.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable own properties will be copied to the target object\n * @return The modified target object\n */\nexport const assign = has('object-assign') ?\n\t(<ObjectAssignConstructor> Object).assign :\n\tfunction<T extends {}, U extends {}> (target: T, ...sources: (U | null | undefined)[]): T&U {\n\t\treturn _mixin({\n\t\t\tdeep: false,\n\t\t\tinherited: false,\n\t\t\tsources: sources,\n\t\t\ttarget: target\n\t\t});\n\t};\n\n/**\n * Creates a new object from the given prototype, and copies all enumerable own properties of one or more\n * source objects to the newly created target object.\n *\n * @param prototype The prototype to create a new object from\n * @param mixins Any number of objects whose enumerable own properties will be copied to the created object\n * @return The new object\n */\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X, mixin5: Y, mixin6: Z): T & U & V & W & X & Y & Z;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X, mixin5: Y): T & U & V & W & X & Y;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X): T & U & V & W & X;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W): T & U & V & W;\nexport function create<T extends {}, U extends {}, V extends {}>(prototype: T, mixin1: U, mixin2: V): T & U & V;\nexport function create<T extends {}, U extends {}>(prototype: T, mixin: U): T & U;\nexport function create<T extends {}>(prototype: T): T;\nexport function create(prototype: any, ...mixins: any[]): any {\n\tif (!mixins.length) {\n\t\tthrow new RangeError('lang.create requires at least one mixin object.');\n\t}\n\n\tconst args = mixins.slice();\n\targs.unshift(Object.create(prototype));\n\n\treturn assign.apply(null, args);\n}\n\n/**\n * Copies the values of all enumerable own properties of one or more source objects to the target object,\n * recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable own properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function deepAssign<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepAssign<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepAssign(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: false,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object, recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function deepMixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepMixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepMixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Creates a new object using the provided source's prototype as the prototype for the new object, and then\n * deep copies the provided source's values into the new target.\n *\n * @param source The object to duplicate\n * @return The new object\n */\nexport function duplicate<T extends {}>(source: T): T {\n\tconst target = Object.create(Object.getPrototypeOf(source));\n\n\treturn deepMixin(target, source);\n}\n\n/**\n * Determines whether two values are the same value.\n *\n * @param a First value to compare\n * @param b Second value to compare\n * @return true if the values are the same; false otherwise\n */\nexport function isIdentical(a: any, b: any): boolean {\n\treturn a === b ||\n\t\t/* both values are NaN */\n\t\t(a !== a && b !== b);\n}\n\n/**\n * Returns a function that binds a method to the specified object at runtime. This is similar to\n * `Function.prototype.bind`, but instead of a function it takes the name of a method on an object.\n * As a result, the function returned by `lateBind` will always call the function currently assigned to\n * the specified property on the object as of the moment the function it returns is called.\n *\n * @param instance The context object\n * @param method The name of the method on the context object to bind to itself\n * @param suppliedArgs An optional array of values to prepend to the `instance[method]` arguments list\n * @return The bound function\n */\nexport function lateBind(instance: {}, method: string, ...suppliedArgs: any[]): (...args: any[]) => any {\n\treturn suppliedArgs.length ?\n\t\tfunction () {\n\t\t\tconst args: any[] = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n\n\t\t\t// TS7017\n\t\t\treturn (<any> instance)[method].apply(instance, args);\n\t\t} :\n\t\tfunction () {\n\t\t\t// TS7017\n\t\t\treturn (<any> instance)[method].apply(instance, arguments);\n\t\t};\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object.\n *\n * @return The modified target object\n */\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function mixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function mixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function mixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: false,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Returns a function which invokes the given function with the given arguments prepended to its argument list.\n * Like `Function.prototype.bind`, but does not alter execution context.\n *\n * @param targetFunction The function that needs to be bound\n * @param suppliedArgs An optional array of arguments to prepend to the `targetFunction` arguments list\n * @return The bound function\n */\nexport function partial(targetFunction: (...args: any[]) => any, ...suppliedArgs: any[]): (...args: any[]) => any {\n\treturn function (this: any) {\n\t\tconst args: any[] = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n\n\t\treturn targetFunction.apply(this, args);\n\t};\n}\n\n/**\n * Returns an object with a destroy method that, when called, calls the passed-in destructor.\n * This is intended to provide a unified interface for creating \"remove\" / \"destroy\" handlers for\n * event listeners, timers, etc.\n *\n * @param destructor A function that will be called when the handle's `destroy` method is invoked\n * @return The handle object\n */\nexport function createHandle(destructor: () => void): Handle {\n\treturn {\n\t\tdestroy: function (this: Handle) {\n\t\t\tthis.destroy = function () {};\n\t\t\tdestructor.call(this);\n\t\t}\n\t};\n}\n\n/**\n * Returns a single handle that can be used to destroy multiple handles simultaneously.\n *\n * @param handles An array of handles with `destroy` methods\n * @return The handle object\n */\nexport function createCompositeHandle(...handles: Handle[]): Handle {\n\treturn createHandle(function () {\n\t\tfor (let handle of handles) {\n\t\t\thandle.destroy();\n\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// lang.ts","import { ArrayLike } from './interfaces';\nimport { HIGH_SURROGATE_MIN, HIGH_SURROGATE_MAX } from './string';\nimport './Symbol';\n\nexport interface IteratorResult<T> {\n\treadonly done: boolean;\n\treadonly value: T;\n}\n\nexport interface Iterator<T> {\n\tnext(value?: any): IteratorResult<T>;\n\treturn?(value?: any): IteratorResult<T>;\n\tthrow?(e?: any): IteratorResult<T>;\n}\n\nexport interface Iterable<T> {\n\t[Symbol.iterator](): Iterator<T>;\n}\n\nexport interface IterableIterator<T> extends Iterator<T> {\n\t[Symbol.iterator](): IterableIterator<T>;\n}\n\nconst staticDone: IteratorResult<any> = { done: true, value: undefined };\n\n/**\n * A class that provides \"shims\" an iterator interface on array like\n * objects.\n */\nexport class ShimIterator<T> {\n\tprivate _list: ArrayLike<T>;\n\tprivate _nextIndex: number = -1;\n\tprivate _nativeIterator: Iterator<T>;\n\n\tconstructor(list: ArrayLike<T> | Iterable<T>) {\n\t\tif (isIterable(list)) {\n\t\t\tthis._nativeIterator = list[Symbol.iterator]();\n\t\t}\n\t\telse {\n\t\t\tthis._list = list;\n\t\t}\n\t};\n\n\t/**\n\t * Return the next iteration result for the Iterator\n\t */\n\tnext(): IteratorResult<T> {\n\t\tif (this._nativeIterator) {\n\t\t\treturn this._nativeIterator.next();\n\t\t}\n\t\tif (!this._list) {\n\t\t\treturn staticDone;\n\t\t}\n\t\tif (++this._nextIndex < this._list.length) {\n\t\t\treturn {\n\t\t\t\tdone: false,\n\t\t\t\tvalue: this._list[this._nextIndex]\n\t\t\t};\n\t\t}\n\t\treturn staticDone;\n\t};\n\n\t[Symbol.iterator](): IterableIterator<T> {\n\t\treturn this;\n\t}\n}\n\n/**\n * A type guard for checking if something has an Iterable interface\n *\n * @param value The value to type guard against\n */\nexport function isIterable(value: any): value is Iterable<any> {\n\treturn value && typeof value[Symbol.iterator] === 'function';\n}\n\n/**\n * A type guard for checking if something is ArrayLike\n *\n * @param value The value to type guard against\n */\nexport function isArrayLike(value: any): value is ArrayLike<any> {\n\treturn value && typeof value.length === 'number';\n}\n\n/**\n * Returns the iterator for an object\n *\n * @param iterable The iterable object to return the iterator for\n */\nexport function get<T>(iterable: Iterable<T> | ArrayLike<T>): Iterator<T> | undefined {\n\tif (isIterable(iterable)) {\n\t\treturn iterable[Symbol.iterator]();\n\t}\n\telse if (isArrayLike(iterable)) {\n\t\treturn new ShimIterator(iterable);\n\t}\n};\n\nexport interface ForOfCallback<T> {\n\t/**\n\t * A callback function for a forOf() iteration\n\t *\n\t * @param value The current value\n\t * @param object The object being iterated over\n\t * @param doBreak A function, if called, will stop the iteration\n\t */\n\t(value: T, object: Iterable<T> | ArrayLike<T> | string, doBreak: () => void): void;\n}\n\n/**\n * Shims the functionality of `for ... of` blocks\n *\n * @param iterable The object the provides an interator interface\n * @param callback The callback which will be called for each item of the iterable\n * @param thisArg Optional scope to pass the callback\n */\nexport function forOf<T>(iterable: Iterable<T> | ArrayLike<T> | string, callback: ForOfCallback<T>, thisArg?: any): void {\n\tlet broken = false;\n\n\tfunction doBreak() {\n\t\tbroken = true;\n\t}\n\n\t/* We need to handle iteration of double byte strings properly */\n\tif (isArrayLike(iterable) && typeof iterable === 'string') {\n\t\tconst l = iterable.length;\n\t\tfor (let i = 0; i < l; ++i) {\n\t\t\tlet char = iterable[i];\n\t\t\tif ((i + 1) < l) {\n\t\t\t\tconst code = char.charCodeAt(0);\n\t\t\t\tif ((code >= HIGH_SURROGATE_MIN) && (code <= HIGH_SURROGATE_MAX)) {\n\t\t\t\t\tchar += iterable[++i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback.call(thisArg, char, iterable, doBreak);\n\t\t\tif (broken) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconst iterator = get(iterable);\n\t\tif (iterator) {\n\t\t\tlet result = iterator.next();\n\n\t\t\twhile (!result.done) {\n\t\t\t\tcallback.call(thisArg, result.value, iterable, doBreak);\n\t\t\t\tif (broken) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// iterator.ts","import { assign } from '@dojo/core/lang';\nimport { includes, find } from '@dojo/shim/array';\nimport Map from '@dojo/shim/Map';\nimport { Constructor, WidgetProperties, PropertiesChangeEvent } from './../interfaces';\nimport { WidgetBase, onPropertiesChanged, handleDecorator } from './../WidgetBase';\n\n/**\n * A representation of the css class names to be applied and\n * removed.\n */\nexport type ClassNameFlags = {\n\t[key: string]: boolean;\n};\n\n/**\n * A lookup object for available class names\n */\nexport type ClassNames = {\n\t[key: string]: string;\n};\n\n/**\n * Properties required for the themeable mixin\n */\nexport interface ThemeableProperties extends WidgetProperties {\n\ttheme?: any;\n\textraClasses?: any;\n}\n\n/**\n * Returned by classes function.\n */\nexport interface ClassesFunctionChain {\n\t(): ClassNameFlags;\n\t/**\n\t * The theme classes to be returned when get() is called\n\t */\n\tclasses: string[];\n\t/**\n\t * The fixed classes to be returned when get() is called\n\t */\n\tfixedClasses: string[];\n\t/**\n\t * Function to pass fixed class names that bypass the theming\n\t * process\n\t */\n\tfixed: (...classes: (string | null)[]) => ClassesFunctionChain;\n\t/**\n\t * Finalize function to return the generated class names\n\t */\n\tget: () => ClassNameFlags;\n}\n\ntype ThemeClasses = { [key: string]: string; };\n\nconst THEME_KEY = ' _key';\n\n/**\n * Interface for the ThemeableMixin\n */\nexport interface ThemeableMixin {\n\n\t/**\n\t * Processes all the possible classes for the instance with setting the passed class names to\n\t * true.\n\t *\n\t * @param ...classNames an array of class names\n\t * @returns a function chain to `get` or process more classes using `fixed`\n\t */\n\tclasses(...classNames: (string | null)[]): ClassesFunctionChain;\n}\n\n/**\n * Decorator for base css classes\n */\nexport function theme (theme: {}) {\n\treturn handleDecorator((target) => {\n\t\ttarget.addDecorator('baseThemeClasses', theme);\n\t});\n}\n\n/**\n * Split class strings containing spaces into separate array entries.\n * ie. ['class1 class2', 'class3] -> ['class1', 'class2', 'class3'];\n *\n * @param classes The array of class strings to split.\n * @return the complete classes array including any split classes.\n */\nfunction splitClassStrings(classes: string[]): string[] {\n\treturn classes.reduce((splitClasses: string[], className) => {\n\t\tif (className.indexOf(' ') > -1) {\n\t\t\tsplitClasses.push(...className.split(' '));\n\t\t}\n\t\telse {\n\t\t\tsplitClasses.push(className);\n\t\t}\n\t\treturn splitClasses;\n\t}, []);\n}\n\n/**\n * Returns the class object map based on the class names and whether they are\n * active.\n *\n * @param className an array of string class names\n * @param applied indicates is the class is applied\n */\nfunction createClassNameObject(classNames: string[], applied: boolean) {\n\treturn classNames.reduce((flaggedClassNames: ClassNameFlags, className) => {\n\t\tflaggedClassNames[className] = applied;\n\t\treturn flaggedClassNames;\n\t}, {});\n}\n\n/**\n * Creates a reverse lookup for the classes passed in via the `theme` function.\n *\n * @param classes The baseClasses object\n * @requires\n */\nfunction createThemeClassesLookup(classes: ThemeClasses[]): ClassNames {\n\treturn classes.reduce((currentClassNames, baseClass) => {\n\t\tObject.keys(baseClass).forEach((key: string) => {\n\t\t\tcurrentClassNames[baseClass[key]] = key;\n\t\t});\n\t\treturn currentClassNames;\n\t}, <ClassNames> {});\n}\n\n/**\n * Function that returns a class decorated with with Themeable functionality\n */\nexport function ThemeableMixin<T extends Constructor<WidgetBase<ThemeableProperties>>>(base: T): T & Constructor<ThemeableMixin> {\n\tclass Themeable extends base {\n\n\t\t/**\n\t\t * The Themeable baseClasses\n\t\t */\n\t\tprivate _registeredBaseThemes: ThemeClasses[];\n\n\t\t/**\n\t\t * All classes ever seen by the instance\n\t\t */\n\t\tprivate _allClasses: ClassNameFlags = {};\n\n\t\t/**\n\t\t * Reverse lookup of the theme classes\n\t\t */\n\t\tprivate _baseThemeClassesReverseLookup: ClassNames;\n\n\t\t/**\n\t\t * Indicates if classes meta data need to be calculated.\n\t\t */\n\t\tprivate _recalculateClasses = true;\n\n\t\t/**\n\t\t * Map of registered classes\n\t\t */\n\t\tprivate _registeredClassesMap: Map<string, ClassNameFlags> = new Map<string, ClassNameFlags>();\n\n\t\t/**\n\t\t * Loaded theme\n\t\t */\n\t\tprivate _theme: ClassNames = {};\n\n\t\t/**\n\t\t * Function used to add themeable classes to a widget. Returns a chained function 'fixed'\n\t\t * that can be used to pass non-themeable classes to a widget. Filters out any null\n\t\t * values passed.\n\t\t *\n\t\t * @param classNames the classes to be added to the domNode. These classes must come from\n\t\t * the baseClasses passed into the @theme decorator.\n\t\t * @return A function chain continaing the 'fixed' function and a 'get' finaliser function.\n\t\t * Class names passed to the 'fixed' function can be any string.\n\t\t *\n\t\t */\n\t\tpublic classes(...classNames: (string | null)[]): ClassesFunctionChain {\n\t\t\tif (this._recalculateClasses) {\n\t\t\t\tthis.recalculateThemeClasses();\n\t\t\t}\n\n\t\t\tconst themeable = this;\n\t\t\tfunction classesGetter(this: ClassesFunctionChain) {\n\t\t\t\tconst themeClasses = themeable.getThemeClasses(this.classes);\n\t\t\t\tconst fixedClasses = themeable.getFixedClasses(this.fixedClasses);\n\t\t\t\treturn assign({}, themeable._allClasses, themeClasses, fixedClasses);\n\t\t\t}\n\t\t\tconst classesFunctionChain = {\n\t\t\t\tclasses: classNames,\n\t\t\t\tfixedClasses: [],\n\t\t\t\tfixed(this: ClassesFunctionChain, ...classNames: (string | null)[]) {\n\t\t\t\t\tconst filteredClassNames = <string[]> classNames.filter((className) => className !== null);\n\t\t\t\t\tthis.fixedClasses.push(...filteredClassNames);\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tget: classesGetter\n\t\t\t};\n\n\t\t\treturn assign(classesGetter.bind(classesFunctionChain), classesFunctionChain);\n\t\t}\n\n\t\t/**\n\t\t * Get theme class object from classNames\n\t\t */\n\t\tprivate getThemeClasses(classNames: string[]): ClassNameFlags  {\n\t\t\treturn classNames\n\t\t\t\t.filter((className) => className !== null)\n\t\t\t\t.reduce((appliedClasses: {}, className: string) => {\n\t\t\t\t\tif (!this._baseThemeClassesReverseLookup[className]) {\n\t\t\t\t\t\tconsole.warn(`Class name: ${className} not found, use chained 'fixed' method instead`);\n\t\t\t\t\t\treturn appliedClasses;\n\t\t\t\t\t}\n\t\t\t\t\tclassName = this._baseThemeClassesReverseLookup[className];\n\t\t\t\t\tif (!this._registeredClassesMap.has(className)) {\n\t\t\t\t\t\tthis.registerThemeClass(className);\n\t\t\t\t\t}\n\t\t\t\t\treturn assign(appliedClasses, this._registeredClassesMap.get(className));\n\t\t\t\t}, {});\n\t\t}\n\n\t\t/**\n\t\t * Get fixed class object from classNames\n\t\t */\n\t\tprivate getFixedClasses(classNames: string[]): ClassNameFlags {\n\t\t\tconst splitClasses = splitClassStrings(classNames);\n\t\t\tthis.appendToAllClassNames(splitClasses);\n\t\t\treturn createClassNameObject(splitClasses, true);\n\t\t}\n\n\t\t/**\n\t\t * Function fired when properties are changed on the widget.\n\t\t *\n\t\t * @param changedPropertyKeys Array of properties that have changed\n\t\t */\n\t\t@onPropertiesChanged()\n\t\tprotected onPropertiesChanged({ changedPropertyKeys }: PropertiesChangeEvent<this, ThemeableProperties>) {\n\t\t\tconst themeChanged = includes(changedPropertyKeys, 'theme');\n\t\t\tconst extraClassesChanged = includes(changedPropertyKeys, 'extraClasses');\n\n\t\t\tif (themeChanged || extraClassesChanged) {\n\t\t\t\tthis._recalculateClasses = true;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Adds classes to the internal allClasses property\n\t\t *\n\t\t * @param classNames an array of string class names\n\t\t */\n\t\tprivate appendToAllClassNames(classNames: string[]): void {\n\t\t\tconst negativeClassFlags = createClassNameObject(classNames, false);\n\t\t\tthis._allClasses = assign({}, this._allClasses, negativeClassFlags);\n\t\t}\n\n\t\t/**\n\t\t * Register the classes object for the class name and adds the class to the instances `allClasses` object.\n\t\t *\n\t\t * @param className the name of the class to register.\n\t\t */\n\t\tprivate registerThemeClass(className: string) {\n\t\t\tconst { properties: { extraClasses = {} } } = this;\n\t\t\tconst themeClass = this._theme[className] ? this._theme[className] : this.getBaseThemeClass(className);\n\t\t\tconst extraClassNames = extraClasses[className] ? extraClasses[className].split(' ') : [];\n\t\t\tconst cssClassNames = themeClass.split(' ').concat(extraClassNames);\n\t\t\tconst classesObject = cssClassNames.reduce((classesObject, cssClassName) => {\n\t\t\t\tclassesObject[cssClassName] = true;\n\t\t\t\tthis._allClasses[cssClassName] = false;\n\t\t\t\treturn classesObject;\n\t\t\t}, <any> {});\n\t\t\tthis._registeredClassesMap.set(className, classesObject);\n\t\t}\n\n\t\t/**\n\t\t * Recalculate registered classes for current theme.\n\t\t */\n\t\tprivate recalculateThemeClasses() {\n\t\t\tconst { properties: { theme = {} } } = this;\n\t\t\tif (!this._registeredBaseThemes) {\n\t\t\t\tthis._registeredBaseThemes = [ ...this.getDecorator('baseThemeClasses') ].reverse();\n\t\t\t\tthis.checkForDuplicates();\n\t\t\t}\n\t\t\tconst registeredBaseThemeKeys = this._registeredBaseThemes.map((registeredBaseThemeClasses) => {\n\t\t\t\treturn registeredBaseThemeClasses[THEME_KEY];\n\t\t\t});\n\n\t\t\tthis._baseThemeClassesReverseLookup = createThemeClassesLookup(this._registeredBaseThemes);\n\t\t\tthis._theme = registeredBaseThemeKeys.reduce((baseTheme, themeKey) => {\n\t\t\t\treturn assign(baseTheme, theme[themeKey]);\n\t\t\t}, {});\n\n\t\t\tthis._registeredClassesMap.forEach((value, key) => {\n\t\t\t\tthis.registerThemeClass(key);\n\t\t\t});\n\t\t\tthis._recalculateClasses = false;\n\t\t}\n\n\t\t/**\n\t\t * Find the base theme class for the class name\n\t\t */\n\t\tprivate getBaseThemeClass(className: string): string {\n\t\t\tconst registeredBaseTheme = find(this._registeredBaseThemes, (registeredBaseThemeClasses) => {\n\t\t\t\treturn Boolean(registeredBaseThemeClasses[className]);\n\t\t\t});\n\t\t\treturn registeredBaseTheme[className] || '';\n\t\t}\n\n\t\t/**\n\t\t * Check for duplicates across the registered base themes.\n\t\t */\n\t\tprivate checkForDuplicates(): void {\n\t\t\tthis._registeredBaseThemes.forEach((registeredBaseThemeClasses, index) => {\n\t\t\t\tObject.keys(registeredBaseThemeClasses).some((key) => {\n\t\t\t\t\treturn this.isDuplicate(key, registeredBaseThemeClasses);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Search for classname in other base themes\n\t\t */\n\t\tprivate isDuplicate(key: string, originatingBaseTheme: ThemeClasses): boolean {\n\t\t\tlet duplicate = false;\n\t\t\tif (key !== THEME_KEY) {\n\t\t\t\tfor (let i = 0; i < this._registeredBaseThemes.length; i++) {\n\t\t\t\t\tif (originatingBaseTheme === this._registeredBaseThemes[i]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._registeredBaseThemes[i][key]) {\n\t\t\t\t\t\tconsole.warn(`Duplicate base theme class key '${key}' detected, this could cause unexpected results`);\n\t\t\t\t\t\tduplicate = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn duplicate;\n\t\t\t}\n\t\t\treturn duplicate;\n\t\t}\n\t}\n\n\treturn Themeable;\n}\n\nexport default ThemeableMixin;\n\n\n\n// WEBPACK FOOTER //\n// Themeable.ts","import { Actionable } from '@dojo/interfaces/abilities';\nimport { EventedListener, EventedListenerOrArray, EventedListenersMap, EventedCallback } from '@dojo/interfaces/bases';\nimport { EventObject, EventTargettedObject, EventErrorObject, Handle } from '@dojo/interfaces/core';\nimport Map from '@dojo/shim/Map';\nimport { on as aspectOn } from './aspect';\nimport { Destroyable } from './Destroyable';\n\n/**\n * Determines is the value is Actionable (has a `.do` function)\n *\n * @param value the value to check\n * @returns boolean indicating is the value is Actionable\n */\nfunction isActionable(value: any): value is Actionable<any, any> {\n\treturn Boolean(value && typeof value.do === 'function');\n}\n\n/**\n * Resolve listeners.\n */\nfunction resolveListener<T, E extends EventTargettedObject<T>>(listener: EventedListener<T, E>): EventedCallback<E> {\n\treturn isActionable(listener) ? (event: E) => listener.do({ event }) : listener;\n}\n\n/**\n * Handles an array of handles\n *\n * @param handles an array of handles\n * @returns a single Handle for handles passed\n */\nfunction handlesArraytoHandle(handles: Handle[]): Handle {\n\treturn {\n\t\tdestroy() {\n\t\t\thandles.forEach((handle) => handle.destroy());\n\t\t}\n\t};\n}\n\n/**\n * Interface for Evented constructor options\n */\nexport interface EventedOptions {\n\t/**\n\t * Optional listeners to add\n\t */\n\tlisteners?: EventedListenersMap<any>;\n}\n\nexport interface BaseEventedEvents {\n\t/**\n\t * Regsister a callback for a specific event type\n\t *\n\t * @param listeners map of listeners\n\t */\n\t(listeners: EventedListenersMap<Evented>): Handle;\n\n\t/**\n\t * @param type the type of the event\n\t * @param listener the listener to attach\n\t */\n\t(type: string, listener: EventedListenerOrArray<Evented, EventTargettedObject<Evented>>): Handle;\n\n\t/**\n\t * @param type the type for `error`\n\t * @param listener the listener to attach\n\t */\n\t(type: 'error', listener: EventedListenerOrArray<Evented, EventErrorObject<Evented>>): Handle;\n}\n\nexport interface Evented {\n\ton: BaseEventedEvents;\n}\n\n/**\n * Map of computed regular expressions, keyed by string\n */\nconst regexMap = new Map<string, RegExp>();\n\n/**\n * Determines is the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nexport function isGlobMatch(globString: string, targetString: string): boolean {\n\tif (globString.indexOf('*') !== -1) {\n\t\tlet regex: RegExp;\n\t\tif (regexMap.has(globString)) {\n\t\t\tregex = regexMap.get(globString)!;\n\t\t}\n\t\telse {\n\t\t\tregex = new RegExp(`^${ globString.replace(/\\*/g, '.*') }$`);\n\t\t\tregexMap.set(globString, regex);\n\t\t}\n\t\treturn regex.test(targetString);\n\n\t} else {\n\t\treturn globString === targetString;\n\t}\n}\n\n/**\n * Event Class\n */\nexport class Evented extends Destroyable implements Evented {\n\n\t/**\n\t * map of listeners keyed by event type\n\t */\n\tprotected listenersMap: Map<string, EventedCallback<EventObject>> = new Map<string, EventedCallback<EventObject>>();\n\n\t/**\n\t * @constructor\n\t * @param options The constructor argurments\n\t */\n\tconstructor(options: EventedOptions = {}) {\n\t\tsuper();\n\t\tconst { listeners } = options;\n\t\tif (listeners) {\n\t\t\tthis.own(this.on(listeners));\n\t\t}\n\t}\n\n\t/**\n\t * Emits the event objet for the specified type\n\t *\n\t * @param event the event to emit\n\t */\n\temit<E extends EventObject>(event: E): void {\n\t\tthis.listenersMap.forEach((method, type) => {\n\t\t\tif (isGlobMatch(type, event.type)) {\n\t\t\t\tmethod.call(this, event);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Catch all handler for various call signatures. The signatures are defined in\n\t * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n\t * `BaseEventedEvents`.  See example for details.\n\t *\n\t * @param args\n\t *\n\t * @example\n\t *\n\t * interface WidgetBaseEvents extends BaseEventedEvents {\n\t *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n\t * }\n\t * class WidgetBase extends Evented {\n\t *    on: WidgetBaseEvents;\n\t * }\n\t *\n\t * @return {any}\n\t */\n\ton: BaseEventedEvents = function (this: Evented, ...args: any[]) {\n\t\tif (args.length === 2) {\n\t\t\tconst [ type, listeners ] = <[ string, EventedListenerOrArray<any, EventTargettedObject<any>>]> args;\n\t\t\tif (Array.isArray(listeners)) {\n\t\t\t\tconst handles = listeners.map((listener) => aspectOn(this.listenersMap, type, resolveListener(listener)));\n\t\t\t\treturn handlesArraytoHandle(handles);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn aspectOn(this.listenersMap, type, resolveListener(listeners));\n\t\t\t}\n\t\t}\n\t\telse if (args.length === 1) {\n\t\t\tconst [ listenerMapArg ] = <[EventedListenersMap<any>]> args;\n\t\t\tconst handles = Object.keys(listenerMapArg).map((type) => this.on(type, listenerMapArg[type]));\n\t\t\treturn handlesArraytoHandle(handles);\n\t\t}\n\t\telse {\n\t\t\tthrow new TypeError('Invalid arguments');\n\t\t}\n\t};\n}\n\nexport default Evented;\n\n\n\n// WEBPACK FOOTER //\n// Evented.ts","import { ArrayLike } from './interfaces';\nimport { hasClass } from './support/decorators';\nimport global from './support/global';\nimport { forOf, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport { is as objectIs } from './object';\nimport './Symbol';\n\nexport namespace Shim {\n\t/**\n\t * An implementation analogous to the Map specification in ES2015.\n\t */\n\texport class Map<K, V> {\n\t\tprotected readonly _keys: K[] = [];\n\t\tprotected readonly _values: V[] = [];\n\n\t\t/**\n\t\t * An alternative to Array.prototype.indexOf using Object.is\n\t\t * to check for equality. See http://mzl.la/1zuKO2V\n\t\t */\n\t\tprotected _indexOfKey(keys: K[], key: K): number {\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tif (objectIs(keys[i], key)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\t/**\n\t\t * Creates a new Map\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param iterator\n\t\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t\t * The first item in each tuple corresponds to the key of the map entry.\n\t\t * The second item corresponds to the value of the map entry.\n\t\t */\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tif (iterable) {\n\t\t\t\tforOf(iterable, (value: [K, V]) => {\n\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Returns the number of key / value pairs in the Map.\n\t\t *\n\t\t * @return the number of key / value pairs in the Map\n\t\t */\n\t\tget size(): number {\n\t\t\treturn this._keys.length;\n\t\t}\n\n\t\t/**\n\t\t * Deletes all keys and their associated values.\n\t\t */\n\t\tclear(): void {\n\t\t\tthis._keys.length = this._values.length = 0;\n\t\t}\n\n\t\t/**\n\t\t * Deletes a given key and its associated value.\n\t\t *\n\t\t * @param key The key to delete\n\t\t * @return true if the key exists, false if it does not\n\t\t */\n\t\tdelete(key: K): boolean {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\tif (index < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._keys.splice(index, 1);\n\t\t\tthis._values.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\n\t\t * Returns an iterator that yields each key/value pair as an array.\n\t\t *\n\t\t * @return An iterator for each key/value pair in the instance.\n\t\t */\n\t\tentries(): IterableIterator<[K, V]> {\n\t\t\tconst values = this._keys.map((key: K, i: number): [K, V] => {\n\t\t\t\treturn [ key, this._values[i] ];\n\t\t\t});\n\n\t\t\treturn new ShimIterator<[K, V]>(values);\n\t\t}\n\n\t\t/**\n\t\t * Executes a given function for each map entry. The function\n\t\t * is invoked with three arguments: the element value, the\n\t\t * element key, and the associated Map instance.\n\t\t *\n\t\t * @param callback The function to execute for each map entry,\n\t\t * @param context The value to use for `this` for each execution of the calback\n\t\t */\n\t\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}) {\n\t\t\tconst keys = this._keys;\n\t\t\tconst values = this._values;\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tcallback.call(context, values[i], keys[i], this);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Returns the value associated with a given key.\n\t\t *\n\t\t * @param key The key to look up\n\t\t * @return The value if one exists or undefined\n\t\t */\n\t\tget(key: K): V | undefined {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\treturn index < 0 ? undefined : this._values[index];\n\t\t}\n\n\t\t/**\n\t\t * Checks for the presence of a given key.\n\t\t *\n\t\t * @param key The key to check for\n\t\t * @return true if the key exists, false if it does not\n\t\t */\n\t\thas(key: K): boolean {\n\t\t\treturn this._indexOfKey(this._keys, key) > -1;\n\t\t}\n\n\t\t/**\n\t\t * Returns an iterator that yields each key in the map.\n\t\t *\n\t\t * @return An iterator containing the instance's keys.\n\t\t */\n\t\tkeys(): IterableIterator<K> {\n\t\t\treturn new ShimIterator<K>(this._keys);\n\t\t}\n\n\t\t/**\n\t\t * Sets the value associated with a given key.\n\t\t *\n\t\t * @param key The key to define a value to\n\t\t * @param value The value to assign\n\t\t * @return The Map instance\n\t\t */\n\t\tset(key: K, value: V): Map<K, V> {\n\t\t\tlet index = this._indexOfKey(this._keys, key);\n\t\t\tindex = index < 0 ? this._keys.length : index;\n\t\t\tthis._keys[index] = key;\n\t\t\tthis._values[index] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n\t\t * Returns an iterator that yields each value in the map.\n\t\t *\n\t\t * @return An iterator containing the instance's values.\n\t\t */\n\t\tvalues(): IterableIterator<V> {\n\t\t\treturn new ShimIterator<V>(this._values);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\t\treturn this.entries();\n\t\t}\n\n\t\t[Symbol.toStringTag] = 'Map';\n\t}\n}\n\n@hasClass('es6-map', global.Map, Shim.Map)\nexport default class Map<K, V> {\n\t/* istanbul ignore next */\n\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) { };\n\n\t/* istanbul ignore next */\n\tget size(): number { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tclear(): void { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tdelete(key: K): boolean { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tentries(): IterableIterator<[K, V]> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}): void { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tget(key: K): V | undefined { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\thas(key: K): boolean { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tkeys(): IterableIterator<K> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tset(key: K, value: V): Map<K, V> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tvalues(): IterableIterator<V> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\t[Symbol.iterator](): IterableIterator<[K, V]> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\t[Symbol.toStringTag] = 'Map';\n}\n\n\n\n// WEBPACK FOOTER //\n// Map.ts","import { Thenable } from './interfaces';\nimport global from './support/global';\nimport { queueMicroTask } from './support/queue';\nimport { forOf, Iterable } from './iterator';\nimport './Symbol';\nimport { hasClass } from './support/decorators';\nimport has from './support/has';\n\n/**\n * Executor is the interface for functions used to initialize a Promise.\n */\nexport interface Executor<T> {\n\t/**\n\t * The executor for the promise\n\t *\n\t * @param resolve The resolver callback of the promise\n\t * @param reject The rejector callback of the promise\n\t */\n\t(resolve: (value?: T | Thenable<T>) => void, reject: (reason?: any) => void): void;\n}\n\nmodule Shim {\n\n\t/**\n\t * The State enum represents the possible states of a promise.\n\t */\n\texport const enum State {\n\t\tFulfilled,\n\t\tPending,\n\t\tRejected\n\t}\n\n\t/**\n\t * Returns true if a given value has a `then` method.\n\t * @param {any} value The value to check if is Thenable\n\t * @returns {is Thenable<T>} A type guard if the value is thenable\n\t */\n\texport function isThenable<T>(value: any): value is Thenable<T> {\n\t\treturn value && typeof value.then === 'function';\n\t}\n\n\t/**\n\t * Promise is a partial implementation of the ES2015 Promise specification. It relies on Promise to do some safety\n\t * checks such as verifying that a Promise isn't resolved with itself. This class is exported for testability, and is\n\t * not intended to be used directly.\n\t *\n\t * @borrows Promise.all as Promise.all\n\t * @borrows Promise.race as Promise.race\n\t * @borrows Promise.reject as Promise.reject\n\t * @borrows Promise.resolve as Promise.resolve\n\t * @borrows Promise#catch as Promise#catch\n\t * @borrows Promise#then as Promise#then\n\t */\n\texport class Promise<T> implements Thenable<T> {\n\t\tstatic all<T>(iterable: Iterable<(T | Thenable<T>)> | (T | Thenable<T>)[]): Promise<T[]> {\n\t\t\treturn new this(function (resolve, reject) {\n\t\t\t\tconst values: T[] = [];\n\t\t\t\tlet complete = 0;\n\t\t\t\tlet total = 0;\n\t\t\t\tlet populating = true;\n\n\t\t\t\tfunction fulfill(index: number, value: any): void {\n\t\t\t\t\tvalues[ index ] = value;\n\t\t\t\t\t++complete;\n\t\t\t\t\tfinish();\n\t\t\t\t}\n\n\t\t\t\tfunction finish(): void {\n\t\t\t\t\tif (populating || complete < total) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(values);\n\t\t\t\t}\n\n\t\t\t\tfunction processItem(index: number, item: (T | Thenable<T>)): void {\n\t\t\t\t\t++total;\n\t\t\t\t\tif (isThenable(item)) {\n\t\t\t\t\t\t// If an item Promise rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(fulfill.bind(null, index), reject);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tPromise.resolve(item).then(fulfill.bind(null, index));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet i = 0;\n\t\t\t\tforOf(iterable, function (value: T | Thenable<T>) {\n\t\t\t\t\tprocessItem(i, value);\n\t\t\t\t\ti++;\n\t\t\t\t});\n\t\t\t\tpopulating = false;\n\n\t\t\t\tfinish();\n\t\t\t});\n\t\t}\n\n\t\tstatic race<T>(iterable: Iterable<(T | Thenable<T>)> | (T | Thenable<T>)[]): Promise<T[]> {\n\t\t\treturn new this(function (resolve, reject) {\n\t\t\t\tforOf(iterable, function (item: T | Thenable<T>) {\n\t\t\t\t\tif (item instanceof Promise) {\n\t\t\t\t\t\t// If a Promise item rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(resolve, reject);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tPromise.resolve(item).then(resolve);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tstatic reject<T>(reason?: any): Promise<T> {\n\t\t\treturn new this(function (resolve, reject) {\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t}\n\n\t\tstatic resolve(): Promise<void>;\n\t\tstatic resolve<T>(value: (T | Thenable<T>)): Promise<T>;\n\t\tstatic resolve<T>(value?: any): Promise<T> {\n\t\t\treturn new this(function (resolve) {\n\t\t\t\tresolve(<T> value);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Creates a new Promise.\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param executor\n\t\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t\t * starting the asynchronous operation when it is invoked.\n\t\t *\n\t\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t\t * successfully, or the `reject` function when the operation fails.\n\t\t */\n\t\tconstructor(executor: Executor<T>) {\n\t\t\t/**\n\t\t\t * If true, the resolution of this promise is chained (\"locked in\") to another promise.\n\t\t\t */\n\t\t\tlet isChained = false;\n\n\t\t\t/**\n\t\t\t * Whether or not this promise is in a resolved state.\n\t\t\t */\n\t\t\tconst isResolved = (): boolean => {\n\t\t\t\treturn this.state !== State.Pending || isChained;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Callbacks that should be invoked once the asynchronous operation has completed.\n\t\t\t */\n\t\t\tlet callbacks: null | (Array<() => void>) = [];\n\n\t\t\t/**\n\t\t\t * Initially pushes callbacks onto a queue for execution once this promise settles. After the promise settles,\n\t\t\t * enqueues callbacks for execution on the next event loop turn.\n\t\t\t */\n\t\t\tlet whenFinished = function (callback: () => void): void {\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.push(callback);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Settles this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst settle = (newState: State, value: any): void => {\n\t\t\t\t// A promise can only be settled once.\n\t\t\t\tif (this.state !== State.Pending) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.state = newState;\n\t\t\t\tthis.resolvedValue = value;\n\t\t\t\twhenFinished = queueMicroTask;\n\n\t\t\t\t// Only enqueue a callback runner if there are callbacks so that initially fulfilled Promises don't have to\n\t\t\t\t// wait an extra turn.\n\t\t\t\tif (callbacks && callbacks.length > 0) {\n\t\t\t\t\tqueueMicroTask(function (): void {\n\t\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\t\tlet count = callbacks.length;\n\t\t\t\t\t\t\tfor (let i = 0; i < count; ++i) {\n\t\t\t\t\t\t\t\tcallbacks[ i ].call(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallbacks = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Resolves this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst resolve = (newState: State, value: any): void => {\n\t\t\t\tif (isResolved()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isThenable(value)) {\n\t\t\t\t\tvalue.then(\n\t\t\t\t\t\tsettle.bind(null, State.Fulfilled),\n\t\t\t\t\t\tsettle.bind(null, State.Rejected)\n\t\t\t\t\t);\n\t\t\t\t\tisChained = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsettle(newState, value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.then = <U>(onFulfilled?: (value?: T) => (U | Promise<U>),\n\t\t\t\t\t\t\tonRejected?: (reason?: any) => (U | Promise<U>)): Promise<U> => {\n\t\t\t\treturn new Promise<U>((resolve, reject) => {\n\t\t\t\t\t// whenFinished initially queues up callbacks for execution after the promise has settled. Once the\n\t\t\t\t\t// promise has settled, whenFinished will schedule callbacks for execution on the next turn through the\n\t\t\t\t\t// event loop.\n\t\t\t\t\twhenFinished(() => {\n\t\t\t\t\t\tconst callback: ((value?: any) => any) | undefined = this.state === State.Rejected ? onRejected : onFulfilled;\n\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tresolve(callback(this.resolvedValue));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.state === State.Rejected) {\n\t\t\t\t\t\t\treject(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tresolve(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t(<Executor<T>> executor)(\n\t\t\t\t\tresolve.bind(null, State.Fulfilled),\n\t\t\t\t\tresolve.bind(null, State.Rejected)\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tsettle(State.Rejected, error);\n\t\t\t}\n\t\t}\n\n\t\tcatch<U>(onRejected: (reason: any) => (U | Thenable<U>)): Promise<U> {\n\t\t\treturn this.then<U>(undefined, onRejected);\n\t\t}\n\n\t\t/**\n\t\t * The current state of this promise.\n\t\t */\n\t\tprivate state = State.Pending;\n\n\t\t/**\n\t\t * The resolved value for this promise.\n\t\t *\n\t\t * @type {T|any}\n\t\t */\n\t\tprivate resolvedValue: any;\n\n\t\tthen: <U>(onFulfilled?: (value: T) => (U | Thenable<U>), onRejected?: (reason: any) => (U | Thenable<U>)) => Promise<U>;\n\n\t\t[Symbol.toStringTag] = 'Promise';\n\t}\n}\n\n@hasClass('es6-promise', global.Promise, Shim.Promise)\nexport default class Promise<T> implements Thenable<T> {\n\t/**\n\t * Creates a new Promise.\n\t *\n\t * @constructor\n\t *\n\t * @param executor\n\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t * starting the asynchronous operation when it is invoked.\n\t *\n\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t * successfully, or the `reject` function when the operation fails.\n\t */\n\t/* istanbul ignore next */\n\tconstructor(executor: Executor<T>) {\n\t}\n\n\t/**\n\t * Converts an iterable object containing promises into a single promise that resolves to a new iterable object\n\t * containing the fulfilled values of all the promises in the iterable, in the same order as the Promises in the\n\t * iterable. Iterable values that are not promises are converted to promises using Promise.resolve.\n\t *\n\t * @example\n\t * Promise.all([ Promise.resolve('foo'), 'bar' ]).then(function (value) {\n\t *     value[0] === 'foo'; // true\n\t *     value[1] === 'bar'; // true\n\t * });\n\t *\n\t * @example\n\t * Promise.all({\n\t *     foo: Promise.resolve('foo'),\n\t *     bar: 'bar'\n\t * }).then((value) => {\n\t *     value.foo === 'foo'; // true\n\t *     value.bar === 'bar'; // true\n\t * });\n\t */\n\t/* istanbul ignore next */\n\tstatic all<T>(iterable: (T | Thenable<T>)[] | Iterable<(T | Thenable<T>)>): Promise<T[]> {\n\t\tthrow new Error();\n\t};\n\n\t/**\n\t * Converts an iterable object containing promises into a single promise that resolves or rejects as soon as one of\n\t * the promises in the iterable resolves or rejects, with the value of the resolved or rejected promise. Values in\n\t * the iterable that are not Promises are converted to Promises with Promise.resolve.\n\t *\n\t * @example\n\t * Promise.race([ Promise.resolve('foo'), Promise.resolve('bar') ]).then((value) => {\n\t *     value === 'foo'; // true\n\t * });\n\t *\n\t * @example\n\t * Promise.race({\n\t *     foo: Promise.resolve('foo'),\n\t *     bar: Promise.resolve('bar')\n\t * }).then((value) => {\n\t *     value === 'foo'; // true\n\t * });\n\t */\n\t/* istanbul ignore next */\n\tstatic race<T>(iterable: Iterable<(T | Thenable<T>)> |  (T | Thenable<T>)[]): Promise<T> {\n\t\tthrow new Error();\n\t}\n\n\t/**\n\t * Creates a new promise that is rejected with the given error.\n\t */\n\t/* istanbul ignore next */\n\tstatic reject<T>(reason?: any): Promise<any> {\n\t\tthrow new Error();\n\t}\n\n\t/**\n\t * Creates a new promise that is resolved with the given value.\n\t */\n\tstatic resolve(): Promise<void>;\n\tstatic resolve<T>(value: (T | Thenable<T>)): Promise<T>;\n\t/* istanbul ignore next */\n\tstatic resolve<T>(value?: any): Promise<T> {\n\t\tthrow new Error();\n\t}\n\n\t/**\n\t * Adds a callback to the promise to be invoked when the asynchronous operation throws an error.\n\t */\n\tcatch(onRejected: (reason: Error) => T | Thenable<T> | void): Promise<T>;\n\t/* istanbul ignore next */\n\tcatch<U>(onRejected: (reason: Error) => U | Thenable<U>): Promise<U> {\n\t\tthrow new Error();\n\t}\n\n\tthen<U, V>(onFulfilled: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected: (reason: Error) => (V | Thenable<V>)): Promise<U | V>;\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => void): Promise<U>;\n\t/* istanbul ignore next */\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => (U | Thenable<U>)): Promise<U> {\n\t\tthrow new Error();\n\t}\n}\n\nglobal.Promise = has('es6-promise') ? global.Promise : Shim.Promise;\n\ndeclare global {\n\tclass Promise<T> implements Thenable<T> {\n\t\t/**\n\t\t * Creates a new Promise.\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param executor\n\t\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t\t * starting the asynchronous operation when it is invoked.\n\t\t *\n\t\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t\t * successfully, or the `reject` function when the operation fails.\n\t\t */\n\t\tconstructor(executor: Executor<T>);\n\n\t\t/**\n\t\t * Converts an iterable object containing promises into a single promise that resolves to a new iterable object\n\t\t * containing the fulfilled values of all the promises in the iterable, in the same order as the Promises in the\n\t\t * iterable. Iterable values that are not promises are converted to promises using Promise.resolve.\n\t\t *\n\t\t * @example\n\t\t * Promise.all([ Promise.resolve('foo'), 'bar' ]).then(function (value) {\n\t\t *     value[0] === 'foo'; // true\n\t\t *     value[1] === 'bar'; // true\n\t\t * });\n\t\t *\n\t\t * @example\n\t\t * Promise.all({\n\t\t *     foo: Promise.resolve('foo'),\n\t\t *     bar: 'bar'\n\t\t * }).then((value) => {\n\t\t *     value.foo === 'foo'; // true\n\t\t *     value.bar === 'bar'; // true\n\t\t * });\n\t\t */\n\t\tstatic all<T>(iterable: (T | Thenable<T>)[] | Iterable<(T | Thenable<T>)>): Promise<T[]>;\n\n\t\t/**\n\t\t * Converts an iterable object containing promises into a single promise that resolves or rejects as soon as one of\n\t\t * the promises in the iterable resolves or rejects, with the value of the resolved or rejected promise. Values in\n\t\t * the iterable that are not Promises are converted to Promises with Promise.resolve.\n\t\t *\n\t\t * @example\n\t\t * Promise.race([ Promise.resolve('foo'), Promise.resolve('bar') ]).then((value) => {\n\t\t *     value === 'foo'; // true\n\t\t * });\n\t\t *\n\t\t * @example\n\t\t * Promise.race({\n\t\t *     foo: Promise.resolve('foo'),\n\t\t *     bar: Promise.resolve('bar')\n\t\t * }).then((value) => {\n\t\t *     value === 'foo'; // true\n\t\t * });\n\t\t */\n\t\tstatic race<T>(iterable: Iterable<(T | Thenable<T>)> |  (T | Thenable<T>)[]): Promise<T>;\n\n\t\t/**\n\t\t * Creates a new promise that is rejected with the given error.\n\t\t */\n\t\tstatic reject<T>(reason?: any): Promise<T>;\n\n\t\t/**\n\t\t * Creates a new promise that is resolved with the given value.\n\t\t */\n\t\tstatic resolve(): Promise<void>;\n\t\tstatic resolve<T>(value: (T | Thenable<T>)): Promise<T>;\n\t\tstatic resolve<T>(value?: any): Promise<T>;\n\n\t\t/**\n\t\t * Adds a callback to the promise to be invoked when the asynchronous operation throws an error.\n\t\t */\n\t\tcatch(onRejected: (reason: Error) => T | Thenable<T> | void): Promise<T>;\n\t\tcatch<U>(onRejected: (reason: Error) => U | Thenable<U>): Promise<U>;\n\n\t\tthen<U, V>(onFulfilled: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected: (reason: Error) => (V | Thenable<V>)): Promise<U | V>;\n\t\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => void): Promise<U>;\n\t\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => (U | Thenable<U>)): Promise<U>;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// Promise.ts","import { ArrayLike } from './interfaces';\nimport { hasClass } from './support/decorators';\nimport global from './support/global';\nimport { forOf, Iterable } from './iterator';\nimport './Symbol';\n\nmodule Shim {\n\tconst DELETED: any = {};\n\n\tinterface Entry<K, V> {\n\t\tkey: K;\n\t\tvalue: V;\n\t}\n\n\tfunction getUID(): number {\n\t\treturn Math.floor(Math.random() * 100000000);\n\t}\n\n\tlet generateName = (function () {\n\t\tlet startId = Math.floor(Date.now() % 100000000);\n\n\t\treturn function generateName(): string {\n\t\t\treturn '__wm' + getUID() + (startId++ + '__');\n\t\t};\n\t})();\n\n\texport class WeakMap<K, V> {\n\t\tprivate readonly _name: string;\n\t\tprivate readonly _frozenEntries: Entry<K, V>[];\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tObject.defineProperty(this, '_name', {\n\t\t\t\tvalue: generateName()\n\t\t\t});\n\n\t\t\tthis._frozenEntries = [];\n\n\t\t\tif (iterable) {\n\t\t\t\tforOf(iterable, ([ key, value ]: [K, V]) => this.set(key, value));\n\t\t\t}\n\t\t}\n\n\t\tprivate _getFrozenEntryIndex(key: any): number {\n\t\t\tfor (let i = 0; i < this._frozenEntries.length; i++) {\n\t\t\t\tif (this._frozenEntries[i].key === key) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tdelete(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\tentry.value = DELETED;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\tthis._frozenEntries.splice(frozenIndex, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tget(key: any): V | undefined {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\treturn entry.value;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn this._frozenEntries[frozenIndex].value;\n\t\t\t}\n\t\t}\n\n\t\thas(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tset(key: any, value?: any): Shim.WeakMap<K, V> {\n\t\t\tif (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n\t\t\t\tthrow new TypeError('Invalid value used as weak map key');\n\t\t\t}\n\t\t\tlet entry: Entry<K, V> = key[this._name];\n\t\t\tif (!entry || entry.key !== key) {\n\t\t\t\tentry = Object.create(null, {\n\t\t\t\t\tkey: { value: key }\n\t\t\t\t});\n\n\t\t\t\tif (Object.isFrozen(key)) {\n\t\t\t\t\tthis._frozenEntries.push(entry);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tObject.defineProperty(key, this._name, {\n\t\t\t\t\t\tvalue: entry\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry.value = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t[Symbol.toStringTag] = 'WeakMap';\n\t}\n}\n\n@hasClass('es6-weakmap', global.WeakMap, Shim.WeakMap)\nexport default class WeakMap<K, V> {\n\t/* istanbul ignore next */\n\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {}\n\n\t/* istanbul ignore next */\n\tdelete(key: K): boolean { throw new Error(); }\n\t/* istanbul ignore next */\n\tget(key: K): V { throw new Error(); }\n\t/* istanbul ignore next */\n\thas(key: K): boolean { throw new Error(); }\n\t/* istanbul ignore next */\n\tset(key: K, value?: V): WeakMap<K, V> { throw new Error(); }\n\t/* istanbul ignore next */\n\t[Symbol.toStringTag] = 'WeakMap';\n}\n\n\n\n// WEBPACK FOOTER //\n// WeakMap.ts","import has from './has';\n\n/**\n * A class decorator that provides either a native class or a shimmed class based on a feature\n * test\n * @param feature The has feature to check\n * @param trueClass The class to use if feature test returns `true`\n * @param falseClass The class to use if the feature test returns `false` or is not defined\n */\nexport function hasClass(feature: string, trueClass: Function, falseClass: Function): ClassDecorator {\n\treturn function (target: Function): Function {\n\t\treturn has(feature) ? trueClass : falseClass;\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// decorators.ts","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 13\n// module chunks = 0","import { Hash } from '@dojo/interfaces/core';\nimport { duplicate } from './lang';\n\n/**\n * Object with string keys and string or string array values that describes a query string.\n */\nexport type ParamList = Hash<string | string[]>;\n\n/**\n * Parses a query string, returning a ParamList object.\n */\nfunction parseQueryString(input: string): ParamList {\n\tconst query: Hash<string[]> = {};\n\tfor (const entry of input.split('&')) {\n\t\tconst indexOfFirstEquals = entry.indexOf('=');\n\t\tlet key: string;\n\t\tlet value = '';\n\n\t\tif (indexOfFirstEquals >= 0) {\n\t\t\tkey = entry.slice(0, indexOfFirstEquals);\n\t\t\tvalue = entry.slice(indexOfFirstEquals + 1);\n\t\t} else {\n\t\t\tkey = entry;\n\t\t}\n\n\t\tkey = key ? decodeURIComponent(key) : '';\n\t\tvalue = value ? decodeURIComponent(value) : '';\n\n\t\tif (key in query) {\n\t\t\tquery[key].push(value);\n\t\t}\n\t\telse {\n\t\t\tquery[key] = [ value ];\n\t\t}\n\t}\n\treturn query;\n}\n\n/**\n * Represents a set of URL query search parameters.\n */\nexport default class UrlSearchParams {\n\t/**\n\t * Constructs a new UrlSearchParams from a query string, an object of parameters and values, or another\n\t * UrlSearchParams.\n\t */\n\tconstructor(input?: string | ParamList | UrlSearchParams) {\n\t\tlet list: ParamList;\n\n\t\tif (input instanceof UrlSearchParams) {\n\t\t\t// Copy the incoming UrlSearchParam's internal list\n\t\t\tlist = <ParamList> duplicate(input._list);\n\t\t}\n\t\telse if (typeof input === 'object') {\n\t\t\t// Copy the incoming object, assuming its property values are either arrays or strings\n\t\t\tlist = {};\n\t\t\tfor (const key in input) {\n\t\t\t\tconst value = (<ParamList> input)[key];\n\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tlist[key] = value.length ? value.slice() : [ '' ];\n\t\t\t\t}\n\t\t\t\telse if (value == null) {\n\t\t\t\t\tlist[key] = [ '' ];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlist[key] = [ <string> value ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (typeof input === 'string') {\n\t\t\t// Parse the incoming string as a query string\n\t\t\tlist = parseQueryString(input);\n\t\t}\n\t\telse {\n\t\t\tlist = {};\n\t\t}\n\n\t\tObject.defineProperty(this, '_list', { value: list });\n\t}\n\n\t/**\n\t * Maps property keys to arrays of values. The value for any property that has been set will be an array containing\n\t * at least one item. Properties that have been deleted will have a value of 'undefined'.\n\t */\n\tprotected readonly _list: Hash<string[] | undefined>;\n\n\t/**\n\t * Appends a new value to the set of values for a key.\n\t * @param key The key to add a value for\n\t * @param value The value to add\n\t */\n\tappend(key: string, value: string): void {\n\t\tif (!this.has(key)) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t\telse {\n\t\t\tconst values = this._list[key];\n\t\t\tif (values) {\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes all values for a key.\n\t * @param key The key whose values are to be removed\n\t */\n\tdelete(key: string): void {\n\t\t// Set to undefined rather than deleting the key, for better consistency across browsers.\n\t\t// If a deleted key is re-added, most browsers put it at the end of iteration order, but IE maintains\n\t\t// its original position.  This approach maintains the original position everywhere.\n\t\tthis._list[key] = undefined;\n\t}\n\n\t/**\n\t * Returns the first value associated with a key.\n\t * @param key The key to return the first value for\n\t * @return The first string value for the key\n\t */\n\tget(key: string): string | undefined {\n\t\tif (!this.has(key)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst value = this._list[key];\n\t\treturn value ? value[0] : undefined;\n\t}\n\n\t/**\n\t * Returns all the values associated with a key.\n\t * @param key The key to return all values for\n\t * @return An array of strings containing all values for the key\n\t */\n\tgetAll(key: string): string[] | undefined {\n\t\tif (!this.has(key)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._list[key];\n\t}\n\n\t/**\n\t * Returns true if a key has been set to any value, false otherwise.\n\t * @param key The key to test for existence\n\t * @return A boolean indicating if the key has been set\n\t */\n\thas(key: string): boolean {\n\t\treturn Array.isArray(this._list[key]);\n\t}\n\n\t/**\n\t * Returns an array of all keys which have been set.\n\t * @return An array of strings containing all keys set in the UrlSearchParams instance\n\t */\n\tkeys(): string[] {\n\t\tconst keys: string[] = [];\n\n\t\tfor (const key in this._list) {\n\t\t\tif (this.has(key)) {\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n\n\t/**\n\t * Sets the value associated with a key.\n\t * @param key The key to set the value of\n\t */\n\tset(key: string, value: string): void {\n\t\tthis._list[key] = [ value ];\n\t}\n\n\t/**\n\t * Returns this object's data as an encoded query string.\n\t * @return A string in application/x-www-form-urlencoded format containing all of the set keys/values\n\t */\n\ttoString(): string {\n\t\tconst query: string[] = [];\n\n\t\tfor (const key in this._list) {\n\t\t\tif (!this.has(key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst values = this._list[key];\n\t\t\tif (values) {\n\t\t\t\tconst encodedKey = encodeURIComponent(key);\n\t\t\t\tfor (const value of values) {\n\t\t\t\t\tquery.push(encodedKey + (value ? ('=' + encodeURIComponent(value)) : ''));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn query.join('&');\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// UrlSearchParams.ts","import { ArrayLike } from './interfaces';\nimport has from './support/has';\nimport { wrapNative } from './support/util';\nimport { forOf, isArrayLike, isIterable, Iterable } from './iterator';\nimport { MAX_SAFE_INTEGER as maxSafeInteger } from './number';\n\nexport interface MapCallback<T, U> {\n\t/**\n\t * A callback function when mapping\n\t *\n\t * @param element The element that is currently being mapped\n\t * @param index The current index of the element\n\t */\n\t(element: T, index: number): U;\n}\n\nexport interface FindCallback<T> {\n\t/**\n\t * A callback function when using find\n\t *\n\t * @param element The element that is currenty being analysed\n\t * @param index The current index of the element that is being analysed\n\t * @param array The source array\n\t */\n\t(element: T, index: number, array: ArrayLike<T>): boolean;\n}\n\n/**\n * Ensures a non-negative, non-infinite, safe integer.\n *\n * @param length The number to validate\n * @return A proper length\n */\nfunction toLength(length: number): number {\n\tlength = Number(length);\n\tif (isNaN(length)) {\n\t\treturn 0;\n\t}\n\tif (isFinite(length)) {\n\t\tlength = Math.floor(length);\n\t}\n\t// Ensure a non-negative, real, safe integer\n\treturn Math.min(Math.max(length, 0), maxSafeInteger);\n}\n\n/**\n * From ES6 7.1.4 ToInteger()\n *\n * @param value A value to convert\n * @return An integer\n */\nfunction toInteger(value: any): number {\n\tvalue = Number(value);\n\tif (isNaN(value)) {\n\t\treturn 0;\n\t}\n\tif (value === 0 || !isFinite(value)) {\n\t\treturn value;\n\t}\n\n\treturn (value > 0 ? 1 : -1) * Math.floor(Math.abs(value));\n}\n\n/**\n * Normalizes an offset against a given length, wrapping it if negative.\n *\n * @param value The original offset\n * @param length The total length to normalize against\n * @return If negative, provide a distance from the end (length); otherwise provide a distance from 0\n */\nfunction normalizeOffset(value: number, length: number): number {\n\treturn value < 0 ? Math.max(length + value, 0) : Math.min(value, length);\n}\n\n/**\n * A namespace that contains the polyfilled functionality that is then exported below, depending on if\n * the functionality is required or not.\n */\nexport namespace Shim {\n\texport function from(this: ArrayConstructor, arrayLike: Iterable<any> | ArrayLike<any>, mapFunction?: MapCallback<any, any>, thisArg?: any): Array<any> {\n\t\tif (arrayLike == null) {\n\t\t\tthrow new TypeError('from: requires an array-like object');\n\t\t}\n\n\t\tif (mapFunction && thisArg) {\n\t\t\tmapFunction = mapFunction.bind(thisArg);\n\t\t}\n\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst Constructor = this;\n\t\tconst length: number = toLength((<any> arrayLike).length);\n\t\t// Support extension\n\t\tconst array: any[] = (typeof Constructor === 'function') ? <any[]> Object(new Constructor(length)) : new Array(length);\n\n\t\tif (!isArrayLike(arrayLike) && !isIterable(arrayLike)) {\n\t\t\treturn array;\n\t\t}\n\n\t\tlet i = 0;\n\t\tforOf(arrayLike, function (value): void {\n\t\t\tarray[i] = mapFunction ? mapFunction(value, i) : value;\n\t\t\ti++;\n\t\t});\n\n\t\tif ((<any> arrayLike).length !== undefined) {\n\t\t\tarray.length = length;\n\t\t}\n\n\t\treturn array;\n\t}\n\n\texport function of<T>(...items: T[]): Array<T> {\n\t\treturn Array.prototype.slice.call(items);\n\t}\n\n\texport function copyWithin<T>(target: ArrayLike<T>, offset: number, start: number, end?: number): ArrayLike<T> {\n\t\tif (target == null) {\n\t\t\tthrow new TypeError('copyWithin: target must be an array-like object');\n\t\t}\n\n\t\tconst length = toLength(target.length);\n\t\toffset = normalizeOffset(toInteger(offset), length);\n\t\tstart = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\t\tlet count = Math.min(end - start, length - offset);\n\n\t\tlet direction = 1;\n\t\tif (offset > start && offset < (start + count)) {\n\t\t\tdirection = -1;\n\t\t\tstart += count - 1;\n\t\t\toffset += count - 1;\n\t\t}\n\n\t\twhile (count > 0) {\n\t\t\tif (start in target) {\n\t\t\t\ttarget[offset] = target[start];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdelete target[offset];\n\t\t\t}\n\n\t\t\toffset += direction;\n\t\t\tstart += direction;\n\t\t\tcount--;\n\t\t}\n\n\t\treturn target;\n\t}\n\n\texport function fill<T>(target: ArrayLike<T>, value: any, start?: number, end?: number): ArrayLike<T> {\n\t\tconst length = toLength(target.length);\n\t\tlet i = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\n\t\twhile (i < end) {\n\t\t\ttarget[i++] = value;\n\t\t}\n\n\t\treturn target;\n\t}\n\n\texport function find<T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}): T | undefined {\n\t\tconst index = findIndex<T>(target, callback, thisArg);\n\t\treturn index !== -1 ? target[index] : undefined;\n\t}\n\n\texport function findIndex<T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}): number {\n\t\tconst length = toLength(target.length);\n\n\t\tif (!callback) {\n\t\t\tthrow new TypeError('find: second argument must be a function');\n\t\t}\n\n\t\tif (thisArg) {\n\t\t\tcallback = callback.bind(thisArg);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tif (callback(target[i], i, target)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\texport function includes<T>(target: ArrayLike<T>, searchElement: T, fromIndex: number = 0): boolean {\n\t\tlet len = toLength(target.length);\n\n\t\tfor (let i = fromIndex; i < len; ++i) {\n\t\t\tconst currentElement = target[i];\n\t\t\tif (searchElement === currentElement ||\n\t\t\t\t(searchElement !== searchElement && currentElement !== currentElement)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n/* ES6 Array static methods */\n\nexport interface From {\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @param mapFunction A map function to call on each element in the array\n\t * @param thisArg The execution context for the map function\n\t * @return The new Array\n\t */\n\t<T, U>(source: ArrayLike<T> | Iterable<T>, mapFunction: MapCallback<T, U>, thisArg?: any): Array<U>;\n\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @return The new Array\n\t */\n\t<T>(source: ArrayLike<T> | Iterable<T>): Array<T>;\n}\n\nexport const from: From = has('es6-array-from')\n\t? (<any> Array).from\n\t: Shim.from;\n\n/**\n * Creates a new array from the function parameters.\n *\n * @param arguments Any number of arguments for the array\n * @return An array from the given arguments\n */\nexport const of: <T>(...items: T[]) => Array<T> = has('es6-array-of')\n\t? (<any> Array).of\n\t: Shim.of;\n\n/* ES6 Array instance methods */\n\n/**\n * Copies data internally within an array or array-like object.\n *\n * @param target The target array-like object\n * @param offset The index to start copying values to; if negative, it counts backwards from length\n * @param start The first (inclusive) index to copy; if negative, it counts backwards from length\n * @param end The last (exclusive) index to copy; if negative, it counts backwards from length\n * @return The target\n */\nexport const copyWithin: <T>(target: ArrayLike<T>, offset: number, start: number, end?: number) => ArrayLike<T> = has('es6-array-copywithin')\n\t? wrapNative((<any> Array.prototype).copyWithin)\n\t: Shim.copyWithin;\n\n/**\n * Fills elements of an array-like object with the specified value.\n *\n * @param target The target to fill\n * @param value The value to fill each element of the target with\n * @param start The first index to fill\n * @param end The (exclusive) index at which to stop filling\n * @return The filled target\n */\nexport const fill: <T>(target: ArrayLike<T>, value: T, start?: number, end?: number) => ArrayLike<T> = has('es6-array-fill')\n\t? wrapNative((<any> Array.prototype).fill)\n\t: Shim.fill;\n\n/**\n * Finds and returns the first instance matching the callback or undefined if one is not found.\n *\n * @param target An array-like object\n * @param callback A function returning if the current value matches a criteria\n * @param [thisArg] The execution context for the find function\n * @return The first element matching the callback, or undefined if one does not exist\n */\nexport const find: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => T = has('es6-array-find')\n\t? wrapNative((<any> Array.prototype).find)\n\t: Shim.find;\n\n/**\n * Performs a linear search and returns the first index whose value satisfies the passed callback,\n * or -1 if no values satisfy it.\n *\n * @param target An array-like object\n * @param callback A function returning true if the current value satisfies its criteria\n * @param [thisArg] The execution context for the find function\n * @return The first index whose value satisfies the passed callback, or -1 if no values satisfy it\n */\nexport const findIndex: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => number = has('es6-array-findindex')\n\t? wrapNative((<any> Array.prototype).findIndex)\n\t: Shim.findIndex;\n\n/* ES7 Array instance methods */\n\n/**\n * Determines whether an array includes a given value\n *\n * @param target the target array-like object\n * @param searchElement the item to search for\n * @param fromIndex the starting index to search from\n * @return `true` if the array includes the element, otherwise `false`\n */\nexport const includes: <T>(target: ArrayLike<T>, searchElement: T, fromIndex?: number) => boolean = has('es7-array-includes')\n\t? wrapNative((<any> Array.prototype).includes)\n\t: Shim.includes;\n\n\n\n// WEBPACK FOOTER //\n// array.ts","/**\n * Helper function to generate a value property descriptor\n *\n * @param value        The value the property descriptor should be set to\n * @param enumerable   If the property should be enumberable, defaults to false\n * @param writable     If the property should be writable, defaults to true\n * @param configurable If the property should be configurable, defaults to true\n * @return             The property descriptor object\n */\nexport function getValueDescriptor<T>(value: T, enumerable: boolean = false, writable: boolean = true, configurable: boolean = true): TypedPropertyDescriptor<T> {\n\treturn {\n\t\tvalue: value,\n\t\tenumerable: enumerable,\n\t\twritable: writable,\n\t\tconfigurable: configurable\n\t};\n}\n\n/**\n * A helper function which wraps a function where the first argument becomes the scope\n * of the call\n *\n * @param nativeFunction The source function to be wrapped\n */\nexport function wrapNative(nativeFunction: Function): any {\n\treturn function (target: any, ...args: any[]) {\n\t\treturn nativeFunction.apply(target, args);\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// util.ts","(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['exports'], factory);\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\n        // CommonJS\n        factory(exports);\n    } else {\n        // Browser globals\n        factory(root.maquette = {});\n    }\n}(this, function (exports) {\n    'use strict';\n    var NAMESPACE_W3 = 'http://www.w3.org/';\n    var NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\n    var NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n    // Utilities\n    var emptyArray = [];\n    var extend = function (base, overrides) {\n        var result = {};\n        Object.keys(base).forEach(function (key) {\n            result[key] = base[key];\n        });\n        if (overrides) {\n            Object.keys(overrides).forEach(function (key) {\n                result[key] = overrides[key];\n            });\n        }\n        return result;\n    };\n    // Hyperscript helper functions\n    var same = function (vnode1, vnode2) {\n        if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\n            return false;\n        }\n        if (vnode1.properties && vnode2.properties) {\n            if (vnode1.properties.key !== vnode2.properties.key) {\n                return false;\n            }\n            return vnode1.properties.bind === vnode2.properties.bind;\n        }\n        return !vnode1.properties && !vnode2.properties;\n    };\n    var toTextVNode = function (data) {\n        return {\n            vnodeSelector: '',\n            properties: undefined,\n            children: undefined,\n            text: data.toString(),\n            domNode: null\n        };\n    };\n    var appendChildren = function (parentSelector, insertions, main) {\n        for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\n            var item = insertions[i];\n            if (Array.isArray(item)) {\n                appendChildren(parentSelector, item, main);\n            } else {\n                if (item !== null && item !== undefined) {\n                    if (!item.hasOwnProperty('vnodeSelector')) {\n                        item = toTextVNode(item);\n                    }\n                    main.push(item);\n                }\n            }\n        }\n    };\n    // Render helper functions\n    var missingTransition = function () {\n        throw new Error('Provide a transitions object to the projectionOptions to do animations');\n    };\n    var DEFAULT_PROJECTION_OPTIONS = {\n        namespace: undefined,\n        eventHandlerInterceptor: undefined,\n        styleApplyer: function (domNode, styleName, value) {\n            // Provides a hook to add vendor prefixes for browsers that still need it.\n            domNode.style[styleName] = value;\n        },\n        transitions: {\n            enter: missingTransition,\n            exit: missingTransition\n        }\n    };\n    var applyDefaultProjectionOptions = function (projectorOptions) {\n        return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\n    };\n    var checkStyleValue = function (styleValue) {\n        if (typeof styleValue !== 'string') {\n            throw new Error('Style values must be strings');\n        }\n    };\n    var setProperties = function (domNode, properties, projectionOptions) {\n        if (!properties) {\n            return;\n        }\n        var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\n        var propNames = Object.keys(properties);\n        var propCount = propNames.length;\n        var _loop_1 = function (i) {\n            var propName = propNames[i];\n            /* tslint:disable:no-var-keyword: edge case */\n            var propValue = properties[propName];\n            /* tslint:enable:no-var-keyword */\n            if (propName === 'className') {\n                throw new Error('Property \"className\" is not supported, use \"class\".');\n            } else if (propName === 'class') {\n                propValue.split(/\\s+/).forEach(function (token) {\n                    return domNode.classList.add(token);\n                });\n            } else if (propName === 'classes') {\n                // object with string keys and boolean values\n                var classNames = Object.keys(propValue);\n                var classNameCount = classNames.length;\n                for (var j = 0; j < classNameCount; j++) {\n                    var className = classNames[j];\n                    if (propValue[className]) {\n                        domNode.classList.add(className);\n                    }\n                }\n            } else if (propName === 'styles') {\n                // object with string keys and string (!) values\n                var styleNames = Object.keys(propValue);\n                var styleCount = styleNames.length;\n                for (var j = 0; j < styleCount; j++) {\n                    var styleName = styleNames[j];\n                    var styleValue = propValue[styleName];\n                    if (styleValue) {\n                        checkStyleValue(styleValue);\n                        projectionOptions.styleApplyer(domNode, styleName, styleValue);\n                    }\n                }\n            } else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n                var type = typeof propValue;\n                if (type === 'function') {\n                    if (propName.lastIndexOf('on', 0) === 0) {\n                        if (eventHandlerInterceptor) {\n                            propValue = eventHandlerInterceptor(propName, propValue, domNode, properties);    // intercept eventhandlers\n                        }\n                        if (propName === 'oninput') {\n                            (function () {\n                                // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\n                                var oldPropValue = propValue;\n                                propValue = function (evt) {\n                                    evt.target['oninput-value'] = evt.target.value;\n                                    // may be HTMLTextAreaElement as well\n                                    oldPropValue.apply(this, [evt]);\n                                };\n                            }());\n                        }\n                        domNode[propName] = propValue;\n                    }\n                } else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n                    if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                        domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                    } else {\n                        domNode.setAttribute(propName, propValue);\n                    }\n                } else {\n                    domNode[propName] = propValue;\n                }\n            }\n        };\n        for (var i = 0; i < propCount; i++) {\n            _loop_1(i);\n        }\n    };\n    var updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\n        if (!properties) {\n            return;\n        }\n        var propertiesUpdated = false;\n        var propNames = Object.keys(properties);\n        var propCount = propNames.length;\n        for (var i = 0; i < propCount; i++) {\n            var propName = propNames[i];\n            // assuming that properties will be nullified instead of missing is by design\n            var propValue = properties[propName];\n            var previousValue = previousProperties[propName];\n            if (propName === 'class') {\n                if (previousValue !== propValue) {\n                    throw new Error('\"class\" property may not be updated. Use the \"classes\" property for conditional css classes.');\n                }\n            } else if (propName === 'classes') {\n                var classList = domNode.classList;\n                var classNames = Object.keys(propValue);\n                var classNameCount = classNames.length;\n                for (var j = 0; j < classNameCount; j++) {\n                    var className = classNames[j];\n                    var on = !!propValue[className];\n                    var previousOn = !!previousValue[className];\n                    if (on === previousOn) {\n                        continue;\n                    }\n                    propertiesUpdated = true;\n                    if (on) {\n                        classList.add(className);\n                    } else {\n                        classList.remove(className);\n                    }\n                }\n            } else if (propName === 'styles') {\n                var styleNames = Object.keys(propValue);\n                var styleCount = styleNames.length;\n                for (var j = 0; j < styleCount; j++) {\n                    var styleName = styleNames[j];\n                    var newStyleValue = propValue[styleName];\n                    var oldStyleValue = previousValue[styleName];\n                    if (newStyleValue === oldStyleValue) {\n                        continue;\n                    }\n                    propertiesUpdated = true;\n                    if (newStyleValue) {\n                        checkStyleValue(newStyleValue);\n                        projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\n                    } else {\n                        projectionOptions.styleApplyer(domNode, styleName, '');\n                    }\n                }\n            } else {\n                if (!propValue && typeof previousValue === 'string') {\n                    propValue = '';\n                }\n                if (propName === 'value') {\n                    if (domNode[propName] !== propValue && domNode['oninput-value'] !== propValue) {\n                        domNode[propName] = propValue;\n                        // Reset the value, even if the virtual DOM did not change\n                        domNode['oninput-value'] = undefined;\n                    }\n                    // else do not update the domNode, otherwise the cursor position would be changed\n                    if (propValue !== previousValue) {\n                        propertiesUpdated = true;\n                    }\n                } else if (propValue !== previousValue) {\n                    var type = typeof propValue;\n                    if (type === 'function') {\n                        throw new Error('Functions may not be updated on subsequent renders (property: ' + propName + '). Hint: declare event handler functions outside the render() function.');\n                    }\n                    if (type === 'string' && propName !== 'innerHTML') {\n                        if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                            domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                        } else {\n                            domNode.setAttribute(propName, propValue);\n                        }\n                    } else {\n                        if (domNode[propName] !== propValue) {\n                            domNode[propName] = propValue;\n                        }\n                    }\n                    propertiesUpdated = true;\n                }\n            }\n        }\n        return propertiesUpdated;\n    };\n    var findIndexOfChild = function (children, sameAs, start) {\n        if (sameAs.vnodeSelector !== '') {\n            // Never scan for text-nodes\n            for (var i = start; i < children.length; i++) {\n                if (same(children[i], sameAs)) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    };\n    var nodeAdded = function (vNode, transitions) {\n        if (vNode.properties) {\n            var enterAnimation = vNode.properties.enterAnimation;\n            if (enterAnimation) {\n                if (typeof enterAnimation === 'function') {\n                    enterAnimation(vNode.domNode, vNode.properties);\n                } else {\n                    transitions.enter(vNode.domNode, vNode.properties, enterAnimation);\n                }\n            }\n        }\n    };\n    var nodeToRemove = function (vNode, transitions) {\n        var domNode = vNode.domNode;\n        if (vNode.properties) {\n            var exitAnimation = vNode.properties.exitAnimation;\n            if (exitAnimation) {\n                domNode.style.pointerEvents = 'none';\n                var removeDomNode = function () {\n                    if (domNode.parentNode) {\n                        domNode.parentNode.removeChild(domNode);\n                    }\n                };\n                if (typeof exitAnimation === 'function') {\n                    exitAnimation(domNode, removeDomNode, vNode.properties);\n                    return;\n                } else {\n                    transitions.exit(vNode.domNode, vNode.properties, exitAnimation, removeDomNode);\n                    return;\n                }\n            }\n        }\n        if (domNode.parentNode) {\n            domNode.parentNode.removeChild(domNode);\n        }\n    };\n    var checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\n        var childNode = childNodes[indexToCheck];\n        if (childNode.vnodeSelector === '') {\n            return;    // Text nodes need not be distinguishable\n        }\n        var properties = childNode.properties;\n        var key = properties ? properties.key === undefined ? properties.bind : properties.key : undefined;\n        if (!key) {\n            for (var i = 0; i < childNodes.length; i++) {\n                if (i !== indexToCheck) {\n                    var node = childNodes[i];\n                    if (same(node, childNode)) {\n                        if (operation === 'added') {\n                            throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' + 'added, but there is now more than one. You must add unique key properties to make them distinguishable.');\n                        } else {\n                            throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' + 'removed, but there were more than one. You must add unique key properties to make them distinguishable.');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    var createDom;\n    var updateDom;\n    var updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\n        if (oldChildren === newChildren) {\n            return false;\n        }\n        oldChildren = oldChildren || emptyArray;\n        newChildren = newChildren || emptyArray;\n        var oldChildrenLength = oldChildren.length;\n        var newChildrenLength = newChildren.length;\n        var transitions = projectionOptions.transitions;\n        var oldIndex = 0;\n        var newIndex = 0;\n        var i;\n        var textUpdated = false;\n        while (newIndex < newChildrenLength) {\n            var oldChild = oldIndex < oldChildrenLength ? oldChildren[oldIndex] : undefined;\n            var newChild = newChildren[newIndex];\n            if (oldChild !== undefined && same(oldChild, newChild)) {\n                textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\n                oldIndex++;\n            } else {\n                var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n                if (findOldIndex >= 0) {\n                    // Remove preceding missing children\n                    for (i = oldIndex; i < findOldIndex; i++) {\n                        nodeToRemove(oldChildren[i], transitions);\n                        checkDistinguishable(oldChildren, i, vnode, 'removed');\n                    }\n                    textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\n                    oldIndex = findOldIndex + 1;\n                } else {\n                    // New child\n                    createDom(newChild, domNode, oldIndex < oldChildrenLength ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\n                    nodeAdded(newChild, transitions);\n                    checkDistinguishable(newChildren, newIndex, vnode, 'added');\n                }\n            }\n            newIndex++;\n        }\n        if (oldChildrenLength > oldIndex) {\n            // Remove child fragments\n            for (i = oldIndex; i < oldChildrenLength; i++) {\n                nodeToRemove(oldChildren[i], transitions);\n                checkDistinguishable(oldChildren, i, vnode, 'removed');\n            }\n        }\n        return textUpdated;\n    };\n    var addChildren = function (domNode, children, projectionOptions) {\n        if (!children) {\n            return;\n        }\n        for (var i = 0; i < children.length; i++) {\n            createDom(children[i], domNode, undefined, projectionOptions);\n        }\n    };\n    var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\n        addChildren(domNode, vnode.children, projectionOptions);\n        // children before properties, needed for value property of <select>.\n        if (vnode.text) {\n            domNode.textContent = vnode.text;\n        }\n        setProperties(domNode, vnode.properties, projectionOptions);\n        if (vnode.properties && vnode.properties.afterCreate) {\n            vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [\n                domNode,\n                projectionOptions,\n                vnode.vnodeSelector,\n                vnode.properties,\n                vnode.children\n            ]);\n        }\n    };\n    createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\n        var domNode, i, c, start = 0, type, found;\n        var vnodeSelector = vnode.vnodeSelector;\n        if (vnodeSelector === '') {\n            domNode = vnode.domNode = document.createTextNode(vnode.text);\n            if (insertBefore !== undefined) {\n                parentNode.insertBefore(domNode, insertBefore);\n            } else {\n                parentNode.appendChild(domNode);\n            }\n        } else {\n            for (i = 0; i <= vnodeSelector.length; ++i) {\n                c = vnodeSelector.charAt(i);\n                if (i === vnodeSelector.length || c === '.' || c === '#') {\n                    type = vnodeSelector.charAt(start - 1);\n                    found = vnodeSelector.slice(start, i);\n                    if (type === '.') {\n                        domNode.classList.add(found);\n                    } else if (type === '#') {\n                        domNode.id = found;\n                    } else {\n                        if (found === 'svg') {\n                            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n                        }\n                        if (projectionOptions.namespace !== undefined) {\n                            domNode = vnode.domNode = document.createElementNS(projectionOptions.namespace, found);\n                        } else {\n                            domNode = vnode.domNode = document.createElement(found);\n                            if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\n                                // IE8 and older don't support setting input type after the DOM Node has been added to the document\n                                domNode.setAttribute('type', vnode.properties.type);\n                            }\n                        }\n                        if (insertBefore !== undefined) {\n                            parentNode.insertBefore(domNode, insertBefore);\n                        } else {\n                            parentNode.appendChild(domNode);\n                        }\n                    }\n                    start = i + 1;\n                }\n            }\n            initPropertiesAndChildren(domNode, vnode, projectionOptions);\n        }\n    };\n    updateDom = function (previous, vnode, projectionOptions) {\n        var domNode = previous.domNode;\n        var textUpdated = false;\n        if (previous === vnode) {\n            return false;    // By contract, VNode objects may not be modified anymore after passing them to maquette\n        }\n        var updated = false;\n        if (vnode.vnodeSelector === '') {\n            if (vnode.text !== previous.text) {\n                var newVNode = document.createTextNode(vnode.text);\n                domNode.parentNode.replaceChild(newVNode, domNode);\n                vnode.domNode = newVNode;\n                textUpdated = true;\n                return textUpdated;\n            }\n        } else {\n            if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) {\n                projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n            }\n            if (previous.text !== vnode.text) {\n                updated = true;\n                if (vnode.text === undefined) {\n                    domNode.removeChild(domNode.firstChild);    // the only textnode presumably\n                } else {\n                    domNode.textContent = vnode.text;\n                }\n            }\n            updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\n            updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\n            if (vnode.properties && vnode.properties.afterUpdate) {\n                vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [\n                    domNode,\n                    projectionOptions,\n                    vnode.vnodeSelector,\n                    vnode.properties,\n                    vnode.children\n                ]);\n            }\n        }\n        if (updated && vnode.properties && vnode.properties.updateAnimation) {\n            vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\n        }\n        vnode.domNode = previous.domNode;\n        return textUpdated;\n    };\n    var createProjection = function (vnode, projectionOptions) {\n        return {\n            update: function (updatedVnode) {\n                if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\n                    throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\n                }\n                updateDom(vnode, updatedVnode, projectionOptions);\n                vnode = updatedVnode;\n            },\n            domNode: vnode.domNode\n        };\n    };\n    // The other two parameters are not added here, because the Typescript compiler creates surrogate code for destructuring 'children'.\n    exports.h = function (selector) {\n        var properties = arguments[1];\n        if (typeof selector !== 'string') {\n            throw new Error();\n        }\n        var childIndex = 1;\n        if (properties && !properties.hasOwnProperty('vnodeSelector') && !Array.isArray(properties) && typeof properties === 'object') {\n            childIndex = 2;\n        } else {\n            // Optional properties argument was omitted\n            properties = undefined;\n        }\n        var text;\n        var children;\n        var argsLength = arguments.length;\n        // Recognize a common special case where there is only a single text node\n        if (argsLength === childIndex + 1) {\n            var onlyChild = arguments[childIndex];\n            if (typeof onlyChild === 'string') {\n                text = onlyChild;\n            } else if (onlyChild !== undefined && onlyChild !== null && onlyChild.length === 1 && typeof onlyChild[0] === 'string') {\n                text = onlyChild[0];\n            }\n        }\n        if (text === undefined) {\n            children = [];\n            for (; childIndex < argsLength; childIndex++) {\n                var child = arguments[childIndex];\n                if (child === null || child === undefined) {\n                } else if (Array.isArray(child)) {\n                    appendChildren(selector, child, children);\n                } else if (child.hasOwnProperty('vnodeSelector')) {\n                    children.push(child);\n                } else {\n                    children.push(toTextVNode(child));\n                }\n            }\n        }\n        return {\n            vnodeSelector: selector,\n            properties: properties,\n            children: children,\n            text: text === '' ? undefined : text,\n            domNode: null\n        };\n    };\n    /**\n * Contains simple low-level utility functions to manipulate the real DOM.\n */\n    exports.dom = {\n        /**\n     * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\n     * its [[Projection.domNode|domNode]] property.\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection.\n     * @returns The [[Projection]] which also contains the DOM Node that was created.\n     */\n        create: function (vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, document.createElement('div'), undefined, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Appends a new childnode to the DOM which is generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param parentNode - The parent node for the new childNode.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n        append: function (parentNode, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, parentNode, undefined, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Inserts a new DOM node which is generated from a [[VNode]].\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param beforeNode - The node that the DOM Node is inserted before.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\n     * NOTE: [[VNode]] objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n        insertBefore: function (beforeNode, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\n     * This means that the virtual DOM and the real DOM will have one overlapping element.\n     * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and childnodes are preserved.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\n     * may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n        merge: function (element, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            vnode.domNode = element;\n            initPropertiesAndChildren(element, vnode, projectionOptions);\n            return createProjection(vnode, projectionOptions);\n        },\n        /**\n     * Replaces an existing DOM node with a node generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param element - The node for the [[VNode]] to replace.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n        replace: function (element, vnode, projectionOptions) {\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n            createDom(vnode, element.parentNode, element, projectionOptions);\n            element.parentNode.removeChild(element);\n            return createProjection(vnode, projectionOptions);\n        }\n    };\n    /**\n * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\n * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\n * For more information, see [[CalculationCache]].\n *\n * @param <Result> The type of the value that is cached.\n */\n    exports.createCache = function () {\n        var cachedInputs;\n        var cachedOutcome;\n        return {\n            invalidate: function () {\n                cachedOutcome = undefined;\n                cachedInputs = undefined;\n            },\n            result: function (inputs, calculation) {\n                if (cachedInputs) {\n                    for (var i = 0; i < inputs.length; i++) {\n                        if (cachedInputs[i] !== inputs[i]) {\n                            cachedOutcome = undefined;\n                        }\n                    }\n                }\n                if (!cachedOutcome) {\n                    cachedOutcome = calculation();\n                    cachedInputs = inputs;\n                }\n                return cachedOutcome;\n            }\n        };\n    };\n    /**\n * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\n * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\n *\n * @param <Source>       The type of source items. A database-record for instance.\n * @param <Target>       The type of target items. A [[Component]] for instance.\n * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\n * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\n *                       to the `callback` argument in `Array.map(callback)`.\n * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\n */\n    exports.createMapping = function (getSourceKey, createResult, updateResult) {\n        var keys = [];\n        var results = [];\n        return {\n            results: results,\n            map: function (newSources) {\n                var newKeys = newSources.map(getSourceKey);\n                var oldTargets = results.slice();\n                var oldIndex = 0;\n                for (var i = 0; i < newSources.length; i++) {\n                    var source = newSources[i];\n                    var sourceKey = newKeys[i];\n                    if (sourceKey === keys[oldIndex]) {\n                        results[i] = oldTargets[oldIndex];\n                        updateResult(source, oldTargets[oldIndex], i);\n                        oldIndex++;\n                    } else {\n                        var found = false;\n                        for (var j = 1; j < keys.length + 1; j++) {\n                            var searchIndex = (oldIndex + j) % keys.length;\n                            if (keys[searchIndex] === sourceKey) {\n                                results[i] = oldTargets[searchIndex];\n                                updateResult(newSources[i], oldTargets[searchIndex], i);\n                                oldIndex = searchIndex + 1;\n                                found = true;\n                                break;\n                            }\n                        }\n                        if (!found) {\n                            results[i] = createResult(source, i);\n                        }\n                    }\n                }\n                results.length = newSources.length;\n                keys = newKeys;\n            }\n        };\n    };\n    /**\n * Creates a [[Projector]] instance using the provided projectionOptions.\n *\n * For more information, see [[Projector]].\n *\n * @param projectorOptions   Options that influence how the DOM is rendered and updated.\n */\n    exports.createProjector = function (projectorOptions) {\n        var projector;\n        var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\n        projectionOptions.eventHandlerInterceptor = function (propertyName, eventHandler, domNode, properties) {\n            return function () {\n                // intercept function calls (event handlers) to do a render afterwards.\n                projector.scheduleRender();\n                return eventHandler.apply(properties.bind || this, arguments);\n            };\n        };\n        var renderCompleted = true;\n        var scheduled;\n        var stopped = false;\n        var projections = [];\n        var renderFunctions = [];\n        // matches the projections array\n        var doRender = function () {\n            scheduled = undefined;\n            if (!renderCompleted) {\n                return;    // The last render threw an error, it should be logged in the browser console.\n            }\n            renderCompleted = false;\n            for (var i = 0; i < projections.length; i++) {\n                var updatedVnode = renderFunctions[i]();\n                projections[i].update(updatedVnode);\n            }\n            renderCompleted = true;\n        };\n        projector = {\n            renderNow: doRender,\n            scheduleRender: function () {\n                if (!scheduled && !stopped) {\n                    scheduled = requestAnimationFrame(doRender);\n                }\n            },\n            stop: function () {\n                if (scheduled) {\n                    cancelAnimationFrame(scheduled);\n                    scheduled = undefined;\n                }\n                stopped = true;\n            },\n            resume: function () {\n                stopped = false;\n                renderCompleted = true;\n                projector.scheduleRender();\n            },\n            append: function (parentNode, renderMaquetteFunction) {\n                projections.push(exports.dom.append(parentNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            insertBefore: function (beforeNode, renderMaquetteFunction) {\n                projections.push(exports.dom.insertBefore(beforeNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            merge: function (domNode, renderMaquetteFunction) {\n                projections.push(exports.dom.merge(domNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            replace: function (domNode, renderMaquetteFunction) {\n                projections.push(exports.dom.replace(domNode, renderMaquetteFunction(), projectionOptions));\n                renderFunctions.push(renderMaquetteFunction);\n            },\n            detach: function (renderMaquetteFunction) {\n                for (var i = 0; i < renderFunctions.length; i++) {\n                    if (renderFunctions[i] === renderMaquetteFunction) {\n                        renderFunctions.splice(i, 1);\n                        return projections.splice(i, 1)[0];\n                    }\n                }\n                throw new Error('renderMaquetteFunction was not found');\n            }\n        };\n        return projector;\n    };\n}));\n//# sourceMappingURL=maquette.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/maquette/dist/maquette.js\n// module id = 19\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 20\n// module chunks = 0","import { Handle, EventObject } from '@dojo/interfaces/core';\nimport { createHandle, createCompositeHandle } from './lang';\nimport Evented from './Evented';\n\nexport interface EventCallback {\n\t(event: EventObject): void;\n}\n\nexport interface EventEmitter {\n\ton(event: string, listener: EventCallback): EventEmitter;\n\tremoveListener(event: string, listener: EventCallback): EventEmitter;\n}\n\ninterface DOMEventObject extends EventObject {\n\tbubbles: boolean;\n\tcancelable: boolean;\n}\n\n/**\n * Provides a normalized mechanism for dispatching events for event emitters, Evented objects, or DOM nodes.\n * @param target The target to emit the event from\n * @param event The event object to emit\n * @return Boolean indicating if preventDefault was called on the event object (only relevant for DOM events;\n *     always false for other event emitters)\n */\nexport function emit<T extends EventObject>(target: Evented | EventTarget | EventEmitter, event: T | EventObject): boolean;\nexport function emit<T extends EventObject>(target: any, event: T | EventObject): boolean {\n\tif (\n\t\ttarget.dispatchEvent && /* includes window and document */\n\t\t\t((target.ownerDocument && target.ownerDocument.createEvent) || /* matches nodes */\n\t\t\t(target.document && target.document.createEvent) || /* matches window */\n\t\t\ttarget.createEvent) /* matches document */\n\t) {\n\t\tconst nativeEvent = (target.ownerDocument || target.document || target).createEvent('HTMLEvents');\n\t\tnativeEvent.initEvent(\n\t\t\tevent.type,\n\t\t\tBoolean((<DOMEventObject> event).bubbles),\n\t\t\tBoolean((<DOMEventObject> event).cancelable)\n\t\t);\n\n\t\tfor (let key in event) {\n\t\t\tif (!(key in nativeEvent)) {\n\t\t\t\tnativeEvent[key] = (<any> event)[key];\n\t\t\t}\n\t\t}\n\n\t\treturn target.dispatchEvent(nativeEvent);\n\t}\n\n\tif (target.emit) {\n\t\tif (target.removeListener) {\n\t\t\t// Node.js EventEmitter\n\t\t\ttarget.emit(event.type, event);\n\t\t\treturn false;\n\t\t}\n\t\telse if (target.on) {\n\t\t\t// Dojo Evented or similar\n\t\t\ttarget.emit(event);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tthrow new Error('Target must be an event emitter');\n}\n\n/**\n * Provides a normalized mechanism for listening to events from event emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle which will remove the listener when destroy is called\n */\nexport default function on(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): Handle;\nexport default function on(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): Handle;\nexport default function on(target: any, type: any, listener: any, capture?: boolean): Handle {\n\tif (Array.isArray(type)) {\n\t\tlet handles: Handle[] = type.map(function (type: string): Handle {\n\t\t\treturn on(target, type, listener, capture);\n\t\t});\n\n\t\treturn createCompositeHandle(...handles);\n\t}\n\n\tconst callback = function (this: any) {\n\t\tlistener.apply(this, arguments);\n\t};\n\n\t// DOM EventTarget\n\tif (target.addEventListener && target.removeEventListener) {\n\t\ttarget.addEventListener(type, callback, capture);\n\t\treturn createHandle(function () {\n\t\t\ttarget.removeEventListener(type, callback, capture);\n\t\t});\n\t}\n\n\tif (target.on) {\n\t\t// EventEmitter\n\t\tif (target.removeListener) {\n\t\t\ttarget.on(type, callback);\n\t\t\treturn createHandle(function () {\n\t\t\t\ttarget.removeListener(type, callback);\n\t\t\t});\n\t\t}\n\t\t// Evented\n\t\telse if (target.emit) {\n\t\t\treturn target.on(type, listener);\n\t\t}\n\t}\n\n\tthrow new TypeError('Unknown event emitter object');\n}\n\n/**\n * Provides a mechanism for listening to the next occurrence of an event from event\n * emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may be a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle which will remove the listener when destroy is called\n */\nexport function once(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): Handle;\nexport function once(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): Handle;\nexport function once(target: any, type: any, listener: any, capture?: boolean): Handle {\n\t// FIXME\n\t// tslint:disable-next-line:no-var-keyword\n\tvar handle = on(target, type, function (this: any) {\n\t\thandle.destroy();\n\t\treturn listener.apply(this, arguments);\n\t}, capture);\n\n\treturn handle;\n}\n\nexport interface PausableHandle extends Handle {\n\tpause(): void;\n\tresume(): void;\n}\n\n/**\n * Provides a mechanism for creating pausable listeners for events from event emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle with additional pause and resume methods; the listener will never fire when paused\n */\nexport function pausable(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): PausableHandle;\nexport function pausable(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): PausableHandle;\nexport function pausable(target: any, type: any, listener: any, capture?: boolean): PausableHandle {\n\tlet paused: boolean;\n\n\tconst handle = <PausableHandle> on(target, type, function (this: any) {\n\t\tif (!paused) {\n\t\t\treturn listener.apply(this, arguments);\n\t\t}\n\t}, capture);\n\n\thandle.pause = function () {\n\t\tpaused = true;\n\t};\n\n\thandle.resume = function () {\n\t\tpaused = false;\n\t};\n\n\treturn handle;\n}\n\n\n\n// WEBPACK FOOTER //\n// on.ts","import Task from '@dojo/core/async/Task';\nimport Evented, { BaseEventedEvents } from '@dojo/core/Evented';\nimport { Hash } from '@dojo/core/interfaces';\nimport { pausable, PausableHandle } from '@dojo/core/on';\nimport UrlSearchParams from '@dojo/core/UrlSearchParams';\nimport { EventedOptions, EventedListener } from '@dojo/interfaces/bases';\nimport { EventTargettedObject, EventErrorObject, Handle } from '@dojo/interfaces/core';\nimport { includes } from '@dojo/shim/array';\nimport { Thenable } from '@dojo/shim/interfaces';\nimport Promise from '@dojo/shim/Promise';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { History, HistoryChangeEvent } from './history/interfaces';\nimport { Context, Parameters, Request } from './interfaces';\nimport { isNamedSegment, parse as parsePath } from './lib/path';\n\nimport { Route, SearchParams, Selection } from './Route';\n\n/**\n * An object to resume or cancel router dispatch.\n */\nexport interface DispatchDeferral {\n\t/**\n\t * Call to prevent a path from being dispatched.\n\t */\n\tcancel(): void;\n\n\t/**\n\t * Call to resume a path being dispatched.\n\t */\n\tresume(): void;\n}\n\n/**\n * Event object that is emitted for the 'navstart' event.\n */\nexport interface NavigationStartEvent extends EventTargettedObject<Router<Context>> {\n\t/**\n\t * The path that has been navigated to.\n\t */\n\tpath: string;\n\n\t/**\n\t * Call to prevent the path to be dispatched.\n\t */\n\tcancel(): void;\n\n\t/**\n\t * Call to defer dispatching of the path\n\t * @return an object which allows the caller to resume or cancel dispatch.\n\t */\n\tdefer(): DispatchDeferral;\n}\n\n/**\n * Event object that is emitted for the 'error' event.\n */\nexport interface ErrorEvent<C extends Context> extends EventErrorObject<Router<C>> {\n\t/**\n\t * The context that was being dispatched when the error occurred.\n\t */\n\tcontext: C;\n\n\t/**\n\t * The path that was being dispatched when the error occurred.\n\t */\n\tpath: string;\n}\n\n/**\n * Describes the result of a dispatch.\n */\nexport interface DispatchResult {\n\t/**\n\t * Whether a route requested a redirect to a different path.\n\t */\n\tredirect?: string;\n\n\t/**\n\t * False if dispatch was canceled (via the navstart event) or if no routes could be selected. True otherwise.\n\t */\n\tsuccess: boolean;\n}\n\nexport type LinkParams = Hash<string | string[] | undefined>;\n\nexport interface RouterEvents<C extends Context> extends BaseEventedEvents {\n\t/**\n\t * Event emitted when dispatch is called, but before routes are selected.\n\t */\n\t(type: 'navstart', listener: EventedListener<Router<C>, NavigationStartEvent>): Handle;\n\n\t/**\n\t * Event emitted when errors occur during dispatch.\n\t *\n\t * Certain errors may reject the task returned when dispatching, but this task is not always accessible and may\n\t * hide errors if it's canceled.\n\t */\n\t(type: 'error', listener: EventedListener<Router<C>, ErrorEvent<C>>): Handle;\n}\n\n/**\n * The options for the router.\n */\nexport interface RouterOptions<C extends Context> extends EventedOptions {\n\t/**\n\t * A Context object to be used for all requests, or a function that provides such an object, called for each\n\t * dispatch.\n\t */\n\tcontext?: C | (() => C);\n\n\t/**\n\t * A handler called when no routes match the dispatch path.\n\t * @param request An object whose `context` property contains the dispatch context. No extracted parameters\n\t *   are available.\n\t */\n\tfallback?: (request: Request<C, Parameters>) => void | Thenable<any>;\n\n\t/**\n\t * The history manager. Routes will be dispatched in response to change events emitted by the manager.\n\t */\n\thistory?: History;\n}\n\n/**\n * The options for the router's start() method.\n */\nexport interface StartOptions {\n\t/**\n\t * Whether to immediately dispatch with the history's current value.\n\t */\n\tdispatchCurrent: boolean;\n}\n\nconst parentMap = new WeakMap<Route<Context, Parameters>, Router<Context>>();\n\n/**\n * Whether the route has been appended to another route or router.\n */\nexport function hasBeenAppended(route: Route<Context, Parameters>): boolean {\n\treturn parentMap.has(route) || route.parent !== undefined;\n}\n\n/**\n * Finds the router whose route hierarchy the route has been appended to.\n *\n * Throws if the route was not appended to any router.\n */\nexport function findRouter(route: Route<Context, Parameters>): Router<Context> {\n\twhile (route.parent) {\n\t\troute = route.parent;\n\t}\n\n\tconst router = parentMap.get(route);\n\tif (!router) {\n\t\tthrow new Error('Cannot generate link for route that is not in the hierarchy');\n\t}\n\telse {\n\t\treturn router;\n\t}\n}\n\n// istanbul ignore next\nconst noop = () => {\n};\n\nfunction createDeferral() {\n\t// Use noop since TypeScript doesn't know we're assigning cancel and resume in the promise executor.\n\tlet cancel: () => void = noop;\n\tlet resume: () => void = noop;\n\tconst promise = new Promise<void>((resolve, reject) => {\n\t\tcancel = reject;\n\t\t// Wrap resolve to avoid resume being called with a thenable if type checking is not used.\n\t\tresume = () => resolve();\n\t});\n\treturn { cancel, promise, resume };\n}\n\nfunction reportError(router: Router<Context>, context: Context, path: string, error: any) {\n\trouter.emit<ErrorEvent<Context>>({\n\t\tcontext,\n\t\terror,\n\t\tpath,\n\t\ttarget: router,\n\t\ttype: 'error'\n\t});\n}\n\nfunction catchRejection(router: Router<Context>, context: Context, path: string, thenable: void | Thenable<any>) {\n\tif (thenable) {\n\t\tPromise.resolve(thenable).catch((error) => {\n\t\t\treportError(router, context, path, error);\n\t\t});\n\t}\n}\n\nexport class Router<C extends Context> extends Evented {\n\tprivate _contextFactory: () => Context;\n\tprivate _currentSelection: Selection[];\n\tprivate _dispatchFromStart: boolean;\n\tprivate _fallback?: (request: Request<Context, Parameters>) => void | Thenable<any>;\n\tprivate _history?: History;\n\tprivate _routes: Route<Context, Parameters>[];\n\tprivate _started?: boolean;\n\n\ton: RouterEvents<C>;\n\n\tconstructor(options: RouterOptions<C> = { }) {\n\t\tconst { context, fallback, history } = options;\n\n\t\tsuper({});\n\n\t\tlet contextFactory: () => C;\n\t\tif (typeof context === 'function') {\n\t\t\tcontextFactory = context;\n\t\t}\n\t\telse if (typeof context === 'undefined') {\n\t\t\tcontextFactory = () => {\n\t\t\t\treturn {} as C;\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\t// Assign to a constant since the context variable may be changed after the function is defined,\n\t\t\t// which would violate its typing.\n\t\t\tconst sharedContext = context;\n\t\t\tcontextFactory = () => sharedContext;\n\t\t}\n\n\t\tif (history) {\n\t\t\tthis.own(history);\n\t\t}\n\n\t\tthis._contextFactory = contextFactory;\n\t\tthis._currentSelection = [];\n\t\tthis._dispatchFromStart = false;\n\t\tthis._fallback = fallback;\n\t\tthis._history = history;\n\t\tthis._routes = [];\n\t\tthis._started = false;\n\t}\n\n\tappend(add: Route<Context, Parameters> | Route<Context, Parameters>[]) {\n\t\tconst append = (route: Route<Context, Parameters>) => {\n\t\t\tif (hasBeenAppended(route)) {\n\t\t\t\tthrow new Error('Cannot append route that has already been appended');\n\t\t\t}\n\n\t\t\tthis._routes.push(route);\n\t\t\tparentMap.set(route, this);\n\t\t};\n\n\t\tif (Array.isArray(add)) {\n\t\t\tfor (const route of add) {\n\t\t\t\tappend(route);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tappend(add);\n\t\t}\n\t}\n\n\tdispatch(context: Context, path: string): Task<DispatchResult> {\n\t\t// Reset, any further calls can't have come from start(). This is necessary since the navstart listeners\n\t\t// may call dispatch() themselves.\n\t\tlet dispatchFromStart = this._dispatchFromStart;\n\t\tthis._dispatchFromStart = false;\n\n\t\tlet canceled = false;\n\t\tconst cancel = () => {\n\t\t\tcanceled = true;\n\t\t};\n\n\t\tconst deferrals: Promise<void>[] = [];\n\n\t\tthis.emit<NavigationStartEvent>({\n\t\t\tcancel,\n\t\t\tdefer () {\n\t\t\t\tconst { cancel, promise, resume } = createDeferral();\n\t\t\t\tdeferrals.push(promise);\n\t\t\t\treturn { cancel, resume };\n\t\t\t},\n\t\t\tpath,\n\t\t\ttarget: this,\n\t\t\ttype: 'navstart'\n\t\t});\n\n\t\t// Synchronous cancelation.\n\t\tif (canceled) {\n\t\t\treturn Task.resolve({ success: false });\n\t\t}\n\n\t\tconst { searchParams, segments, trailingSlash } = parsePath(path);\n\t\treturn new Task<DispatchResult>((resolve, reject) => {\n\t\t\t// *Always* start dispatching in a future turn, even if there were no deferrals.\n\t\t\tPromise.all(deferrals).then<DispatchResult>(\n\t\t\t\t() => {\n\t\t\t\t\t// The cancel() function used in the NavigationStartEvent is reused as the Task canceler.\n\t\t\t\t\t// Strictly speaking any navstart listener can cancel the dispatch asynchronously, as long as it\n\t\t\t\t\t// manages to do so before this turn.\n\t\t\t\t\tif (canceled) {\n\t\t\t\t\t\treturn { success: false };\n\t\t\t\t\t}\n\n\t\t\t\t\tlet redirect: undefined | string;\n\t\t\t\t\tconst dispatched = this._routes.some((route) => {\n\t\t\t\t\t\tconst result = route.select(context, segments, trailingSlash, searchParams);\n\n\t\t\t\t\t\tif (typeof result === 'string') {\n\t\t\t\t\t\t\tredirect = result;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result.length === 0) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Update the selected routes after selecting new routes, but before invoking the handlers.\n\t\t\t\t\t\t// This means the original value is available to guard() and params() functions, and the\n\t\t\t\t\t\t// new value when the newly selected routes are executed.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// Reset selected routes if not dispatched from start().\n\t\t\t\t\t\tthis._currentSelection = dispatchFromStart ? result : [];\n\n\t\t\t\t\t\tfor (const { handler, params } of result) {\n\t\t\t\t\t\t\tcatchRejection(this, context, path, handler({ context, params }));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\t// Reset the selected routes if the dispatch was unsuccessful, or if a redirect was requested.\n\t\t\t\t\tif (!dispatched || redirect !== undefined) {\n\t\t\t\t\t\tthis._currentSelection = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!dispatched && this._fallback) {\n\t\t\t\t\t\tcatchRejection(this, context, path, this._fallback({ context, params: {} }));\n\t\t\t\t\t\treturn { success: false };\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result: DispatchResult = { success: dispatched };\n\t\t\t\t\tif (redirect !== undefined) {\n\t\t\t\t\t\tresult.redirect = redirect;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\t// When deferrals are canceled their corresponding promise is rejected. Ensure the task resolves\n\t\t\t\t// with `false` instead of being rejected too.\n\t\t\t\t() => {\n\t\t\t\t\treturn { success: false };\n\t\t\t\t}\n\t\t\t).then(resolve, (error) => {\n\t\t\t\treportError(this, context, path, error);\n\t\t\t\treject(error);\n\t\t\t});\n\t\t}, cancel);\n\t}\n\n\tlink(route: Route<Context, Parameters>, params: LinkParams = {}): string {\n\t\tconst hierarchy = [ route ];\n\t\tfor (let parent = route.parent; parent !== undefined; parent = parent.parent) {\n\t\t\thierarchy.unshift(parent);\n\t\t}\n\n\t\tif (!includes(this._routes, hierarchy[ 0 ])) {\n\t\t\tthrow new Error('Cannot generate link for route that is not in the hierarchy');\n\t\t}\n\n\t\tconst { leadingSlash: addLeadingSlash } = hierarchy[ 0 ].path;\n\t\tlet addTrailingSlash = false;\n\t\tconst segments: string[] = [];\n\t\tconst searchParams = new UrlSearchParams();\n\n\t\thierarchy\n\t\t\t.map((route, index) => {\n\t\t\t\tconst { path } = route;\n\t\t\t\tlet currentPathValues: string[] | undefined;\n\t\t\t\tlet currentSearchParams: SearchParams | undefined;\n\n\t\t\t\tconst selection = this._currentSelection[ index ];\n\t\t\t\tif (selection && selection.route === route) {\n\t\t\t\t\tcurrentPathValues = selection.rawPathValues;\n\t\t\t\t\tcurrentSearchParams = selection.rawSearchParams;\n\t\t\t\t}\n\n\t\t\t\treturn { currentPathValues, currentSearchParams, path };\n\t\t\t})\n\t\t\t.forEach(({ currentPathValues, currentSearchParams, path }) => {\n\t\t\t\tconst { expectedSegments, searchParameters, trailingSlash } = path;\n\t\t\t\taddTrailingSlash = trailingSlash;\n\n\t\t\t\tlet namedOffset = 0;\n\t\t\t\tfor (const segment of expectedSegments) {\n\t\t\t\t\tif (isNamedSegment(segment)) {\n\t\t\t\t\t\tconst value = params[ segment.name ];\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\tsegments.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\t\t\tif (value.length === 1) {\n\t\t\t\t\t\t\t\tsegments.push(value[ 0 ]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrow new TypeError(`Cannot generate link, multiple values for parameter '${segment.name}'`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (currentPathValues) {\n\t\t\t\t\t\t\tsegments.push(currentPathValues[ namedOffset ]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrow new Error(`Cannot generate link, missing parameter '${segment.name}'`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnamedOffset++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsegments.push(segment.literal);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const key of searchParameters) {\n\t\t\t\t\t// Don't repeat the search parameter if a previous route in the hierarchy has already appended\n\t\t\t\t\t// it.\n\t\t\t\t\tif (searchParams.has(key)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst value = params[ key ];\n\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\tsearchParams.append(key, value);\n\t\t\t\t\t}\n\t\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\t\tfor (const item of value) {\n\t\t\t\t\t\t\tsearchParams.append(key, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (currentSearchParams) {\n\t\t\t\t\t\tfor (const item of currentSearchParams[ key ]) {\n\t\t\t\t\t\t\tsearchParams.append(key, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow new Error(`Cannot generate link, missing search parameter '${key}'`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet pathname = segments.join('/');\n\t\tif (addLeadingSlash) {\n\t\t\tpathname = '/' + pathname;\n\t\t}\n\t\tif (addTrailingSlash) {\n\t\t\tpathname += '/';\n\t\t}\n\n\t\tif (this._history) {\n\t\t\tpathname = this._history!.prefix(pathname);\n\t\t}\n\n\t\tconst search = searchParams.toString();\n\t\tconst path = search ? `${pathname}?${search}` : pathname;\n\n\t\treturn path;\n\t}\n\n\treplacePath(path: string) {\n\t\tif (!this._history) {\n\t\t\tthrow new Error('Cannot replace path, router was created without a history manager');\n\t\t}\n\n\t\tthis._history.replace(path);\n\t}\n\n\tsetPath(path: string) {\n\t\tif (!this._history) {\n\t\t\tthrow new Error('Cannot set path, router was created without a history manager');\n\t\t}\n\n\t\tthis._history.set(path);\n\t}\n\n\tstart(startOptions: StartOptions = { dispatchCurrent : true }): PausableHandle {\n\t\tconst { dispatchCurrent } = startOptions;\n\n\t\tif (this._started) {\n\t\t\tthrow new Error('start can only be called once');\n\t\t}\n\n\t\tthis._started = true;\n\n\t\tif (!this._history) {\n\t\t\treturn {\n\t\t\t\tpause() {\n\t\t\t\t},\n\t\t\t\tresume() {\n\t\t\t\t},\n\t\t\t\tdestroy() {\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tlet lastDispatch: Task<DispatchResult>;\n\t\tlet redirectCount = 0;\n\t\tlet redirecting = false;\n\n\t\tconst dispatch = (path: string) => {\n\t\t\tif (lastDispatch) {\n\t\t\t\tlastDispatch.cancel();\n\t\t\t}\n\n\t\t\t// Reset redirect count if the dispatch was triggered by a non-redirect history change. This allows\n\t\t\t// a route's exec / fallback / index handler to change the history, setting off a new flurry of\n\t\t\t// redirects, without being encumbered by the number of redirects that led to that route being selected.\n\t\t\tif (!redirecting) {\n\t\t\t\tredirectCount = 0;\n\t\t\t}\n\n\t\t\t// Signal to dispatch() that it was called from here.\n\t\t\tthis._dispatchFromStart = true;\n\n\t\t\tconst context = this._contextFactory();\n\t\t\tlastDispatch = this.dispatch(context, path).then((dispatchResult) => {\n\t\t\t\tconst { success, redirect = undefined } = dispatchResult || { success: false };\n\t\t\t\tif (success && redirect !== undefined) {\n\t\t\t\t\tredirectCount++;\n\t\t\t\t\tif (redirectCount > 20) {\n\t\t\t\t\t\tconst error = new Error('More than 20 redirects, giving up');\n\t\t\t\t\t\treportError(this, context, path, error);\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\tredirecting = true;\n\t\t\t\t\t// The history manager MUST emit the change event synchronously.\n\t\t\t\t\tthis._history!.replace(redirect);\n\t\t\t\t\tredirecting = false;\n\t\t\t\t}\n\t\t\t\treturn dispatchResult;\n\t\t\t});\n\t\t};\n\n\t\tconst listener = pausable(this._history, 'change', (event: HistoryChangeEvent) => {\n\t\t\tdispatch(event.value);\n\t\t});\n\t\tthis.own(listener);\n\n\t\tif (dispatchCurrent) {\n\t\t\tdispatch(this._history.current);\n\t\t}\n\n\t\treturn listener;\n\t}\n}\n\nexport default Router;\n\n\n\n// WEBPACK FOOTER //\n// Router.ts","import UrlSearchParams from '@dojo/core/UrlSearchParams';\n\nexport interface ParsedPath {\n\t/**\n\t * Parameters extracted from the search component.\n\t */\n\tsearchParams: UrlSearchParams;\n\n\t/**\n\t * Pathname segments.\n\t */\n\tsegments: string[];\n\n\t/**\n\t * Whether the pathname ended with a trailing slash.\n\t */\n\ttrailingSlash: boolean;\n}\n\n/**\n * Parses a path\n * @param path The path to parse.\n * @return The search params, pathname segments, and whether it ended with a trailing slash.\n */\nexport function parse(path: string): ParsedPath {\n\tconst tokens: string[] = path.split(/([/?#])/).filter(Boolean);\n\n\tlet pathnameTokens = tokens;\n\tlet searchParams: UrlSearchParams;\n\n\tconst searchStart = tokens.indexOf('?');\n\tconst hashStart = tokens.indexOf('#');\n\tif (searchStart >= 0) {\n\t\tif (hashStart >= 0) {\n\t\t\t// Either `/foo?bar#baz` or `/foo#bar?baz`\n\t\t\tpathnameTokens = tokens.slice(0, Math.min(searchStart, hashStart));\n\t\t\tsearchParams = new UrlSearchParams(tokens.slice(searchStart + 1, hashStart).join(''));\n\t\t}\n\t\telse {\n\t\t\t// `/foo?bar`\n\t\t\tpathnameTokens = tokens.slice(0, searchStart);\n\t\t\tsearchParams = new UrlSearchParams(tokens.slice(searchStart + 1).join(''));\n\t\t}\n\t}\n\telse {\n\t\tsearchParams = new UrlSearchParams();\n\t\tif (hashStart >= 0) {\n\t\t\t// `/foo#bar`\n\t\t\tpathnameTokens = tokens.slice(0, hashStart);\n\t\t}\n\t}\n\n\tconst segments = pathnameTokens.filter(t => t !== '/');\n\tconst trailingSlash = pathnameTokens[pathnameTokens.length - 1] === '/' && segments.length > 0;\n\n\treturn {\n\t\tsearchParams,\n\t\tsegments,\n\t\ttrailingSlash\n\t};\n}\n\nexport interface MatchResult {\n\t/**\n\t * Whether there are remaining segments that weren't matched.\n\t */\n\thasRemaining: boolean;\n\n\t/**\n\t * Position in the segments array that the remaining unmatched segments start.\n\t */\n\toffset: number;\n\n\t/**\n\t * Values for named segments.\n\t */\n\tvalues: string[];\n}\n\n/**\n * Determines whether a DeconstructedPath is a (partial) match for given pathname segments.\n * @param expectedSegments Part of a DeconstructedPath object.\n * @param segments Pathname segments as returned by `parse()`\n * @return A result object.\n */\nexport function match({ expectedSegments }: DeconstructedPath, segments: string[]): MatchResult | null {\n\tif (expectedSegments.length === 0) {\n\t\treturn {\n\t\t\thasRemaining: segments.length > 0,\n\t\t\toffset: 0,\n\t\t\tvalues: []\n\t\t};\n\t}\n\n\tif (expectedSegments.length > segments.length) {\n\t\treturn null;\n\t}\n\n\tlet isMatch = true;\n\tconst values: string[] = [];\n\tfor (let i = 0; isMatch && i < expectedSegments.length; i++) {\n\t\tconst value = segments[i];\n\t\tconst expected = expectedSegments[i];\n\t\tif (isNamedSegment(expected)) {\n\t\t\tvalues.push(value);\n\t\t}\n\t\telse if (expected.literal !== value) {\n\t\t\tisMatch = false;\n\t\t}\n\t}\n\n\tif (!isMatch) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\thasRemaining: expectedSegments.length < segments.length,\n\t\toffset: expectedSegments.length,\n\t\tvalues\n\t};\n}\n\nexport interface LiteralSegment {\n\tliteral: string;\n}\n\nexport interface NamedSegment {\n\tname: string;\n}\n\nexport type Segment = LiteralSegment | NamedSegment;\n\n/**\n * Determine whether the segment is a NamedSegment.\n *\n * @param segment The segment to be checked\n * @return true if the segment is a NamedSegment, false otherwise\n */\nexport function isNamedSegment(segment: Segment): segment is NamedSegment {\n\treturn (<NamedSegment> segment).name !== undefined;\n}\n\n/**\n * Describes a route path, broken down into its constituent parts.\n */\nexport interface DeconstructedPath {\n\t/**\n\t * Segments (literal and named) that are expected to be present when matching paths.\n\t */\n\texpectedSegments: Segment[];\n\n\t/**\n\t * Whether the pathname started with a slash.\n\t */\n\tleadingSlash: boolean;\n\n\t/**\n\t * Named path parameters, in the order that they occurred in the path.\n\t */\n\tparameters: string[];\n\n\t/**\n\t * Named query parameters, in the order that they occurred in the path.\n\t */\n\tsearchParameters: string[];\n\n\t/**\n\t * Whether the pathname ended with a slash.\n\t */\n\ttrailingSlash: boolean;\n}\n\n/**\n * Deconstruct a route path into its constituent parts.\n * @param path The path to deconstruct.\n * @return An object describing the path's constituent parts.\n */\nexport function deconstruct(path: string): DeconstructedPath {\n\tconst expectedSegments: Segment[] = [];\n\tconst parameters: string[] = [];\n\tconst searchParameters: string[] = [];\n\tlet trailingSlash = false;\n\n\tconst tokens = path.split(/([/{}?&])/).filter(Boolean);\n\tconst leadingSlash = tokens[0] === '/';\n\n\tlet i = 0;\n\tconst consume = () => tokens[i++];\n\tconst peek = () => tokens[i];\n\n\tlet inSearchComponent = false;\n\twhile (i < tokens.length) {\n\t\tconst t = consume();\n\n\t\tswitch (t) {\n\t\t\tcase '{': {\n\t\t\t\tconst name = consume();\n\t\t\t\tif (!name || name === '}') {\n\t\t\t\t\tthrow new TypeError('Parameter must have a name');\n\t\t\t\t}\n\t\t\t\t// Reserve : for future use, e.g. including type data in the parameter declaration.\n\t\t\t\tif (name === '{' || name === '&' || /:/.test(name)) {\n\t\t\t\t\tthrow new TypeError('Parameter name must not contain \\'{\\', \\'&\\' or \\':\\'');\n\t\t\t\t}\n\t\t\t\tif (parameters.indexOf(name) !== -1 || searchParameters.indexOf(name) !== -1) {\n\t\t\t\t\tthrow new TypeError(`Parameter must have a unique name, got '${name}'`);\n\t\t\t\t}\n\n\t\t\t\tconst closing = consume();\n\t\t\t\tif (!closing || closing !== '}') {\n\t\t\t\t\tthrow new TypeError(`Parameter name must be followed by '}', got '${closing}'`);\n\t\t\t\t}\n\n\t\t\t\tconst separator = peek();\n\t\t\t\tif (separator) {\n\t\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\t\tif (separator !== '&') {\n\t\t\t\t\t\t\tthrow new TypeError(`Search parameter must be followed by '&', got '${separator}'`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (separator !== '/' && separator !== '?') {\n\t\t\t\t\t\tthrow new TypeError(`Parameter must be followed by '/' or '?', got '${separator}'`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tsearchParameters.push(name);\n\t\t\t\t} else {\n\t\t\t\t\tparameters.push(name);\n\t\t\t\t\texpectedSegments.push(Object.freeze({ name }));\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase '?':\n\t\t\tcase '/':\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tthrow new TypeError(`Expected parameter in search component, got '${t}'`);\n\t\t\t\t}\n\n\t\t\t\tif (t === '?') {\n\t\t\t\t\tinSearchComponent = true;\n\t\t\t\t\tif (expectedSegments.length === 0) {\n\t\t\t\t\t\tthrow new TypeError('Path must contain at least one segment');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (t === '/') {\n\t\t\t\t\tconst next = peek();\n\t\t\t\t\tif (next === '/') {\n\t\t\t\t\t\tthrow new TypeError('Path segment must not be empty');\n\t\t\t\t\t}\n\t\t\t\t\tif (expectedSegments.length > 0 && (!next || next === '?')) {\n\t\t\t\t\t\ttrailingSlash = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase '&':\n\t\t\t\tif (!inSearchComponent) {\n\t\t\t\t\tthrow new TypeError('Path segment must not contain \\'&\\'');\n\t\t\t\t}\n\n\t\t\t\tconst next = peek();\n\t\t\t\tif (next === '&') {\n\t\t\t\t\tthrow new TypeError('Expected parameter in search component, got \\'&\\'');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tthrow new TypeError(`Expected parameter in search component, got '${t}'`);\n\t\t\t\t}\n\n\t\t\t\texpectedSegments.push(Object.freeze({ literal: t }));\n\t\t}\n\t}\n\n\treturn Object.freeze({\n\t\texpectedSegments: <Segment[]> Object.freeze(expectedSegments),\n\t\tleadingSlash,\n\t\tparameters: <string[]> Object.freeze(parameters),\n\t\tsearchParameters: <string[]> Object.freeze(searchParameters),\n\t\ttrailingSlash\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// path.ts","import Promise from '@dojo/shim/Promise';\nimport Map from '@dojo/shim/Map';\nimport Symbol from '@dojo/shim/Symbol';\nimport Evented from '@dojo/core/Evented';\nimport { WidgetBaseConstructor } from './interfaces';\n\nexport type WidgetBaseConstructorFunction = () => Promise<WidgetBaseConstructor>;\n\nexport type WidgetRegistryItem = WidgetBaseConstructor | Promise<WidgetBaseConstructor> | WidgetBaseConstructorFunction;\n\n/**\n * Widget base symbol type\n */\nexport const WIDGET_BASE_TYPE = Symbol('Widget Base');\n\n/**\n * Widget Registry Interface\n */\nexport interface WidgetRegistry {\n\n\t/**\n\t * define a WidgetRegistryItem for a specified label\n\t *\n\t * @param widgetLabel The label of the widget to register\n\t * @param registryItem The registry item to define\n\t */\n\tdefine(widgetLabel: string, registryItem: WidgetRegistryItem): void;\n\n\t/**\n\t * Return a WidgetRegistryItem for the given label, null if an entry doesn't exist\n\t *\n\t * @param widgetLabel The label of the widget to return\n\t * @returns The WidgetRegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tget(widgetLabel: string): WidgetBaseConstructor | null;\n\n\t/**\n\t * Returns a boolean if an entry for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a widget registry item exists\n\t */\n\thas(widgetLabel: string): boolean;\n}\n\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nexport function isWidgetBaseConstructor(item: any): item is WidgetBaseConstructor {\n\treturn Boolean(item && item._type === WIDGET_BASE_TYPE);\n}\n\n/**\n * The WidgetRegistry implementation\n */\nexport class WidgetRegistry extends Evented implements WidgetRegistry {\n\n\t/**\n\t * internal map of labels and WidgetRegistryItem\n\t */\n\tprivate registry: Map<string, WidgetRegistryItem> = new Map<string, WidgetRegistryItem>();\n\n\thas(widgetLabel: string): boolean {\n\t\treturn this.registry.has(widgetLabel);\n\t}\n\n\tdefine(widgetLabel: string, item: WidgetRegistryItem): void {\n\t\tif (this.registry.has(widgetLabel)) {\n\t\t\tthrow new Error(`widget has already been registered for '${widgetLabel}'`);\n\t\t}\n\n\t\tthis.registry.set(widgetLabel, item);\n\n\t\tif (item instanceof Promise) {\n\t\t\titem.then((widgetCtor) => {\n\t\t\t\tthis.registry.set(widgetLabel, widgetCtor);\n\t\t\t\tthis.emit({\n\t\t\t\t\ttype: `loaded:${widgetLabel}`\n\t\t\t\t});\n\t\t\t\treturn widgetCtor;\n\t\t\t}, (error) => {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.emit({\n\t\t\t\ttype: `loaded:${widgetLabel}`\n\t\t\t});\n\t\t}\n\t}\n\n\tget(widgetLabel: string): WidgetBaseConstructor | null {\n\t\tif (!this.has(widgetLabel)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = this.registry.get(widgetLabel);\n\n\t\tif (isWidgetBaseConstructor(item)) {\n\t\t\treturn item;\n\t\t}\n\n\t\tif (item instanceof Promise) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst promise = (<WidgetBaseConstructorFunction> item)();\n\t\tthis.registry.set(widgetLabel, promise);\n\n\t\tpromise.then((widgetCtor) => {\n\t\t\tthis.registry.set(widgetLabel, widgetCtor);\n\t\t\tthis.emit({\n\t\t\t\ttype: `loaded:${widgetLabel}`\n\t\t\t});\n\t\t\treturn widgetCtor;\n\t\t}, (error) => {\n\t\t\tthrow error;\n\t\t});\n\n\t\treturn null;\n\t}\n}\n\nexport default WidgetRegistry;\n\n\n\n// WEBPACK FOOTER //\n// WidgetRegistry.ts","import { ProjectorMixin } from '@dojo/widget-core/mixins/Projector';\nimport Route from '@dojo/routing/Route';\nimport TodoApp from './widgets/TodoApp';\nimport router from './routes';\n\nconst root = document.querySelector('my-app') || undefined;\n\nconst Projector = ProjectorMixin(TodoApp);\nconst projector = new Projector();\n\n// TODO find a better place for this\nconst filterRoute = new Route<any, any>({\n\tpath: '/{filter}',\n\n\texec(request) {\n\t\tconst { filter } = request.params;\n\t\tprojector.setProperties({ filter });\n\t}\n});\nrouter.append(filterRoute);\n\nprojector.append(root);\nrouter.start();\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/main.ts","// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoapp\":\"_2helPkSp\",\"main\":\"xEb6rSqo\",\" _key\":\"todoApp.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoApp.css\n// module id = 27\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"filters\":\"_1lLYSj_L\",\"selected\":\"_2tgAruHL\",\" _key\":\"todoFilter.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoFilter.css\n// module id = 28\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"footer\":\"_1Aao3a1Z\",\"todoCount\":\"_2uMVmiNZ\",\"clearCompleted\":\"_2hpUH5HY\",\" _key\":\"todoFooter.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoFooter.css\n// module id = 29\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"title\":\"_1Ei11x0l\",\"newTodo\":\"_1fL1Y1K_\",\"toggleAll\":\"LW1AvW7w\",\" _key\":\"todoHeader.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoHeader.css\n// module id = 30\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoItem\":\"Roo8BkL2\",\"edit\":\"_3dDtP2Hl\",\"editing\":\"_3n3ruzKn\",\"view\":\"_1kpp6_fu\",\"toggle\":\"CZyfIY00\",\"todoLabel\":\"_1I8ANebp\",\"completed\":\"_1OfV0PVN\",\"destroy\":\"_3hkN9FMg\",\" _key\":\"todoItem.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoItem.css\n// module id = 31\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"todoList\":\"_3KGeCAdt\",\" _key\":\"todoList.css\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/todoList.css\n// module id = 32\n// module chunks = 0","/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pepjs/dist/pep.js\n// module id = 33\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/setimmediate/setImmediate.js\n// module id = 34\n// module chunks = 0","import { Handle } from '@dojo/interfaces/core';\nimport Promise from '@dojo/shim/Promise';\n\n/**\n * No operation function to replace own once instance is destoryed\n */\nfunction noop(): Promise<boolean> {\n\treturn Promise.resolve(false);\n};\n\n/**\n * No op function used to replace own, once instance has been destoryed\n */\nfunction destroyed(): never {\n\tthrow new Error('Call made to destroyed method');\n};\n\nexport class Destroyable {\n\t/**\n\t * register handles for the instance\n\t */\n\tprivate handles: Handle[];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.handles = [];\n\t}\n\n\t/**\n\t * Register handles for the instance that will be destroyed when `this.destroy` is called\n\t *\n\t * @param {Handle} handle The handle to add for the instance\n\t * @returns {Handle} a handle for the handle, removes the handle for the instance and calls destroy\n\t */\n\town(handle: Handle): Handle {\n\t\tconst { handles } = this;\n\t\thandles.push(handle);\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\thandles.splice(handles.indexOf(handle));\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Destrpys all handers registered for the instance\n\t *\n\t * @returns {Promise<any} a promise that resolves once all handles have been destroyed\n\t */\n\tdestroy(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.handles.forEach((handle) => {\n\t\t\t\thandle && handle.destroy && handle.destroy();\n\t\t\t});\n\t\t\tthis.destroy = noop;\n\t\t\tthis.own = destroyed;\n\t\t\tresolve(true);\n\t\t});\n\t}\n}\n\nexport default Destroyable;\n\n\n\n// WEBPACK FOOTER //\n// Destroyable.ts","import { Handle } from '@dojo/interfaces/core';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { createHandle } from './lang';\n\n/**\n * An object that provides the necessary APIs to be MapLike\n */\nexport interface MapLike<K, V> {\n\tget(key: K): V;\n\tset(key: K, value?: V): this;\n}\n\n/**\n * An internal type guard that determines if an value is MapLike or not\n *\n * @param value The value to guard against\n */\nfunction isMapLike(value: any): value is MapLike<any, any> {\n\treturn value && typeof value.get === 'function' && typeof value.set === 'function';\n}\n\nexport interface Indexable {\n\t[method: string]: any;\n}\n\n/**\n * The types of objects or maps where advice can be applied\n */\nexport type Targetable = MapLike<string, any> | Indexable;\n\ntype AdviceType = 'before' | 'after' | 'around';\n\n/**\n * A meta data structure when applying advice\n */\ninterface Advised {\n\treadonly id?: number;\n\tadvice?: Function;\n\tprevious?: Advised;\n\tnext?: Advised;\n\treadonly receiveArguments?: boolean;\n}\n\n/**\n * A function that dispatches advice which is decorated with additional\n * meta data about the advice to apply\n */\ninterface Dispatcher {\n\t[ type: string ]: Advised | undefined;\n\t(): any;\n\ttarget: any;\n\tbefore?: Advised;\n\taround?: Advised;\n\tafter?: Advised;\n}\n\nexport interface JoinPointDispatchAdvice<T> {\n\tbefore?: JoinPointBeforeAdvice[];\n\tafter?: JoinPointAfterAdvice<T>[];\n\treadonly joinPoint: Function;\n}\n\nexport interface JoinPointAfterAdvice<T> {\n\t/**\n\t * Advice which is applied *after*, receiving the result and arguments from the join point.\n\t *\n\t * @param result The result from the function being advised\n\t * @param args The arguments that were supplied to the advised function\n\t * @returns The value returned from the advice is then the result of calling the method\n\t */\n\t(result: T, ...args: any[]): T;\n}\n\nexport interface JoinPointAroundAdvice<T> {\n\t/**\n\t * Advice which is applied *around*.  The advising function receives the original function and\n\t * needs to return a new function which will then invoke the original function.\n\t *\n\t * @param origFn The original function\n\t * @returns A new function which will invoke the original function.\n\t */\n\t(origFn: GenericFunction<T>): (...args: any[]) => T;\n}\n\nexport interface JoinPointBeforeAdvice {\n\t/**\n\t * Advice which is applied *before*, receiving the original arguments, if the advising\n\t * function returns a value, it is passed further along taking the place of the original\n\t * arguments.\n\t *\n\t * @param args The arguments the method was called with\n\t */\n\t(...args: any[]): any[] | void;\n}\n\nexport interface GenericFunction<T> {\n\t(...args: any[]): T;\n}\n\n/**\n * A weak map of dispatchers used to apply the advice\n */\nconst dispatchAdviceMap = new WeakMap<Function, JoinPointDispatchAdvice<any>>();\n\n/**\n * A UID for tracking advice ordering\n */\nlet nextId = 0;\n\n/**\n * Internal function that advises a join point\n *\n * @param dispatcher The current advice dispatcher\n * @param type The type of before or after advice to apply\n * @param advice The advice to apply\n * @param receiveArguments If true, the advice will receive the arguments passed to the join point\n * @return The handle that will remove the advice\n */\nfunction adviseObject(\n\tdispatcher: Dispatcher | undefined,\n\ttype: AdviceType,\n\tadvice: Function | undefined,\n\treceiveArguments?: boolean\n): Handle {\n\tlet previous = dispatcher && dispatcher[type];\n\tlet advised: Advised | undefined = {\n\t\tid: nextId++,\n\t\tadvice: advice,\n\t\treceiveArguments: receiveArguments\n\t};\n\n\tif (previous) {\n\t\tif (type === 'after') {\n\t\t\t// add the listener to the end of the list\n\t\t\t// note that we had to change this loop a little bit to workaround a bizarre IE10 JIT bug\n\t\t\twhile (previous.next && (previous = previous.next)) {}\n\t\t\tprevious.next = advised;\n\t\t\tadvised.previous = previous;\n\t\t}\n\t\telse {\n\t\t\t// add to the beginning\n\t\t\tif (dispatcher) {\n\t\t\t\tdispatcher.before = advised;\n\t\t\t}\n\t\t\tadvised.next = previous;\n\t\t\tprevious.previous = advised;\n\t\t}\n\t}\n\telse {\n\t\tdispatcher && (dispatcher[type] = advised);\n\t}\n\n\tadvice = previous = undefined;\n\n\treturn createHandle(function () {\n\t\tlet { previous = undefined, next = undefined } = (advised || {});\n\n\t\tif (dispatcher && !previous && !next) {\n\t\t\tdispatcher[type] = undefined;\n\t\t}\n\t\telse {\n\t\t\tif (previous) {\n\t\t\t\tprevious.next = next;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdispatcher && (dispatcher[type] = next);\n\t\t\t}\n\n\t\t\tif (next) {\n\t\t\t\tnext.previous = previous;\n\t\t\t}\n\t\t}\n\t\tif (advised) {\n\t\t\tdelete advised.advice;\n\t\t}\n\t\tdispatcher = advised = undefined;\n\t});\n}\n\n/**\n * Advise a join point (function) with supplied advice\n *\n * @param joinPoint The function to be advised\n * @param type The type of advice to be applied\n * @param advice The advice to apply\n */\nfunction adviseJoinPoint<F extends GenericFunction<T>, T>(this: any, joinPoint: F, type: AdviceType, advice: JoinPointBeforeAdvice | JoinPointAfterAdvice<T> | JoinPointAroundAdvice<T>): F {\n\tlet dispatcher: F;\n\tif (type === 'around') {\n\t\tdispatcher = getJoinPointDispatcher(advice.apply(this, [ joinPoint ]));\n\t}\n\telse {\n\t\tdispatcher = getJoinPointDispatcher(joinPoint);\n\t\tconst adviceMap = dispatchAdviceMap.get(dispatcher);\n\t\tif (type === 'before') {\n\t\t\t(adviceMap.before || (adviceMap.before = [])).unshift(<JoinPointBeforeAdvice> advice);\n\t\t}\n\t\telse {\n\t\t\t(adviceMap.after || (adviceMap.after = [])).push(advice);\n\t\t}\n\t}\n\treturn dispatcher;\n}\n\n/**\n * An internal function that resolves or creates the dispatcher for a given join point\n *\n * @param target The target object or map\n * @param methodName The name of the method that the dispatcher should be resolved for\n * @return The dispatcher\n */\nfunction getDispatcherObject(target: Targetable, methodName: string): Dispatcher {\n\tconst existing = isMapLike(target) ? target.get(methodName) : target && target[methodName];\n\tlet dispatcher: Dispatcher;\n\n\tif (!existing || existing.target !== target) {\n\t\t/* There is no existing dispatcher, therefore we will create one */\n\t\tdispatcher = <Dispatcher> function (this: Dispatcher): any {\n\t\t\tlet executionId = nextId;\n\t\t\tlet args = arguments;\n\t\t\tlet results: any;\n\t\t\tlet before = dispatcher.before;\n\n\t\t\twhile (before) {\n\t\t\t\tif (before.advice) {\n\t\t\t\t\targs = before.advice.apply(this, args) || args;\n\t\t\t\t}\n\t\t\t\tbefore = before.next;\n\t\t\t}\n\n\t\t\tif (dispatcher.around && dispatcher.around.advice) {\n\t\t\t\tresults = dispatcher.around.advice(this, args);\n\t\t\t}\n\n\t\t\tlet after = dispatcher.after;\n\t\t\twhile (after && after.id !== undefined && after.id < executionId) {\n\t\t\t\tif (after.advice) {\n\t\t\t\t\tif (after.receiveArguments) {\n\t\t\t\t\t\tlet newResults = after.advice.apply(this, args);\n\t\t\t\t\t\tresults = newResults === undefined ? results : newResults;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresults = after.advice.call(this, results, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tafter = after.next;\n\t\t\t}\n\n\t\t\treturn results;\n\t\t};\n\n\t\tif (isMapLike(target)) {\n\t\t\ttarget.set(methodName, dispatcher);\n\t\t}\n\t\telse {\n\t\t\ttarget && (target[methodName] = dispatcher);\n\t\t}\n\n\t\tif (existing) {\n\t\t\tdispatcher.around = {\n\t\t\t\tadvice: function (target: any, args: any[]): any {\n\t\t\t\t\treturn existing.apply(target, args);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tdispatcher.target = target;\n\t}\n\telse {\n\t\tdispatcher = existing;\n\t}\n\n\treturn dispatcher;\n}\n\n/**\n * Returns the dispatcher function for a given joinPoint (method/function)\n *\n * @param joinPoint The function that is to be advised\n */\nfunction getJoinPointDispatcher<F extends GenericFunction<T>, T>(joinPoint: F): F {\n\n\tfunction dispatcher(this: Function, ...args: any[]): T {\n\t\tconst { before, after, joinPoint } = dispatchAdviceMap.get(dispatcher);\n\t\tif (before) {\n\t\t\targs = before.reduce((previousArgs, advice) => {\n\t\t\t\tconst currentArgs = advice.apply(this, previousArgs);\n\t\t\t\treturn currentArgs || previousArgs;\n\t\t\t}, args);\n\t\t}\n\t\tlet result = joinPoint.apply(this, args);\n\t\tif (after) {\n\t\t\tresult = after.reduce((previousResult, advice) => {\n\t\t\t\treturn advice.apply(this, [ previousResult ].concat(args));\n\t\t\t}, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/* We want to \"clone\" the advice that has been applied already, if this\n\t * joinPoint is already advised */\n\tif (dispatchAdviceMap.has(joinPoint)) {\n\t\tconst adviceMap = dispatchAdviceMap.get(joinPoint);\n\t\tlet { before, after } = adviceMap;\n\t\tif (before) {\n\t\t\tbefore = before.slice(0);\n\t\t}\n\t\tif (after) {\n\t\t\tafter = after.slice(0);\n\t\t}\n\t\tdispatchAdviceMap.set(dispatcher, {\n\t\t\tjoinPoint: adviceMap.joinPoint,\n\t\t\tbefore,\n\t\t\tafter\n\t\t});\n\t}\n\t/* Otherwise, this is a new joinPoint, so we will create the advice map afresh */\n\telse {\n\t\tdispatchAdviceMap.set(dispatcher, { joinPoint });\n\t}\n\n\treturn dispatcher as F;\n}\n\n/**\n * Apply advice *after* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The after advice\n */\nfunction afterJoinPoint<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAfterAdvice<T>): F {\n\treturn adviseJoinPoint(joinPoint, 'after', advice);\n}\n\n/**\n * Attaches \"after\" advice to be executed after the original method.\n * The advising function will receive the original method's return value and arguments object.\n * The value it returns will be returned from the method when it is called (even if the return value is undefined).\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original method's return value and arguments object\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction afterObject(target: Targetable, methodName: string, advice: (originalReturn: any, originalArgs: IArguments) => any): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'after', advice);\n}\n\n/**\n * Attaches \"after\" advice to be executed after the original method.\n * The advising function will receive the original method's return value and arguments object.\n * The value it returns will be returned from the method when it is called (even if the return value is undefined).\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original method's return value and arguments object\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function after(target: Targetable, methodName: string, advice: (originalReturn: any, originalArgs: IArguments) => any): Handle;\n/**\n * Apply advice *after* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The after advice\n */\nexport function after<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAfterAdvice<T>): F;\nexport function after<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointAfterAdvice<T>, objectAdvice?: (originalReturn: any, originalArgs: IArguments) => any): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn afterJoinPoint(joinPointOrTarget, <JoinPointAfterAdvice<T>> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn afterObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Apply advice *around* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The around advice\n */\nexport function aroundJoinPoint<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAroundAdvice<T>): F {\n\treturn adviseJoinPoint<F, T>(joinPoint, 'around', advice);\n}\n\n/**\n * Attaches \"around\" advice around the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original function\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function aroundObject(target: Targetable, methodName: string, advice: ((previous: Function) => Function)): Handle {\n\tlet dispatcher: Dispatcher | undefined = getDispatcherObject(target, methodName);\n\tlet previous = dispatcher.around;\n\tlet advised: Function | undefined;\n\tif (advice) {\n\t\tadvised = advice(function (this: Dispatcher): any {\n\t\t\tif (previous && previous.advice) {\n\t\t\t\treturn previous.advice(this, arguments);\n\t\t\t}\n\t\t});\n\t}\n\n\tdispatcher.around = {\n\t\tadvice: function (target: any, args: any[]): any {\n\t\t\treturn advised ? advised.apply(target, args) : previous && previous.advice && previous.advice(target, args);\n\t\t}\n\t};\n\n\treturn createHandle(function () {\n\t\tadvised = dispatcher = undefined;\n\t});\n}\n\n/**\n * Attaches \"around\" advice around the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original function\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function around(target: Targetable, methodName: string, advice: ((previous: Function) => Function)): Handle;\n/**\n * Apply advice *around* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The around advice\n */\nexport function around<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAroundAdvice<T>): F;\nexport function around<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointAroundAdvice<T>, objectAdvice?: ((previous: Function) => Function)): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn aroundJoinPoint(joinPointOrTarget, <JoinPointAroundAdvice<T>> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn aroundObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Apply advice *before* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The before advice\n */\nexport function beforeJoinPoint<F extends GenericFunction<any>>(joinPoint: F, advice: JoinPointBeforeAdvice): F {\n\treturn adviseJoinPoint(joinPoint, 'before', advice);\n}\n\n/**\n * Attaches \"before\" advice to be executed before the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original, and may return new arguments\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function beforeObject(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any[] | void): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'before', advice);\n}\n\n/**\n * Attaches \"before\" advice to be executed before the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original, and may return new arguments\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function before(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any[] | void): Handle;\n/**\n * Apply advice *before* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The before advice\n */\nexport function before<F extends GenericFunction<any>>(joinPoint: F, advice: JoinPointBeforeAdvice): F;\nexport function before<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointBeforeAdvice, objectAdvice?: ((...originalArgs: any[]) => any[] | void)): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn beforeJoinPoint(joinPointOrTarget, <JoinPointBeforeAdvice> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn beforeObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Attaches advice to be executed after the original method.\n * The advising function will receive the same arguments as the original method.\n * The value it returns will be returned from the method when it is called *unless* its return value is undefined.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original method\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function on(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'after', advice, true);\n}\n\n\n\n// WEBPACK FOOTER //\n// aspect.ts","import { Iterable, forOf, isIterable, isArrayLike } from '@dojo/shim/iterator';\nimport Promise, { Executor } from '@dojo/shim/Promise';\nimport { Thenable } from '@dojo/shim/interfaces';\nimport '@dojo/shim/Symbol';\n\n/**\n * Take a list of values, and if any are ExtensiblePromise objects, insert the wrapped Promise in its place,\n * otherwise use the original object. We use this to help use the native Promise methods like `all` and `race`.\n *\n * @param iterable    The list of objects to iterate over\n * @returns {any[]}    The list of objects, as an array, with ExtensiblePromises being replaced by Promises.\n */\nfunction unwrapPromises(iterable: Iterable<any> | any[]): any[] {\n\tconst unwrapped: any[] = [];\n\tforOf(iterable, function (item: any): void {\n\t\tunwrapped.push(item instanceof ExtensiblePromise ? item._promise : item);\n\t});\n\treturn unwrapped;\n}\n\nexport type DictionaryOfPromises<T> = { [_: string]: T | Promise<T> | Thenable<T> };\nexport type ListOfPromises<T> = Iterable<(T | Thenable<T>)>;\n\n/**\n * An extensible base to allow Promises to be extended in ES5. This class basically wraps a native Promise object,\n * giving an API like a native promise.\n */\nexport default class ExtensiblePromise<T> {\n\t/**\n\t * Return a rejected promise wrapped in an ExtensiblePromise\n\t *\n\t * @param {Error?} reason    The reason for the rejection\n\t * @returns {ExtensiblePromise}\n\t */\n\tstatic reject<T>(reason?: Error): any {\n\t\treturn new this<T>((resolve, reject) => reject(reason));\n\t}\n\n\t/**\n\t * Return a resolved promise wrapped in an ExtensiblePromise\n\t *\n\t * @param value The value to resolve the promise with\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tstatic resolve<F extends ExtensiblePromise<void>>(): F;\n\tstatic resolve<T, F extends ExtensiblePromise<T>>(value: (T | Thenable<T>)): F;\n\tstatic resolve<T, F extends ExtensiblePromise<T>>(value?: any): F {\n\t\treturn <F> new this<T>((resolve, reject) => resolve(value));\n\t}\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns {ExtensiblePromise}\n\t */\n\tstatic all<F extends ExtensiblePromise<{ [key: string]: T }>, T>(iterable: DictionaryOfPromises<T>): F;\n\tstatic all<F extends ExtensiblePromise<T[]>, T>(iterable: (T | Thenable<T>)[]): F;\n\tstatic all<F extends ExtensiblePromise<T[]>, T>(iterable: T | Thenable<T>): F;\n\tstatic all<F extends ExtensiblePromise<T[]>, T>(iterable: ListOfPromises<T>): F;\n\tstatic all<F extends ExtensiblePromise<any>, T>(iterable: DictionaryOfPromises<T> | ListOfPromises<T>): F {\n\t\tif (!isArrayLike(iterable) && !isIterable(iterable)) {\n\t\t\tconst promiseKeys = Object.keys(iterable);\n\n\t\t\treturn <F> new this((resolve, reject) => {\n\t\t\t\tPromise.all(promiseKeys.map(key => (<DictionaryOfPromises<T>> iterable)[ key ])).then((promiseResults: T[]) => {\n\t\t\t\t\tconst returnValue: {[_: string]: T} = {};\n\n\t\t\t\t\tpromiseResults.forEach((value: T, index: number) => {\n\t\t\t\t\t\treturnValue[ promiseKeys[ index ] ] = value;\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(returnValue);\n\t\t\t\t}, reject);\n\t\t\t});\n\t\t}\n\n\t\treturn <F> new this((resolve, reject) => {\n\t\t\tPromise.all(unwrapPromises(<Iterable<T>> iterable)).then(resolve, reject);\n\t\t});\n\t}\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when one of the passed in objects have resolved\n\t *\n\t * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns {ExtensiblePromise}\n\t */\n\tstatic race<F extends ExtensiblePromise<T>, T>(iterable: Iterable<(T | Thenable<T>)> | (T | Thenable<T>)[]): F {\n\t\treturn <F> new this((resolve, reject) => {\n\t\t\tPromise.race(unwrapPromises(iterable)).then(resolve, reject);\n\t\t});\n\t}\n\n\t/**\n\t * @type {Promise}\n\t * The wrapped promise\n\t */\n\treadonly _promise: Promise<T>;\n\n\t/**\n\t * Creates a new extended Promise.\n\t *\n\t * @constructor\n\t *\n\t * @param executor\n\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t * starting the asynchronous operation when it is invoked.\n\t *\n\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t * successfully, or the `reject` function when the operation fails.\n\t */\n\tconstructor(executor: Executor<T>) {\n\t\tthis._promise = new Promise<T>(executor);\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the wrapped Promise is rejected.\n\t *\n\t * @param {Function} onRejected A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tcatch(onRejected: (reason: Error) => T | Thenable<T> | void): ExtensiblePromise<T>;\n\tcatch<U>(onRejected: (reason: Error) => U | Thenable<U>): ExtensiblePromise<U> {\n\t\treturn this.then<U>(undefined, onRejected);\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the wrapped Promise resolves or is rejected.\n\t *\n\t * @param {Function} onFulfilled   A function to call to handle the resolution. The paramter to the function will be the resolved value, if any.\n\t * @param {Function} onRejected    A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tthen<U, V>(onFulfilled: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected: (reason: Error) => (V | Thenable<V>)): ExtensiblePromise<U | V>;\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => void): ExtensiblePromise<U>;\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => (U | Thenable<U>)): ExtensiblePromise<U> {\n\t\tconst e: Executor<U> = (resolve, reject) => {\n\t\t\tfunction handler(rejected: boolean, valueOrError: T | U | Error) {\n\t\t\t\tconst callback: ((value: T | U | Error) => (U | Thenable<U> | void)) | undefined = rejected ? onRejected : onFulfilled;\n\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresolve(<U> callback(<T> valueOrError));\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (rejected) {\n\t\t\t\t\treject(valueOrError);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresolve(<U> valueOrError);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._promise.then(handler.bind(null, false), handler.bind(null, true));\n\t\t};\n\n\t\treturn new (<{ new(executor: Executor<U>): any }> this.constructor)(e);\n\t}\n\n\treadonly [Symbol.toStringTag]: 'Promise';\n}\n\n\n\n// WEBPACK FOOTER //\n// ExtensiblePromise.ts","import { Thenable } from '@dojo/shim/interfaces';\nimport { Executor } from '@dojo/shim/Promise';\nimport ExtensiblePromise, { ListOfPromises, DictionaryOfPromises } from './ExtensiblePromise';\nimport { Iterable } from '@dojo/shim/iterator';\n\n/**\n * Describe the internal state of a task.\n */\nexport declare const enum State {\n\tFulfilled = 0,\n\tPending = 1,\n\tRejected = 2,\n\tCanceled = 3\n}\n\n/**\n * A type guard that determines if `value` is a `Task`\n * @param value The value to guard\n */\nexport function isTask<T>(value: any): value is Task<T> {\n\treturn Boolean(value && typeof value.cancel === 'function' && Array.isArray(value.children) && isThenable(value));\n}\n\n/**\n * Returns true if a given value has a `then` method.\n * @param {any} value The value to check if is Thenable\n * @returns {is Thenable<T>} A type guard if the value is thenable\n */\nexport function isThenable<T>(value: any): value is Thenable<T> {\n\treturn value && typeof value.then === 'function';\n}\n\n/**\n * Task is an extension of Promise that supports cancellation and the Task#finally method.\n */\nexport default class Task<T> extends ExtensiblePromise<T> {\n\t/**\n\t * Return a Task that resolves when one of the passed in objects have resolved\n\t *\n\t * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns {Task}\n\t */\n\tstatic race<F extends ExtensiblePromise<T>, T>(iterable: Iterable<(T | Thenable<T>)> | (T | Thenable<T>)[]): Task<T> {\n\t\treturn <Task<T>> super.race(iterable);\n\t}\n\n\t/**\n\t * Return a rejected promise wrapped in a Task\n\t *\n\t * @param {Error?} reason    The reason for the rejection\n\t * @returns {Task}\n\t */\n\tstatic reject<T>(reason?: Error): Task<T> {\n\t\treturn new this<T>((resolve, reject) => reject(reason));\n\t}\n\n\t/**\n\t * Return a resolved task.\n\t *\n\t * @param value The value to resolve with\n\t *\n\t * @return {Task}\n\t */\n\tpublic static resolve(): Task<void>;\n\tpublic static resolve<T>(value: (T | Thenable<T>)): Task<T>;\n\tpublic static resolve<T>(value?: any): Task<T> {\n\t\treturn new this<T>((resolve, reject) => resolve(value));\n\t}\n\n\tstatic all<T>(iterable: DictionaryOfPromises<T>): Task<{ [key: string]: T }>;\n\tstatic all<T>(iterable: (T | Thenable<T>)[]): Task<T[]>;\n\tstatic all<T>(iterable: T | Thenable<T>): Task<T[]>;\n\tstatic all<T>(iterable: ListOfPromises<T>): Task<T[]>;\n\tstatic all<T>(iterable: DictionaryOfPromises<T> | ListOfPromises<T>): Task<any> {\n\t\treturn <Task<T>> super.all(iterable);\n\t}\n\n\t/**\n\t * A cancelation handler that will be called if this task is canceled.\n\t */\n\tprivate canceler: () => void;\n\n\t/**\n\t * Children of this Task (i.e., Tasks that were created from this Task with `then` or `catch`).\n\t */\n\tprivate readonly children: Task<any>[];\n\n\t/**\n\t * The finally callback for this Task (if it was created by a call to `finally`).\n\t */\n\tprivate _finally: () => void;\n\n\t/**\n\t * The state of the task\n\t */\n\tprotected _state: State;\n\n\tget state() {\n\t\treturn this._state;\n\t}\n\n\t/**\n\t * @constructor\n\t *\n\t * Create a new task. Executor is run immediately. The canceler will be called when the task is canceled.\n\t *\n\t * @param executor Method that initiates some task\n\t * @param canceler Method to call when the task is canceled\n\t *\n\t */\n\tconstructor(executor: Executor<T>, canceler?: () => void) {\n\t\t// we have to initialize these to avoid a compiler error of using them before they are initialized\n\t\tlet superResolve: (value?: T | Thenable<T> | undefined) => void = () => {};\n\t\tlet superReject: (reason?: any) => void = () => {};\n\n\t\tsuper((resolve, reject) => {\n\t\t\tsuperResolve = resolve;\n\t\t\tsuperReject = reject;\n\t\t});\n\n\t\tthis._state = State.Pending;\n\n\t\tthis.children = [];\n\t\tthis.canceler = () => {\n\t\t\tif (canceler) {\n\t\t\t\tcanceler();\n\t\t\t}\n\t\t\tthis._cancel();\n\t\t};\n\n\t\t// Don't let the Task resolve if it's been canceled\n\t\ttry {\n\t\t\texecutor(\n\t\t\t\t(value) => {\n\t\t\t\t\tif (this._state === State.Canceled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._state = State.Fulfilled;\n\t\t\t\t\tsuperResolve(value);\n\t\t\t\t},\n\t\t\t\t(reason) => {\n\t\t\t\t\tif (this._state === State.Canceled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._state = State.Rejected;\n\t\t\t\t\tsuperReject(reason);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (reason) {\n\t\t\tthis._state = State.Rejected;\n\t\t\tsuperReject(reason);\n\t\t}\n\t}\n\n\t/**\n\t * Propagates cancellation down through a Task tree. The Task's state is immediately set to canceled. If a Thenable\n\t * finally task was passed in, it is resolved before calling this Task's finally callback; otherwise, this Task's\n\t * finally callback is immediately executed. `_cancel` is called for each child Task, passing in the value returned\n\t * by this Task's finally callback or a Promise chain that will eventually resolve to that value.\n\t */\n\tprivate _cancel(finallyTask?: void | Thenable<any>): void {\n\t\tthis._state = State.Canceled;\n\n\t\tconst runFinally = () => {\n\t\t\ttry {\n\t\t\t\treturn this._finally();\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\t// Any errors in a `finally` callback are completely ignored during cancelation\n\t\t\t}\n\t\t};\n\n\t\tif (this._finally) {\n\t\t\tif (isThenable(finallyTask)) {\n\t\t\t\tfinallyTask = (<Thenable<any>> finallyTask).then(runFinally, runFinally);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfinallyTask = runFinally();\n\t\t\t}\n\t\t}\n\n\t\tthis.children.forEach(function (child) {\n\t\t\tchild._cancel(finallyTask);\n\t\t});\n\t}\n\n\t/**\n\t * Immediately cancels this task if it has not already resolved. This Task and any descendants are synchronously set\n\t * to the Canceled state and any `finally` added downstream from the canceled Task are invoked.\n\t */\n\tcancel(): void {\n\t\tif (this._state === State.Pending) {\n\t\t\tthis.canceler();\n\t\t}\n\t}\n\n\tcatch(onRejected: (reason: Error) => T | Thenable<T> | void): Task<T>;\n\tcatch<U>(onRejected: (reason: Error) => U | Thenable<U>): Task<U> {\n\t\treturn this.then(undefined, onRejected);\n\t}\n\n\t/**\n\t * Allows for cleanup actions to be performed after resolution of a Promise.\n\t */\n\tfinally(callback: () => void): Task<T> {\n\t\t// if this task is already canceled, call the task\n\t\tif (this._state === State.Canceled) {\n\t\t\tcallback();\n\t\t\treturn this;\n\t\t}\n\n\t\tconst task = this.then<any>(\n\t\t\tvalue => Task.resolve(callback()).then(() => value),\n\t\t\treason => Task.resolve(callback()).then(() => {\n\t\t\t\tthrow reason;\n\t\t\t})\n\t\t);\n\n\t\t// Keep a reference to the callback; it will be called if the Task is canceled\n\t\ttask._finally = callback;\n\t\treturn task;\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the Task resolves or is rejected.\n\t *\n\t * @param {Function} onFulfilled   A function to call to handle the resolution. The paramter to the function will be the resolved value, if any.\n\t * @param {Function} onRejected    A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tthen<U, V>(onFulfilled: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected: (reason: Error) => (V | Thenable<V>)): Task<U | V>;\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => void): Task<U>;\n\tthen<U>(onFulfilled?: ((value: T) => (U | Thenable<U> | undefined)) | undefined, onRejected?: (reason: Error) => (U | Thenable<U>)): Task<U>;\n\tthen<U>(onFulfilled?: (value?: T) => U | Thenable<U>, onRejected?: (error: Error) => U | Thenable<U>): Task<U> {\n\t\t// FIXME\n\t\t// tslint:disable-next-line:no-var-keyword\n\t\tvar task = <Task<U>> super.then<U>(\n\t\t\t// Don't call the onFulfilled or onRejected handlers if this Task is canceled\n\t\t\tfunction (value) {\n\t\t\t\tif (task._state === State.Canceled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (onFulfilled) {\n\t\t\t\t\treturn onFulfilled(value);\n\t\t\t\t}\n\t\t\t\treturn <any> value;\n\t\t\t},\n\t\t\tfunction (error) {\n\t\t\t\tif (task._state === State.Canceled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (onRejected) {\n\t\t\t\t\treturn onRejected(error);\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t);\n\n\t\ttask.canceler = () => {\n\t\t\t// If task's parent (this) hasn't been resolved, cancel it; downward propagation will start at the first\n\t\t\t// unresolved parent\n\t\t\tif (this._state === State.Pending) {\n\t\t\t\tthis.cancel();\n\t\t\t}\n\t\t\t// If task's parent has been resolved, propagate cancelation to the task's descendants\n\t\t\telse {\n\t\t\t\ttask._cancel();\n\t\t\t}\n\t\t};\n\n\t\t// Keep track of child Tasks for propogating cancelation back down the chain\n\t\tthis.children.push(task);\n\n\t\treturn task;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// Task.ts","/**\n * Returns a v4 compliant UUID.\n *\n * @returns {string}\n */\nexport default function uuid(): string {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tconst r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n\t\treturn v.toString(16);\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// uuid.ts","import { Hash } from '@dojo/core/interfaces';\nimport UrlSearchParams from '@dojo/core/UrlSearchParams';\nimport { Thenable } from '@dojo/shim/interfaces';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { DefaultParameters, Context, Parameters, Request } from './interfaces';\nimport { deconstruct as deconstructPath, match as matchPath, DeconstructedPath } from './lib/path';\nimport { findRouter, hasBeenAppended, LinkParams } from './Router';\n\n/**\n * Hash object where keys are parameter names and keys are arrays of one or more\n * parameter values.\n */\nexport type SearchParams = Hash<string[]>;\n\n/**\n * Describes whether a route matched.\n */\nexport interface MatchResult<P> {\n\t/**\n\t * Whether there are path segments that weren't matched by this route.\n\t */\n\thasRemaining: boolean;\n\n\t/**\n\t * Position in the segments array that the remaining unmatched segments start.\n\t */\n\toffset: number;\n\n\t/**\n\t * Any extracted parameters. Only available if the route matched.\n\t */\n\tparams: P;\n\n\t/**\n\t * Values for named segments in the path, in order of occurrence.\n\t */\n\trawPathValues: string[];\n\n\t/**\n\t * Values for known named query parameters that were actually present in the\n\t * path.\n\t */\n\trawSearchParams: SearchParams;\n}\n\n/**\n * A request handler.\n */\nexport type Handler = (request: Request<Context, Parameters>) => void | Thenable<any>;\n\n/**\n * Describes the selection of a particular route.\n */\nexport interface Selection {\n\t/**\n\t * Which handler should be called when the route is executed.\n\t */\n\thandler: Handler;\n\n\t/**\n\t * The selected path.\n\t */\n\tpath: DeconstructedPath;\n\n\t/**\n\t * The extracted parameters.\n\t */\n\tparams: Parameters;\n\n\t/**\n\t * Values for named segments in the path, in order of occurrence.\n\t */\n\trawPathValues: string[];\n\n\t/**\n\t * Values for known named query parameters that were actually present in the\n\t * path.\n\t */\n\trawSearchParams: SearchParams;\n\n\t/**\n\t * The selected route.\n\t */\n\troute: Route<Context, Parameters>;\n}\n\n/**\n * The options for the route.\n */\nexport interface RouteOptions<C, P> {\n\t/**\n\t * Path the route matches against. Pathname segments may be named, same for query parameters. Leading slashes are\n\t * ignored. Defaults to `/`.\n\t */\n\tpath?: string;\n\n\t/**\n\t * If the `path` option contains a trailing slash (in the pathname component), the route will only match against\n\t * another pathname that contains a trailing slash, and vice-versa if the path does not contain a trailing slash.\n\t * Defaults to `true`, change to `false` to allow routes to match regardless of trailing slashes.\n\t */\n\ttrailingSlashMustMatch?: boolean;\n\n\t/**\n\t * A handler called when the route is executed.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\texec?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * If specified, causes the route to be selected if there are no nested routes that match the remainder of\n\t * the dispatched path. When the route is executed, this handler is called rather than `exec()`.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\tfallback?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * Callback used to determine whether the route should be selected after it's been matched.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t * @return Returning `true` causes the route to be selected. Returning a string indicates that a redirect is\n\t *   required; the string should be the path to redirect to.\n\t */\n\tguard?(request: Request<C, P>): string | boolean;\n\n\t/**\n\t * If specified, and the route is the final route in the hierarchy, when the route is executed, this handler is\n\t * called rather than `exec()`.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\tindex?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * Callback used for constructing the `params` object from extracted parameters, and validating the parameters.\n\t * @param fromPathname Array of parameter values extracted from the pathname.\n\t * @param searchParams Parameters extracted from the search component.\n\t * @return If `null` prevents the route from being selected, else the value for the `params` object.\n\t */\n\tparams?(fromPathname: string[], searchParams: UrlSearchParams): null | P;\n}\n\n// Store parent relationships in a separate map, since it's the parent that adds entries to this map. Parents shouldn't\n// change the private state of their children.\nconst parentMap = new WeakMap<Route<Context, Parameters>, Route<Context, Parameters>>();\n\nconst noop = () => {\n};\n\nfunction computeDefaultParams(parameters: string[], searchParameters: string[], fromPathname: string[], searchParams: UrlSearchParams): null | DefaultParameters {\n\tconst params: DefaultParameters = {};\n\tparameters.forEach((name, index) => {\n\t\tparams[ name ] = fromPathname[ index ];\n\t});\n\tsearchParameters.forEach(name => {\n\t\tconst value = searchParams.get(name);\n\t\tif (value !== undefined) {\n\t\t\tparams[ name ] = value;\n\t\t}\n\t});\n\n\treturn params;\n}\n\nexport class Route<C extends Context, P extends Parameters> {\n\tprivate _path: DeconstructedPath;\n\tprivate _routes: Route<Context, Parameters>[];\n\tprivate _trailingSlashMustMatch: boolean;\n\tprivate _computeParams: (fromPathname: string[], searchParams: UrlSearchParams) => null | P | DefaultParameters;\n\tprivate _exec?: Handler;\n\tprivate _fallback?: Handler;\n\tprivate _guard: ((request: Request<C, P | DefaultParameters>) => string | boolean) | undefined;\n\tprivate _index?: Handler;\n\n\tget parent() {\n\t\treturn parentMap.get(this);\n\t}\n\n\tget path(this: Route<C, P>) {\n\t\treturn this._path;\n\t}\n\n\tconstructor(options: RouteOptions<C, P> = {}) {\n\t\tconst { exec, fallback, guard, index, params: computeParams, path, trailingSlashMustMatch = true } = options;\n\n\t\tif (path && /#/.test(path)) {\n\t\t\tthrow new TypeError('Path must not contain \\'#\\'');\n\t\t}\n\n\t\tconst deconstructedPath = deconstructPath(path || '/');\n\t\tconst { parameters, searchParameters } = deconstructedPath;\n\n\t\tif (computeParams) {\n\t\t\tif (parameters.length === 0 && searchParameters.length === 0) {\n\t\t\t\tthrow new TypeError('Can\\'t specify params() if path doesn\\'t contain any');\n\t\t\t}\n\n\t\t\tthis._computeParams = computeParams;\n\t\t}\n\t\telse {\n\t\t\tthis._computeParams = (fromPathname: string[], searchParams: UrlSearchParams) => {\n\t\t\t\treturn computeDefaultParams(parameters, searchParameters, fromPathname, searchParams);\n\t\t\t};\n\t\t}\n\n\t\tthis._exec = exec;\n\t\tthis._fallback = fallback;\n\t\tthis._guard = guard;\n\t\tthis._index = index;\n\t\tthis._path = deconstructedPath;\n\t\tthis._routes = [];\n\t\tthis._trailingSlashMustMatch = trailingSlashMustMatch;\n\t}\n\n\tappend(add: Route<Context, Parameters> | Route<Context, Parameters>[]) {\n\t\tconst append = (route: Route<Context, Parameters>) => {\n\t\t\tif (hasBeenAppended(route)) {\n\t\t\t\tthrow new Error('Cannot append route that has already been appended');\n\t\t\t}\n\n\t\t\tthis._routes.push(route);\n\t\t\tparentMap.set(route, this);\n\t\t};\n\n\t\tif (Array.isArray(add)) {\n\t\t\tfor (const route of add) {\n\t\t\t\tappend(route);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tappend(add);\n\t\t}\n\t}\n\n\tlink(params?: LinkParams): string {\n\t\treturn findRouter(this).link(this, params);\n\t}\n\n\tmatch(segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): null | MatchResult<DefaultParameters | P> {\n\t\tconst result = matchPath(this._path, segments);\n\t\tif (result === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!result.hasRemaining && this._trailingSlashMustMatch && this._path.trailingSlash !== hasTrailingSlash) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Only extract the search params defined in the route's path.\n\t\tconst knownSearchParams = this._path.searchParameters.reduce<SearchParams>((list, name) => {\n\t\t\tconst value = searchParams.getAll(name);\n\t\t\tif (value !== undefined) {\n\t\t\t\tlist[ name ] = value;\n\t\t\t}\n\t\t\treturn list;\n\t\t}, {});\n\n\t\tconst params = this._computeParams(result.values, new UrlSearchParams(knownSearchParams));\n\t\tif (params === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\thasRemaining: result.hasRemaining,\n\t\t\toffset: result.offset,\n\t\t\tparams,\n\t\t\trawPathValues: result.values,\n\t\t\trawSearchParams: knownSearchParams\n\t\t};\n\t}\n\n\tselect(context: C, segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): string | Selection[] {\n\t\tconst matchResult = this.match(segments, hasTrailingSlash, searchParams);\n\n\t\t// Return early if possible.\n\t\tif (!matchResult || matchResult.hasRemaining && this._routes.length === 0 && !this._fallback) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { params } = matchResult;\n\t\tif (this._guard) {\n\t\t\tconst guardResult = this._guard({ context, params });\n\t\t\tif (typeof guardResult === 'string') {\n\t\t\t\treturn guardResult;\n\t\t\t}\n\t\t\tif (!guardResult) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tlet handler = this._exec;\n\t\tlet redirect: string | undefined;\n\t\tlet remainingSelection: Selection[] | undefined;\n\t\tlet selected = false;\n\n\t\tif (matchResult.hasRemaining) {\n\t\t\t// Match the remaining segments. Return a hierarchy if nested routes were selected.\n\t\t\tconst remainingSegments = segments.slice(matchResult.offset);\n\t\t\tselected = this._routes.some((nested) => {\n\t\t\t\tconst nestedResult = nested.select(context, remainingSegments, hasTrailingSlash, searchParams);\n\t\t\t\tif (typeof nestedResult === 'string') {\n\t\t\t\t\tredirect = nestedResult;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (nestedResult.length > 0) {\n\t\t\t\t\tremainingSelection = nestedResult;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t// No remaining segments matched, only select this route if a fallback handler was specified.\n\t\t\tif (!selected && this._fallback) {\n\t\t\t\tselected = true;\n\t\t\t\thandler = this._fallback;\n\t\t\t}\n\t\t}\n\t\t// Select this route, configure the index handler if specified.\n\t\telse {\n\t\t\tselected = true;\n\t\t\tif (this._index) {\n\t\t\t\thandler = this._index;\n\t\t\t}\n\t\t}\n\n\t\tif (!selected) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (redirect !== undefined) {\n\t\t\treturn redirect;\n\t\t}\n\n\t\tconst { rawPathValues, rawSearchParams } = matchResult;\n\t\tconst selection = {\n\t\t\t// Use a noop handler if exec was not provided. Something needs to be returned otherwise the router may\n\t\t\t// think no routes were selected.\n\t\t\thandler: handler || noop,\n\t\t\tpath: this.path,\n\t\t\tparams,\n\t\t\trawPathValues,\n\t\t\trawSearchParams,\n\t\t\troute: this\n\t\t};\n\t\treturn remainingSelection ? [ selection, ...remainingSelection ] : [ selection ];\n\t}\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// Route.ts","import global from '@dojo/core/global';\nimport on from '@dojo/core/on';\nimport { HistoryBase } from './HistoryBase';\nimport { History, HistoryOptions } from './interfaces';\n\n/**\n * Options for creating HashHistory instances.\n */\nexport interface HashHistoryOptions extends HistoryOptions {\n\t/**\n\t * A DOM window object. HashHistory uses the `location` property and\n\t * listens to `hashchange` events. The current value is initialized to the\n\t * initial hash.\n\t */\n\twindow: Window;\n}\n\nexport class HashHistory extends HistoryBase implements History {\n\tprivate _current: string;\n\tprivate _browserLocation: Location;\n\n\tget current() {\n\t\treturn this._current;\n\t}\n\n\tconstructor({ window }: HashHistoryOptions = { window: global }) {\n\t\tsuper({});\n\n\t\tconst { location: browserLocation } = window;\n\n\t\tthis._current = browserLocation.hash.slice(1);\n\t\tthis._browserLocation = browserLocation;\n\n\t\tthis.own(on(window, 'hashchange', () => {\n\t\t\tconst path = browserLocation.hash.slice(1);\n\n\t\t\t// Ignore hashchange for the current path. Guards against browsers firing hashchange when the history\n\t\t\t// manager sets the hash.\n\t\t\tif (path !== this._current) {\n\t\t\t\tthis._current = path;\n\t\t\t\tthis.emit({\n\t\t\t\t\ttype: 'change',\n\t\t\t\t\tvalue: path\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tprefix(path: string) {\n\t\treturn `#${path}`;\n\t}\n\n\tset(path: string) {\n\t\tif (this._current === path) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._current = path;\n\t\tthis._browserLocation.hash = this.prefix(path);\n\t\tthis.emit({\n\t\t\ttype: 'change',\n\t\t\tvalue: path\n\t\t});\n\t}\n\n\treplace(path: string) {\n\t\tif (this._current === path) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._current = path;\n\n\t\tconst { pathname, search } = this._browserLocation;\n\t\tthis._browserLocation.replace(pathname + search + this.prefix(path));\n\n\t\tthis.emit({\n\t\t\ttype: 'change',\n\t\t\tvalue: path\n\t\t});\n\t}\n}\n\nexport default HashHistory;\n\n\n\n// WEBPACK FOOTER //\n// HashHistory.ts","import { BaseEventedEvents, Evented } from '@dojo/core/Evented';\nimport { EventedListenerOrArray } from '@dojo/interfaces/bases';\nimport { Handle } from '@dojo/interfaces/core';\nimport { History, HistoryChangeEvent } from './interfaces';\n\nexport interface HistoryEvents extends BaseEventedEvents {\n\t(type: 'change', listener: EventedListenerOrArray<History, HistoryChangeEvent>): Handle;\n}\n\nexport class HistoryBase extends Evented {\n\ton: HistoryEvents;\n}\n\nexport default HistoryBase;\n\n\n\n// WEBPACK FOOTER //\n// HistoryBase.ts","import { ArrayLike } from './interfaces';\nimport { hasClass } from './support/decorators';\nimport global from './support/global';\nimport { forOf, IterableIterator, Iterable, ShimIterator } from './iterator';\nimport './Symbol';\n\nexport namespace Shim {\n\texport class Set<T> {\n\t\tprivate readonly _setData: T[] = [];\n\n\t\tconstructor(iterable?: ArrayLike<T> | Iterable<T>) {\n\t\t\tif (iterable) {\n\t\t\t\tforOf(iterable, (value) => this.add(value));\n\t\t\t}\n\t\t};\n\n\t\tadd(value: T): this {\n\t\t\tif (this.has(value)) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis._setData.push(value);\n\t\t\treturn this;\n\t\t};\n\n\t\tclear(): void {\n\t\t\tthis._setData.length = 0;\n\t\t};\n\n\t\tdelete(value: T): boolean {\n\t\t\tconst idx = this._setData.indexOf(value);\n\t\t\tif (idx === -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._setData.splice(idx, 1);\n\t\t\treturn true;\n\t\t};\n\n\t\tentries(): IterableIterator<[T, T]> {\n\t\t\treturn new ShimIterator<[any, any]>(this._setData.map<[any, any]>((value) => [ value, value ]));\n\t\t};\n\n\t\tforEach(callbackfn: (value: T, index: T, set: Set<T>) => void, thisArg?: any): void {\n\t\t\tconst iterator = this.values();\n\t\t\tlet result = iterator.next();\n\t\t\twhile (!result.done) {\n\t\t\t\tcallbackfn.call(thisArg, result.value, result.value, this);\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t};\n\n\t\thas(value: T): boolean {\n\t\t\treturn this._setData.indexOf(value) > -1;\n\t\t};\n\n\t\tkeys(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t};\n\n\t\tget size(): number {\n\t\t\treturn this._setData.length;\n\t\t};\n\n\t\tvalues(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t};\n\n\t\t[Symbol.iterator](): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t};\n\n\t\t[Symbol.toStringTag] = 'Set';\n\t}\n}\n\n@hasClass('es6-set', global.Set, Shim.Set)\nexport default class Set<T> {\n\t/* istanbul ignore next */\n\tconstructor(iterable?: ArrayLike<T> | Iterable<T>) { };\n\n\t/* istanbul ignore next */\n\tadd(value: T): this { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tclear(): void { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tdelete(value: T): boolean { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tentries(): IterableIterator<[T, T]> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tforEach(callbackfn: (value: T, index: T, set: Set<T>) => void, thisArg?: any): void { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\thas(value: T): boolean { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tkeys(): IterableIterator<T> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tget size(): number { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\tvalues(): IterableIterator<T> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\t[Symbol.iterator](): IterableIterator<T> { throw new Error('Abstract method'); };\n\t/* istanbul ignore next */\n\t[Symbol.toStringTag] = 'Set';\n}\n\n\n\n// WEBPACK FOOTER //\n// Set.ts","import global from './support/global';\n\n/**\n * The smallest interval between two representable numbers.\n */\nexport const EPSILON = 1;\n\n/**\n * The maximum safe integer in JavaScript\n */\nexport const MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n/**\n * The minimum safe integer in JavaScript\n */\nexport const MIN_SAFE_INTEGER = -MAX_SAFE_INTEGER;\n\n/**\n * Determines whether the passed value is NaN without coersion.\n *\n * @param value The value to test\n * @return true if the value is NaN, false if it is not\n */\nexport function isNaN(value: any): boolean {\n\treturn typeof value === 'number' && global.isNaN(value);\n}\n\n/**\n * Determines whether the passed value is a finite number without coersion.\n *\n * @param value The value to test\n * @return true if the value is finite, false if it is not\n */\nexport function isFinite(value: any): boolean {\n\treturn typeof value === 'number' && global.isFinite(value);\n}\n\n/**\n * Determines whether the passed value is an integer.\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nexport function isInteger(value: any): boolean {\n\treturn isFinite(value) && Math.floor(value) === value;\n}\n\n/**\n * Determines whether the passed value is an integer that is 'safe,' meaning:\n *   1. it can be expressed as an IEEE-754 double precision number\n *   2. it has a one-to-one mapping to a mathematical integer, meaning its\n *      IEEE-754 representation cannot be the result of rounding any other\n *      integer to fit the IEEE-754 representation\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nexport function isSafeInteger(value: any): boolean {\n\treturn isInteger(value) && Math.abs(value) <= MAX_SAFE_INTEGER;\n}\n\n\n\n// WEBPACK FOOTER //\n// number.ts","import has from './support/has';\nimport { isSymbol } from './Symbol';\n\nnamespace Shim {\n\texport function is(value1: any, value2: any): boolean {\n\t\tif (value1 === value2) {\n\t\t\treturn value1 !== 0 || 1 / value1 === 1 / value2; // -0\n\t\t}\n\t\treturn value1 !== value1 && value2 !== value2; // NaN\n\t}\n\n\texport function getOwnPropertySymbols(o: any): symbol[] {\n\t\treturn Object.getOwnPropertyNames(o).filter((key) => Boolean(key.match(/^@@.+/)))\n\t\t\t.map((key) => Symbol.for(key.substring(2)));\n\t}\n\n\texport function getOwnPropertyNames(o: any): string[] {\n\t\treturn Object.getOwnPropertyNames(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t}\n\n\texport function symbolAwareKeys(o: any): string[] {\n\t\treturn Object.keys(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t}\n\n\texport function getOwnPropertyDescriptor(o: any, prop: string | symbol): PropertyDescriptor | undefined {\n\t\tif (isSymbol(prop)) {\n\t\t\treturn (<any> Object).getOwnPropertyDescriptor(o, prop);\n\t\t} else {\n\t\t\treturn Object.getOwnPropertyDescriptor(o, prop);\n\t\t}\n\t}\n\n\texport function values(o: any): any[] {\n\t\treturn keys(o).map(key => o[ key ]);\n\t}\n\n\texport function entries(o: any): any[] {\n\t\treturn keys(o).map(key => [ key, o[ key ] ]);\n\t}\n}\n\n/**\n * Determines whether two values are the same value.\n *\n * @param value1 The first value to compare\n * @param value2 The second value to compare\n * @return true if the values are the same; false otherwise\n */\nexport const is: (value1: any, value2: any) => boolean = 'is' in Object\n\t? (<any> Object).is\n\t: Shim.is;\n\n/**\n * Detect if there is native support for Symbol properties in Object\n */\nconst hasGetOwnPropertySymbols = has('es6-symbol') && 'getOwnPropertySymbols' in Object;\n\n/**\n * Returns an array of own properties who key is a symbol\n *\n * @param o The object to return the properties for\n */\nexport const getOwnPropertySymbols: (o: any) => symbol[] = hasGetOwnPropertySymbols\n\t? (<any> Object).getOwnPropertySymbols\n\t: Shim.getOwnPropertySymbols;\n\n/**\n * Returns an array of own properties who key is a string\n *\n * @param o The object to return the properties for\n */\n/* intentionally detecting `getOwnPropertySymbols` because we should should provide the shim\n * when there is no support for symbols */\nexport const getOwnPropertyNames: (o: any) => string[] = hasGetOwnPropertySymbols\n\t? Object.getOwnPropertyNames\n\t: Shim.getOwnPropertyNames;\n\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\n/* intentionally detecting `getOwnPropertySymbols` because we should should provide the shim\n * when there is no support for symbols */\nexport const keys: (o: any) => string[] = hasGetOwnPropertySymbols\n\t? Object.keys\n\t: Shim.symbolAwareKeys;\n\n/**\n * Returns the values of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods.\n */\nexport const values: (o: any) => any[] = 'values' in Object\n\t? (<any> Object).values\n\t: Shim.values;\n\n/**\n * Returns the keys and values of the enumerable properties and methods of an object. Each entry will be returned as an\n * array holding the [key, value].\n * @param o Object that contains the properties and methods.\n */\nexport const entries: (o: any) => any[] = 'entries' in Object\n\t? (<any> Object).entries\n\t: Shim.entries;\n\nexport const getOwnPropertyDescriptor: (o: any, property: string | symbol) => PropertyDescriptor | undefined = hasGetOwnPropertySymbols\n\t? Object.getOwnPropertyDescriptor\n\t: Shim.getOwnPropertyDescriptor;\n\nfunction getOwnPropertyDescriptorsWrapper(o: any): any {\n\tlet descriptors: {[_: string]: PropertyDescriptor} = getOwnPropertyNames(o).reduce((descriptors: {[_: string]: PropertyDescriptor}, key: string) => {\n\t\tdescriptors[ key ] = <PropertyDescriptor> getOwnPropertyDescriptor(o, key);\n\t\treturn descriptors;\n\t}, {});\n\n\tgetOwnPropertySymbols(o).forEach((sym: symbol) => {\n\t\tdescriptors[ sym ] = <PropertyDescriptor> getOwnPropertyDescriptor(o, sym);\n\t});\n\n\treturn descriptors;\n}\n\n/* Return descriptors for enumerable and non enumerable properties on an object */\nexport const getOwnPropertyDescriptors: (o: any) => any = 'getOwnPropertyDescriptors' in Object\n\t? (<any> Object).getOwnPropertyDescriptors\n\t: getOwnPropertyDescriptorsWrapper;\n\n\n\n// WEBPACK FOOTER //\n// object.ts","import has from './support/has';\nimport { wrapNative } from './support/util';\n\n/**\n * The minimum location of high surrogates\n */\nexport const HIGH_SURROGATE_MIN = 0xD800;\n\n/**\n * The maximum location of high surrogates\n */\nexport const HIGH_SURROGATE_MAX = 0xDBFF;\n\n/**\n * The minimum location of low surrogates\n */\nexport const LOW_SURROGATE_MIN = 0xDC00;\n\n/**\n * The maximum location of low surrogates\n */\nexport const LOW_SURROGATE_MAX = 0xDFFF;\n\nexport namespace Shim {\n\t/**\n\t * Validates that text is defined, and normalizes position (based on the given default if the input is NaN).\n\t * Used by startsWith, includes, and endsWith.\n\t *\n\t * @return Normalized position.\n\t */\n\tfunction normalizeSubstringArgs(name: string, text: string, search: string, position: number,\n\t\t\tisEnd: boolean = false): [ string, string, number ] {\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.' + name + ' requires a valid string to search against.');\n\t\t}\n\n\t\tconst length = text.length;\n\t\tposition = position !== position ? (isEnd ? length : 0) : position;\n\t\treturn [ text, String(search), Math.min(Math.max(position, 0), length) ];\n\t}\n\n\texport function raw(callSite: TemplateStringsArray, ...substitutions: any[]): string {\n\t\tlet rawStrings = callSite.raw;\n\t\tlet result = '';\n\t\tlet numSubstitutions = substitutions.length;\n\n\t\tif (callSite == null || callSite.raw == null) {\n\t\t\tthrow new TypeError('string.raw requires a valid callSite object with a raw value');\n\t\t}\n\n\t\tfor (let i = 0, length = rawStrings.length; i < length; i++) {\n\t\t\tresult += rawStrings[i] + (i < numSubstitutions && i < length - 1 ? substitutions[i] : '');\n\t\t}\n\n\t\treturn result;\n\t}\n\n\texport function fromCodePoint(...codePoints: number[]): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.fromCodePoint\n\t\tconst length = arguments.length;\n\t\tif (!length) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromCharCode = String.fromCharCode;\n\t\tconst MAX_SIZE = 0x4000;\n\t\tlet codeUnits: number[] = [];\n\t\tlet index = -1;\n\t\tlet result = '';\n\n\t\twhile (++index < length) {\n\t\t\tlet codePoint = Number(arguments[index]);\n\n\t\t\t// Code points must be finite integers within the valid range\n\t\t\tlet isValid = isFinite(codePoint) && Math.floor(codePoint) === codePoint &&\n\t\t\t\tcodePoint >= 0 && codePoint <= 0x10FFFF;\n\t\t\tif (!isValid) {\n\t\t\t\tthrow RangeError('string.fromCodePoint: Invalid code point ' + codePoint);\n\t\t\t}\n\n\t\t\tif (codePoint <= 0xFFFF) {\n\t\t\t\t// BMP code point\n\t\t\t\tcodeUnits.push(codePoint);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Astral code point; split in surrogate halves\n\t\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\tlet highSurrogate = (codePoint >> 10) + HIGH_SURROGATE_MIN;\n\t\t\t\tlet lowSurrogate = (codePoint % 0x400) + LOW_SURROGATE_MIN;\n\t\t\t\tcodeUnits.push(highSurrogate, lowSurrogate);\n\t\t\t}\n\n\t\t\tif (index + 1 === length || codeUnits.length > MAX_SIZE) {\n\t\t\t\tresult += fromCharCode.apply(null, codeUnits);\n\t\t\t\tcodeUnits.length = 0;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\texport function codePointAt(text: string, position: number = 0): number | undefined {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.codePointAt\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.codePointAt requries a valid string.');\n\t\t}\n\t\tconst length = text.length;\n\n\t\tif (position !== position) {\n\t\t\tposition = 0;\n\t\t}\n\t\tif (position < 0 || position >= length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Get the first code unit\n\t\tconst first = text.charCodeAt(position);\n\t\tif (first >= HIGH_SURROGATE_MIN && first <= HIGH_SURROGATE_MAX && length > position + 1) {\n\t\t\t// Start of a surrogate pair (high surrogate and there is a next code unit); check for low surrogate\n\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\tconst second = text.charCodeAt(position + 1);\n\t\t\tif (second >= LOW_SURROGATE_MIN && second <= LOW_SURROGATE_MAX) {\n\t\t\t\treturn (first - HIGH_SURROGATE_MIN) * 0x400 + second - LOW_SURROGATE_MIN + 0x10000;\n\t\t\t}\n\t\t}\n\t\treturn first;\n\t}\n\n\t/* TODO: Missing normalize */\n\n\texport function repeat(text: string, count: number = 0): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.repeat\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\t\tif (count !== count) {\n\t\t\tcount = 0;\n\t\t}\n\t\tif (count < 0 || count === Infinity) {\n\t\t\tthrow new RangeError('string.repeat requires a non-negative finite count.');\n\t\t}\n\n\t\tlet result = '';\n\t\twhile (count) {\n\t\t\tif (count % 2) {\n\t\t\t\tresult += text;\n\t\t\t}\n\t\t\tif (count > 1) {\n\t\t\t\ttext += text;\n\t\t\t}\n\t\t\tcount >>= 1;\n\t\t}\n\t\treturn result;\n\t}\n\n\texport function startsWith(text: string, search: string, position: number = 0): boolean {\n\t\tsearch = String(search);\n\t\t[ text, search, position ] = normalizeSubstringArgs('startsWith', text, search, position);\n\n\t\tconst end = position + search.length;\n\t\tif (end > text.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(position, end) === search;\n\t}\n\n\texport function endsWith(text: string, search: string, endPosition?: number): boolean {\n\t\tif (endPosition == null) {\n\t\t\tendPosition = text.length;\n\t\t}\n\n\t\t[ text, search, endPosition ] = normalizeSubstringArgs('endsWith', text, search, endPosition, true);\n\n\t\tconst start = endPosition - search.length;\n\t\tif (start < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(start, endPosition) === search;\n\t}\n\n\texport function includes(text: string, search: string, position: number = 0): boolean {\n\t\t[ text, search, position ] = normalizeSubstringArgs('includes', text, search, position);\n\t\treturn text.indexOf(search, position) !== -1;\n\t}\n\n\texport function padEnd(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padEnd requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText += repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length);\n\t\t}\n\n\t\treturn strText;\n\t}\n\n\texport function padStart(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padStart requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText = repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length) + strText;\n\t\t}\n\n\t\treturn strText;\n\t}\n\n\t/* TODO: Provide an iterator for a string to mimic [Symbol.iterator]? */\n}\n\n/**\n * A tag function for template strings to get the template string's raw string form.\n *\n * @param callSite Call site object (or a template string in TypeScript, which will transpile to one)\n * @param substitutions Values to substitute within the template string (TypeScript will generate these automatically)\n * @return String containing the raw template string with variables substituted\n *\n * @example\n * // Within TypeScript; logs 'The answer is:\\\\n42'\n * let answer = 42;\n * console.log(string.raw`The answer is:\\n${answer}`);\n *\n * @example\n * // The same example as above, but directly specifying a JavaScript object and substitution\n * console.log(string.raw({ raw: [ 'The answer is:\\\\n', '' ] }, 42));\n */\nexport const raw: (callSite: TemplateStringsArray, ...substitutions: any[]) => string = has('es6-string-raw')\n\t? (<any> String).raw\n\t: Shim.raw;\n\n/**\n * Returns the UTF-16 encoded code point value of a given position in a string.\n *\n * @param text The string containing the element whose code point is to be determined\n * @param position Position of an element within the string to retrieve the code point value from\n * @return A non-negative integer representing the UTF-16 encoded code point value\n */\nexport const fromCodePoint: (...codePoints: number[]) => string = has('es6-string-fromcodepoint')\n\t? (<any> String).fromCodePoint\n\t: Shim.fromCodePoint;\n\n/**\n * Returns the UTF-16 encoded code point value of a given position in a string.\n *\n * @param text The string containing the element whose code point is to be determined\n * @param position Position of an element within the string to retrieve the code point value from\n * @return A non-negative integer representing the UTF-16 encoded code point value\n */\nexport const codePointAt: (text: string, position?: number) => number = has('es6-string-codepointat')\n\t? wrapNative((<any> String.prototype).codePointAt)\n\t: Shim.codePointAt;\n\n/**\n * Returns a string containing the given string repeated the specified number of times.\n *\n * @param text The string to repeat\n * @param count The number of times to repeat the string\n * @return A string containing the input string repeated count times\n */\nexport const repeat: (text: string, count?: number) => string = has('es6-string-repeat')\n\t? wrapNative((<any> String.prototype).repeat)\n\t: Shim.repeat;\n\n/**\n * Determines whether a string begins with the given substring (optionally starting from a given index).\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param position The index to begin searching at\n * @return Boolean indicating if the search string was found at the beginning of the given string\n */\nexport const startsWith: (text: string, search: string, position?: number) => boolean = has('es6-string-startswith')\n\t? wrapNative((<any> String.prototype).startsWith)\n\t: Shim.startsWith;\n\n/**\n * Determines whether a string ends with the given substring.\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param endPosition The index searching should stop before (defaults to text.length)\n * @return Boolean indicating if the search string was found at the end of the given string\n */\nexport const endsWith: (text: string, search: string, endPosition?: number) => boolean = has('es6-string-endswith')\n\t? wrapNative((<any> String.prototype).endsWith)\n\t: Shim.endsWith;\n\n/**\n * Determines whether a string includes the given substring (optionally starting from a given index).\n *\n * @param text The string to look for the search string within\n * @param search The string to search for\n * @param position The index to begin searching at\n * @return Boolean indicating if the search string was found within the given string\n */\nexport const includes: (text: string, search: string, position?: number) => boolean = has('es6-string-includes')\n\t? wrapNative((<any> String.prototype).includes)\n\t: Shim.includes;\n\n/**\n * Pads the beginning of a string with a fill string until the string is a certain length.\n *\n * @param text          The string to pad\n * @param maxLength     The desired length of the string\n * @param fillString    The string to be repeated (fully or partially) until text is the maximum length\n *\n * @return A string that is at least the maximum length specified, padded in the front if necessary.\n */\nexport const padStart: (text: string, maxLength: number, fillString?: string) => string = has('es6-string-padstart')\n\t? wrapNative((<any> String.prototype).padStart)\n\t: Shim.padStart;\n\n/**\n * Pads the end of a string with a fill string until the string is a certain length.\n *\n * @param text          The string to pad\n * @param maxLength     The desired length of the string\n * @param fillString    The string to be repeated (fully or partially) until text is the maximum length\n *\n * @return A string that is at least the maximum length specified, padded at the end if necessary.\n */\nexport const padEnd: (text: string, maxLength: number, fillString?: string) => string = has('es6-string-padend')\n\t? wrapNative((<any> String.prototype).padEnd)\n\t: Shim.padEnd;\n\n\n\n// WEBPACK FOOTER //\n// string.ts","import global from './global';\nimport has from './has';\nimport { Handle } from '../interfaces';\n\nfunction executeTask(item: QueueItem | undefined): void {\n\tif (item && item.isActive && item.callback) {\n\t\titem.callback();\n\t}\n}\n\nfunction getQueueHandle(item: QueueItem, destructor?: (...args: any[]) => any): Handle {\n\treturn {\n\t\tdestroy: function (this: Handle) {\n\t\t\tthis.destroy = function () {};\n\t\t\titem.isActive = false;\n\t\t\titem.callback = null;\n\n\t\t\tif (destructor) {\n\t\t\t\tdestructor();\n\t\t\t}\n\t\t}\n\t};\n}\n\ninterface PostMessageEvent extends Event {\n\tsource: any;\n\tdata: string;\n}\n\nexport interface QueueItem {\n\tisActive: boolean;\n\tcallback: null | ((...args: any[]) => any);\n}\n\nlet checkMicroTaskQueue: () => void;\nlet microTasks: QueueItem[];\n\n/**\n * Schedules a callback to the macrotask queue.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport const queueTask = (function() {\n\tlet destructor: (...args: any[]) => any;\n\tlet enqueue: (item: QueueItem) => void;\n\n\t// Since the IE implementation of `setImmediate` is not flawless, we will test for `postMessage` first.\n\tif (has('postmessage')) {\n\t\tconst queue: QueueItem[] = [];\n\n\t\tglobal.addEventListener('message', function (event: PostMessageEvent): void {\n\t\t\t// Confirm that the event was triggered by the current window and by this particular implementation.\n\t\t\tif (event.source === global && event.data === 'dojo-queue-message') {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tif (queue.length) {\n\t\t\t\t\texecuteTask(queue.shift());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tqueue.push(item);\n\t\t\tglobal.postMessage('dojo-queue-message', '*');\n\t\t};\n\t}\n\telse if (has('setimmediate')) {\n\t\tdestructor = global.clearImmediate;\n\t\tenqueue = function (item: QueueItem): any {\n\t\t\treturn setImmediate(executeTask.bind(null, item));\n\t\t};\n\t}\n\telse {\n\t\tdestructor = global.clearTimeout;\n\t\tenqueue = function (item: QueueItem): any {\n\t\t\treturn setTimeout(executeTask.bind(null, item), 0);\n\t\t};\n\t}\n\n\tfunction queueTask(callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\t\tconst id: any = enqueue(item);\n\n\t\treturn getQueueHandle(item, destructor && function () {\n\t\t\t\tdestructor(id);\n\t\t\t});\n\t};\n\n\t// TODO: Use aspect.before when it is available.\n\treturn has('microtasks') ? queueTask : function (callback: (...args: any[]) => any): Handle {\n\t\t\tcheckMicroTaskQueue();\n\t\t\treturn queueTask(callback);\n\t\t};\n})();\n\n// When no mechanism for registering microtasks is exposed by the environment, microtasks will\n// be queued and then executed in a single macrotask before the other macrotasks are executed.\nif (!has('microtasks')) {\n\tlet isMicroTaskQueued = false;\n\n\tmicroTasks = [];\n\tcheckMicroTaskQueue = function (): void {\n\t\tif (!isMicroTaskQueued) {\n\t\t\tisMicroTaskQueued = true;\n\t\t\tqueueTask(function () {\n\t\t\t\tisMicroTaskQueued = false;\n\n\t\t\t\tif (microTasks.length) {\n\t\t\t\t\tlet item: QueueItem | undefined;\n\t\t\t\t\twhile (item = microTasks.shift()) {\n\t\t\t\t\t\texecuteTask(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Schedules an animation task with `window.requestAnimationFrame` if it exists, or with `queueTask` otherwise.\n *\n * Since requestAnimationFrame's behavior does not match that expected from `queueTask`, it is not used there.\n * However, at times it makes more sense to delegate to requestAnimationFrame; hence the following method.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport const queueAnimationTask = (function () {\n\tif (!has('raf')) {\n\t\treturn queueTask;\n\t}\n\n\tfunction queueAnimationTask(callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\t\tconst rafId: number = requestAnimationFrame(executeTask.bind(null, item));\n\n\t\treturn getQueueHandle(item, function () {\n\t\t\tcancelAnimationFrame(rafId);\n\t\t});\n\t}\n\n\t// TODO: Use aspect.before when it is available.\n\treturn has('microtasks') ? queueAnimationTask : function (callback: (...args: any[]) => any): Handle {\n\t\t\tcheckMicroTaskQueue();\n\t\t\treturn queueAnimationTask(callback);\n\t\t};\n})();\n\n/**\n * Schedules a callback to the microtask queue.\n *\n * Any callbacks registered with `queueMicroTask` will be executed before the next macrotask. If no native\n * mechanism for scheduling macrotasks is exposed, then any callbacks will be fired before any macrotask\n * registered with `queueTask` or `queueAnimationTask`.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport let queueMicroTask = (function () {\n\tlet enqueue: (item: QueueItem) => void;\n\n\tif (has('host-node')) {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tglobal.process.nextTick(executeTask.bind(null, item));\n\t\t};\n\t}\n\telse if (has('es6-promise')) {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tglobal.Promise.resolve(item).then(executeTask);\n\t\t};\n\t}\n\telse if (has('dom-mutationobserver')) {\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\tconst node = document.createElement('div');\n\t\tconst queue: QueueItem[] = [];\n\t\tconst observer = new HostMutationObserver(function (): void {\n\t\t\twhile (queue.length > 0) {\n\t\t\t\tconst item = queue.shift();\n\t\t\t\tif (item && item.isActive && item.callback) {\n\t\t\t\t\titem.callback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(node, { attributes: true });\n\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tqueue.push(item);\n\t\t\tnode.setAttribute('queueStatus', '1');\n\t\t};\n\t}\n\telse {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tcheckMicroTaskQueue();\n\t\t\tmicroTasks.push(item);\n\t\t};\n\t}\n\n\treturn function (callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\n\t\tenqueue(item);\n\n\t\treturn getQueueHandle(item);\n\t};\n})();\n\n\n\n// WEBPACK FOOTER //\n// queue.ts","import { Evented } from '@dojo/core/Evented';\nimport { WidgetBaseConstructor } from './interfaces';\nimport WidgetRegistry from './WidgetRegistry';\n\nexport default class RegistryHandler extends Evented {\n\tprivate _registries: { handle?: any, registry: WidgetRegistry }[] = [];\n\n\tadd(registry: WidgetRegistry) {\n\t\tthis._registries.unshift({ registry });\n\t}\n\n\tremove(registry: WidgetRegistry): boolean {\n\t\treturn this._registries.some((registryWrapper, i) => {\n\t\t\tif (registryWrapper.registry === registry) {\n\t\t\t\tregistry.destroy();\n\t\t\t\tthis._registries.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\treplace(original: WidgetRegistry, replacement: WidgetRegistry): boolean {\n\t\treturn this._registries.some((registryWrapper, i) => {\n\t\t\tif (registryWrapper.registry === original) {\n\t\t\t\toriginal.destroy();\n\t\t\t\tregistryWrapper.registry = replacement;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\thas(widgetLabel: string): boolean {\n\t\treturn this._registries.some((registryWrapper) => {\n\t\t\treturn registryWrapper.registry.has(widgetLabel);\n\t\t});\n\t}\n\n\tget(widgetLabel: string): WidgetBaseConstructor | null {\n\t\tfor (let i = 0; i < this._registries.length; i++) {\n\t\t\tconst registryWrapper = this._registries[i];\n\t\t\tconst item = registryWrapper.registry.get(widgetLabel);\n\t\t\tif (item) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\telse if (!registryWrapper.handle) {\n\t\t\t\tregistryWrapper.handle = registryWrapper.registry.on(`loaded:${widgetLabel}`, () => {\n\t\t\t\t\tthis.emit({ type: 'invalidate' });\n\t\t\t\t\tregistryWrapper.handle.destroy();\n\t\t\t\t\tregistryWrapper.handle = undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// RegistryHandler.ts","let browserSpecificTransitionEndEventName = '';\nlet browserSpecificAnimationEndEventName = '';\n\nexport interface VNodeProperties {\n\tenterAnimationActive?: string;\n\texitAnimationActive?: string;\n}\n\nfunction determineBrowserStyleNames(element: HTMLElement) {\n\tif ('WebkitTransition' in element.style) {\n\t\tbrowserSpecificTransitionEndEventName = 'webkitTransitionEnd';\n\t\tbrowserSpecificAnimationEndEventName = 'webkitAnimationEnd';\n\t}\n\telse if (('transition' in element.style) || ('MozTransition' in element.style)) {\n\t\tbrowserSpecificTransitionEndEventName = 'transitionend';\n\t\tbrowserSpecificAnimationEndEventName = 'animationend';\n\t}\n\telse {\n\t\tthrow new Error('Your browser is not supported');\n\t}\n}\n\nfunction initialize(element: HTMLElement) {\n\tif (browserSpecificAnimationEndEventName === '') {\n\t\tdetermineBrowserStyleNames(element);\n\t}\n}\n\nfunction runAndCleanUp(element: HTMLElement, startAnimation: () => void, finishAnimation: () => void) {\n\tinitialize(element);\n\n\tlet finished = false;\n\n\tlet transitionEnd = function () {\n\t\tif (!finished) {\n\t\t\tfinished = true;\n\t\t\telement.removeEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n\t\t\telement.removeEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\n\t\t\tfinishAnimation();\n\t\t}\n\t};\n\n\tstartAnimation();\n\n\telement.addEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\telement.addEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n}\n\nfunction exit(node: HTMLElement, properties: VNodeProperties, exitAnimation: string, removeNode: () => void) {\n\tconst activeClass = properties.exitAnimationActive || `${exitAnimation}-active`;\n\n\trunAndCleanUp(node, () => {\n\t\tnode.classList.add(exitAnimation);\n\n\t\trequestAnimationFrame(function () {\n\t\t\tnode.classList.add(activeClass);\n\t\t});\n\t}, () => {\n\t\tremoveNode();\n\t});\n}\n\nfunction enter(node: HTMLElement, properties: VNodeProperties, enterAnimation: string) {\n\tconst activeClass = properties.enterAnimationActive || `${enterAnimation}-active`;\n\n\trunAndCleanUp(node, () => {\n\t\tnode.classList.add(enterAnimation);\n\n\t\trequestAnimationFrame(function () {\n\t\t\tnode.classList.add(activeClass);\n\t\t});\n\t}, () => {\n\t\tnode.classList.remove(enterAnimation);\n\t\tnode.classList.remove(activeClass);\n\t});\n}\n\nexport default {\n\tenter,\n\texit\n};\n\n\n\n// WEBPACK FOOTER //\n// cssTransitions.ts","import { PropertyChangeRecord } from './interfaces';\n\nexport const enum DiffType {\n\tCUSTOM = 1,\n\tALWAYS,\n\tIGNORE,\n\tREFERENCE,\n\tSHALLOW,\n\tAUTO\n}\n\nfunction isObjectOrArray(value: any): boolean {\n\treturn Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\n\nfunction always(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: true,\n\t\tvalue: newProperty\n\t};\n}\n\nfunction ignore(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: false,\n\t\tvalue: newProperty\n\t};\n}\n\nfunction custom(previousProperty: any, newProperty: any, meta: any): PropertyChangeRecord {\n\tconst { diffFunction, scope } = meta;\n\tif (!diffFunction) {\n\t\treturn {\n\t\t\tchanged: false,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\treturn diffFunction.call(scope, previousProperty, newProperty);\n}\n\nfunction reference(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: previousProperty !== newProperty,\n\t\tvalue: newProperty\n\t};\n}\n\nfunction shallow(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\tlet changed = false;\n\n\tconst validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n\tconst validNewProperty = newProperty && isObjectOrArray(newProperty);\n\n\tif (!validOldProperty || !validNewProperty) {\n\t\treturn {\n\t\t\tchanged: true,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\n\tconst previousKeys = Object.keys(previousProperty);\n\tconst newKeys = Object.keys(newProperty);\n\n\tif (previousKeys.length !== newKeys.length) {\n\t\tchanged = true;\n\t}\n\telse {\n\t\tchanged = newKeys.some((key) => {\n\t\t\treturn newProperty[key] !== previousProperty[key];\n\t\t});\n\t}\n\treturn {\n\t\tchanged,\n\t\tvalue: newProperty\n\t};\n}\n\nexport default function diff(propertyName: string, diffDiffType: DiffType, previousProperty: any, newProperty: any, meta?: any) {\n\tlet result;\n\tswitch (diffDiffType) {\n\t\tcase DiffType.CUSTOM:\n\t\t\tresult = custom(previousProperty, newProperty, meta);\n\t\tbreak;\n\t\tcase DiffType.ALWAYS:\n\t\t\tresult = always(previousProperty, newProperty);\n\t\tbreak;\n\t\tcase DiffType.IGNORE:\n\t\t\tresult = ignore(previousProperty, newProperty);\n\t\tbreak;\n\t\tcase DiffType.REFERENCE:\n\t\t\tresult = reference(previousProperty, newProperty);\n\t\tbreak;\n\t\tcase DiffType.SHALLOW:\n\t\t\tresult = shallow(previousProperty, newProperty);\n\t\tbreak;\n\t\tcase DiffType.AUTO:\n\t\t\tif (typeof newProperty === 'function') {\n\t\t\t\tresult = ignore(previousProperty, newProperty);\n\t\t\t}\n\t\t\telse if (isObjectOrArray(newProperty)) {\n\t\t\t\tresult = shallow(previousProperty, newProperty);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult = reference(previousProperty, newProperty);\n\t\t\t}\n\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.warn(`no valid DiffType provided, will mark property '${propertyName}' as changed`);\n\t\t\tresult = always(previousProperty, newProperty);\n\t}\n\treturn result;\n}\n\n\n\n// WEBPACK FOOTER //\n// diff.ts","import global from '@dojo/core/global';\nimport { Handle } from '@dojo/interfaces/core';\nimport { dom, Projection, ProjectionOptions, VNodeProperties } from 'maquette';\nimport 'pepjs';\nimport cssTransitions from '../animations/cssTransitions';\nimport { Constructor, DNode, WidgetProperties } from './../interfaces';\nimport { WidgetBase } from './../WidgetBase';\n\n/**\n * Represents the attach state of the projector\n */\nexport enum ProjectorAttachState {\n\tAttached = 1,\n\tDetached\n}\n\n/**\n * Attach type for the projector\n */\nexport enum AttachType {\n\tAppend = 1,\n\tMerge = 2,\n\tReplace = 3\n}\n\nexport interface AttachOptions {\n\n\t/**\n\t * If `'append'` it will appended to the root. If `'merge'` it will merged with the root. If `'replace'` it will\n\t * replace the root.\n\t */\n\ttype: AttachType;\n\n\t/**\n\t * Element to attach the projector.\n\t */\n\troot?: Element;\n}\n\nexport interface ProjectorMixin<P extends WidgetProperties> {\n\n\t/**\n\t * Append the projector to the root.\n\t */\n\tappend(root?: Element): Handle;\n\n\t/**\n\t * Merge the projector onto the root.\n\t */\n\tmerge(root?: Element): Handle;\n\n\t/**\n\t * Replace the root with the projector node.\n\t */\n\treplace(root?: Element): Handle;\n\n\t/**\n\t * Pause the projector.\n\t */\n\tpause(): void;\n\n\t/**\n\t * Resume the projector.\n\t */\n\tresume(): void;\n\n\t/**\n\t * Schedule a render.\n\t */\n\tscheduleRender(): void;\n\n\t/**\n\t * Sets the properties for the widget. Responsible for calling the diffing functions for the properties against the\n\t * previous properties. Runs though any registered specific property diff functions collecting the results and then\n\t * runs the remainder through the catch all diff function. The aggregate of the two sets of the results is then\n\t * set as the widget's properties\n\t *\n\t * @param properties The new widget properties\n\t */\n\tsetProperties(properties: P & { [index: string]: any }): void;\n\n\t/**\n\t * Sets the widget's children\n\t */\n\tsetChildren(children: DNode[]): void;\n\n\t/**\n\t * Root element to attach the projector\n\t */\n\troot: Element;\n\n\t/**\n\t * The status of the projector\n\t */\n\treadonly projectorState: ProjectorAttachState;\n}\n\nconst eventHandlers = [\n\t'ontouchcancel',\n\t'ontouchend',\n\t'ontouchmove',\n\t'ontouchstart',\n\t'onblur',\n\t'onchange',\n\t'onclick',\n\t'ondblclick',\n\t'onfocus',\n\t'oninput',\n\t'onkeydown',\n\t'onkeypress',\n\t'onkeyup',\n\t'onload',\n\t'onmousedown',\n\t'onmouseenter',\n\t'onmouseleave',\n\t'onmousemove',\n\t'onmouseout',\n\t'onmouseover',\n\t'onmouseup',\n\t'onmousewheel',\n\t'onscroll',\n\t'onsubmit'\n];\n\nexport function ProjectorMixin<P, T extends Constructor<WidgetBase<P>>>(base: T): T & Constructor<ProjectorMixin<P>> {\n\treturn class extends base {\n\n\t\tpublic projectorState: ProjectorAttachState;\n\n\t\tprivate _root: Element;\n\t\tprivate _attachHandle: Handle;\n\t\tprivate _projectionOptions: ProjectionOptions;\n\t\tprivate _projection: Projection | undefined;\n\t\tprivate _scheduled: number | undefined;\n\t\tprivate _paused: boolean;\n\t\tprivate _boundDoRender: FrameRequestCallback;\n\t\tprivate _boundRender: Function;\n\n\t\tconstructor(...args: any[]) {\n\t\t\tsuper(...args);\n\n\t\t\tthis._projectionOptions = {\n\t\t\t\ttransitions: cssTransitions,\n\t\t\t\teventHandlerInterceptor: this.eventHandlerInterceptor.bind(this)\n\t\t\t};\n\n\t\t\tthis._boundDoRender = this.doRender.bind(this);\n\t\t\tthis._boundRender = this.__render__.bind(this);\n\n\t\t\tthis.own(this.on('widget:children', this.invalidate));\n\t\t\tthis.own(this.on('properties:changed', this.invalidate));\n\t\t\tthis.own(this.on('invalidated', this.scheduleRender));\n\n\t\t\tthis.root = document.body;\n\t\t\tthis.projectorState = ProjectorAttachState.Detached;\n\t\t}\n\n\t\tpublic append(root?: Element) {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Append,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this.attach(options);\n\t\t}\n\n\t\tpublic merge(root?: Element) {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Merge,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this.attach(options);\n\t\t}\n\n\t\tpublic replace(root?: Element) {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Replace,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this.attach(options);\n\t\t}\n\n\t\tpublic pause() {\n\t\t\tif (this._scheduled) {\n\t\t\t\tglobal.cancelAnimationFrame(this._scheduled);\n\t\t\t\tthis._scheduled = undefined;\n\t\t\t}\n\t\t\tthis._paused = true;\n\t\t}\n\n\t\tpublic resume() {\n\t\t\tthis._paused = false;\n\t\t\tthis.scheduleRender();\n\t\t}\n\n\t\tpublic scheduleRender() {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached && !this._scheduled && !this._paused) {\n\t\t\t\tthis._scheduled = global.requestAnimationFrame(this._boundDoRender);\n\t\t\t}\n\t\t}\n\n\t\tpublic set root(root: Element) {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\tthrow new Error('Projector already attached, cannot change root element');\n\t\t\t}\n\t\t\tthis._root = root;\n\t\t}\n\n\t\tpublic get root(): Element {\n\t\t\treturn this._root;\n\t\t}\n\n\t\tpublic setChildren(children: DNode[]): void {\n\t\t\tsuper.__setChildren__(children);\n\t\t}\n\n\t\tpublic setProperties(properties: P & { [index: string]: any }): void {\n\t\t\tsuper.__setProperties__(properties);\n\t\t}\n\n\t\tpublic __render__() {\n\t\t\tconst result = super.__render__();\n\t\t\tif (typeof result === 'string' || result === null) {\n\t\t\t\tthrow new Error('Must provide a VNode at the root of a projector');\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tprivate eventHandlerInterceptor(propertyName: string, eventHandler: Function, domNode: Element, properties: VNodeProperties) {\n\t\t\tif (eventHandlers.indexOf(propertyName) > -1) {\n\t\t\t\treturn function(this: Node, ...args: any[]) {\n\t\t\t\t\treturn eventHandler.apply(properties.bind || this, args);\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// remove \"on\" from event name\n\t\t\t\tconst eventName = propertyName.substr(2);\n\t\t\t\tdomNode.addEventListener(eventName, (...args: any[]) => {\n\t\t\t\t\teventHandler.apply(properties.bind || this, args);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tprivate doRender() {\n\t\t\tthis._scheduled = undefined;\n\n\t\t\tif (this._projection) {\n\t\t\t\tthis._projection.update(this._boundRender());\n\t\t\t}\n\t\t}\n\n\t\tprivate attach({ type, root }: AttachOptions): Handle {\n\t\t\tif (root) {\n\t\t\t\tthis.root = root;\n\t\t\t}\n\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\treturn this._attachHandle;\n\t\t\t}\n\n\t\t\tthis.projectorState = ProjectorAttachState.Attached;\n\n\t\t\tthis._attachHandle = this.own({\n\t\t\t\tdestroy: () => {\n\t\t\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\tthis._projection = undefined;\n\t\t\t\t\t\tthis.projectorState = ProjectorAttachState.Detached;\n\t\t\t\t\t}\n\t\t\t\t\tthis._attachHandle = { destroy() { } };\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tswitch (type) {\n\t\t\t\tcase AttachType.Append:\n\t\t\t\t\tthis._projection = dom.append(this.root, this._boundRender(), this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t\tcase AttachType.Merge:\n\t\t\t\t\tthis._projection = dom.merge(this.root, this._boundRender(), this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t\tcase AttachType.Replace:\n\t\t\t\t\tthis._projection = dom.replace(this.root, this._boundRender(), this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn this._attachHandle;\n\t\t}\n\t};\n}\n\nexport default ProjectorMixin;\n\n\n\n// WEBPACK FOOTER //\n// Projector.ts","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/timers-browserify/main.js\n// module id = 53\n// module chunks = 0","import Router from '@dojo/routing/Router';\nimport { Parameters } from '@dojo/routing/interfaces';\nimport HashHistory from '@dojo/routing/history/HashHistory';\n\ninterface FilterParameters extends Parameters {\n\tfilter: 'active' | 'all' | 'completed';\n}\n\nconst router = new Router({ history: new HashHistory() });\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/routes.ts","import Map from '@dojo/shim/Map';\nimport uuid from '@dojo/core/uuid';\nimport { assign } from '@dojo/core/lang';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { w, v } from '@dojo/widget-core/d';\nimport { registry } from '@dojo/widget-core/d';\n\nimport TodoHeader from './TodoHeader';\nimport TodoList from './TodoList';\nimport TodoItem from './TodoItem';\nimport TodoFooter from './TodoFooter';\nimport TodoFilter from './TodoFilter';\n\nimport * as css from './styles/todoApp.css';\n\nregistry.define('todo-header', TodoHeader);\nregistry.define('todo-list', TodoList);\nregistry.define('todo-item', TodoItem);\nregistry.define('todo-footer', TodoFooter);\nregistry.define('todo-filter', TodoFilter);\n\nexport interface Todo {\n\tid: string;\n\tlabel: string;\n\tcompleted: boolean;\n\tediting?: boolean;\n}\n\nexport interface TodoAppProperties extends WidgetProperties {\n\tfilter?: 'all' | 'active' | 'completed';\n}\n\nexport const TodoAppBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\nexport default class TodoApp extends TodoAppBase<TodoAppProperties> {\n\n\tprivate todos: Map<string, Todo> = new Map<string, Todo>();\n\tprivate todoItem = '';\n\tprivate completedCount = 0;\n\tprivate updated: string = uuid();\n\n\trender() {\n\t\tconst { todoItem, updateTodo, updated, todos, completedCount, clearCompleted, editTodo, removeTodo, toggleTodo, toggleAllTodos } = this;\n\t\tconst activeFilter = this.properties.filter || 'all';\n\t\tconst allCompleted = todos.size !== 0 && completedCount === todos.size;\n\t\tconst activeCount = todos.size - completedCount;\n\t\tconst completedItems = completedCount > 0;\n\n\t\treturn v('section', { classes: this.classes(css.todoapp) }, [\n\t\t\tw<TodoHeader>('todo-header', { value: todoItem, updateTodo, allCompleted, addTodo: this.setTodo, toggleAllTodos }),\n\t\t\tv('section', {}, [\n\t\t\t\tw<TodoList>('todo-list', { updated, activeFilter, todos, editTodo, removeTodo, toggleTodo, updateTodo: this.setTodo })\n\t\t\t]),\n\t\t\ttodos.size ? w<TodoFooter>('todo-footer', { activeFilter, clearCompleted, activeCount, completedItems }) : null\n\t\t]);\n\t}\n\n\tprivate removeTodo(id: string) {\n\t\tconst todo = this.todos.get(id);\n\t\tif (todo) {\n\t\t\tthis.todos.delete(id);\n\t\t\ttodo.completed && --this.completedCount;\n\t\t\tthis.onUpdate();\n\t\t}\n\t}\n\n\tprivate toggleTodo(id: string) {\n\t\tconst todo = this.todos.get(id);\n\t\tif (todo) {\n\t\t\tconst completed = !todo.completed;\n\t\t\tcompleted ? ++this.completedCount : --this.completedCount;\n\t\t\tthis.setTodo({ completed }, id);\n\t\t}\n\t}\n\n\tprivate toggleAllTodos() {\n\t\tconst completed = this.completedCount !== this.todos.size;\n\t\tthis.todos.forEach((todo, key) => {\n\t\t\tthis.setTodo({ completed }, key);\n\t\t});\n\t\tthis.completedCount = completed ? this.todos.size : 0;\n\t\tthis.onUpdate();\n\t}\n\n\tprivate editTodo(id: string) {\n\t\tconst todo = this.todos.get(id);\n\t\tif (todo) {\n\t\t\tthis.setTodo({ editing: true}, id);\n\t\t\tthis.onUpdate();\n\t\t}\n\t}\n\n\tprivate clearCompleted() {\n\t\tthis.todos.forEach((todo, key) => {\n\t\t\tif (todo.completed) {\n\t\t\t\tthis.todos.delete(key);\n\t\t\t}\n\t\t});\n\t\tthis.completedCount = 0;\n\t\tthis.onUpdate();\n\t}\n\n\tprivate updateTodo(todo: string) {\n\t\tthis.todoItem = todo;\n\t\tthis.invalidate();\n\t}\n\n\tprivate setTodo(todo: Partial<Todo>, id?: string) {\n\t\tif (!id) {\n\t\t\tid = uuid();\n\t\t\tthis.todoItem = '';\n\t\t}\n\t\tif (todo.label) {\n\t\t\ttodo.label = todo.label.trim();\n\t\t\tif (!todo.label) {\n\t\t\t\tthis.removeTodo(id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.todos.set(id, assign(<any> { id }, this.todos.get(id) || {}, todo));\n\t\tthis.onUpdate();\n\t}\n\n\tprivate onUpdate() {\n\t\tthis.updated = uuid();\n\t\tthis.invalidate();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoApp.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { v } from '@dojo/widget-core/d';\n\nimport * as css from './styles/todoFilter.css';\n\nexport interface TodoFilterProperties extends WidgetProperties {\n\tactiveFilter: 'all' | 'active' | 'completed';\n}\n\nexport const TodoFilterBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\nexport default class TodoFilter extends TodoFilterBase<TodoFilterProperties> {\n\n\trender() {\n\t\tconst { activeFilter } = this.properties;\n\n\t\treturn v('ul', { classes: this.classes(css.filters) }, [\n\t\t\tv('li', [\n\t\t\t\tv('a', { href: '#all', innerHTML: 'all', classes: this.classes(activeFilter === 'all' ? css.selected : null) }),\n\t\t\t\tv('a', { href: '#active', innerHTML: 'active', classes: this.classes(activeFilter === 'active' ? css.selected : null) }),\n\t\t\t\tv('a', { href: '#completed', innerHTML: 'completed', classes: this.classes(activeFilter === 'completed' ? css.selected : null) })\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoFilter.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { v, w } from '@dojo/widget-core/d';\nimport TodoFilter from './TodoFilter';\n\nimport * as css from './styles/todoFooter.css';\n\nexport interface TodoFooterProperties extends WidgetProperties {\n\tactiveCount: number;\n\tclearCompleted: Function;\n\tactiveFilter: 'all' | 'active' | 'completed';\n\tcompletedItems: boolean;\n}\n\nexport const TodoHeaderBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\nexport default class TodoFooter extends TodoHeaderBase<TodoFooterProperties> {\n\n\tclearCompleted() {\n\t\tthis.properties.clearCompleted();\n\t}\n\n\trender() {\n\t\tconst { activeFilter, activeCount, completedItems } = this.properties;\n\t\tconst countLabel = activeCount === 1 ? 'item' : 'items';\n\n\t\treturn v('footer', { classes: this.classes(css.footer) }, [\n\t\t\tv('span', { classes: this.classes(css.todoCount) }, [\n\t\t\t\tv('strong', [activeCount + ' ']),\n\t\t\t\tv('span', [countLabel + ' left'])\n\t\t\t]),\n\t\t\tw<TodoFilter>('todo-filter', { activeFilter }),\n\t\t\tcompletedItems ? v('button', {\n\t\t\t\tonclick: this.clearCompleted,\n\t\t\t\tinnerHTML: 'Clear completed',\n\t\t\t\tclasses: this.classes(css.clearCompleted)\n\t\t\t}) : null\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoFooter.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { v } from '@dojo/widget-core/d';\n\nimport * as css from './styles/todoHeader.css';\n\nexport interface TodoHeaderProperties extends WidgetProperties {\n\tallCompleted: boolean;\n\taddTodo: Function;\n\ttoggleAllTodos: Function;\n\tupdateTodo: Function;\n\tvalue: string;\n}\n\nexport const TodoHeaderBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\nexport default class TodoHeader extends TodoHeaderBase<TodoHeaderProperties> {\n\n\trender() {\n\t\tconst { properties: { value, allCompleted } } = this;\n\t\tconst newTodoProperties: any = {\n\t\t\tid: 'new-todo',\n\t\t\tafterCreate: this.afterCreate,\n\t\t\tclasses: this.classes(css.newTodo),\n\t\t\tonkeyup: this.addTodo,\n\t\t\toninput: this.updateTodo,\n\t\t\tvalue,\n\t\t\tplaceholder: 'What needs to be done?'\n\t\t};\n\n\t\treturn v('header', [\n\t\t\tv('h1', { classes: this.classes(css.title) }, [ 'todos' ]),\n\t\t\tv('input', newTodoProperties),\n\t\t\tv('input', { onchange: this.toggleAllTodos, checked: allCompleted, type: 'checkbox', classes: this.classes(css.toggleAll) })\n\t\t]);\n\t}\n\n\tprivate addTodo({ which, target: { value: label } }: any) {\n\t\tif (which === 13 && label) {\n\t\t\tthis.properties.addTodo({ label, completed: false });\n\t\t}\n\t}\n\n\tprivate updateTodo({ target: { value } }: any) {\n\t\tthis.properties.updateTodo(value);\n\t}\n\n\tprivate toggleAllTodos() {\n\t\tthis.properties.toggleAllTodos();\n\t}\n\n\tprivate afterCreate(element: HTMLInputElement) {\n\t\tsetTimeout(() => element.focus(), 0);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoHeader.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { v } from '@dojo/widget-core/d';\nimport { Todo } from './TodoApp';\n\nimport * as css from './styles/todoItem.css';\n\nexport interface TodoItemProperties extends WidgetProperties {\n\ttodo: Todo;\n\teditTodo: Function;\n\ttoggleTodo: Function;\n\tremoveTodo: Function;\n\tupdateTodo: Function;\n}\n\nexport const TodoItemBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\nexport default class TodoItem extends TodoItemBase<TodoItemProperties> {\n\n\trender() {\n\t\tconst { properties: { todo } } = this;\n\n\t\treturn v('li', { id: 'todo-item', classes: this.classes(css.todoItem, Boolean(todo.editing) ? css.editing : null, Boolean(todo.completed && !todo.editing) ? css.completed : null) }, [\n\t\t\tv('div', { classes: this.classes(css.view) }, [\n\t\t\t\tv('input', { id: 'toggle', classes: this.classes(css.toggle), type: 'checkbox', checked: todo.completed, onchange: this.toggleTodo }),\n\t\t\t\tv('label', { classes: this.classes(css.todoLabel), innerHTML: todo.label, ondblclick: this.editTodo }),\n\t\t\t\tv('button', { id: 'destroy', onclick: this.removeTodo, classes: this.classes(css.destroy) })\n\t\t\t]),\n\t\t\ttodo.editing ? v('input', { afterCreate: this.afterCreate, onkeyup: this.updateTodo, onblur: this.updateTodo, value: todo.label, classes: this.classes(css.edit) }) : null\n\t\t]);\n\t}\n\n\tprivate toggleTodo() {\n\t\tthis.properties.toggleTodo(this.properties.key);\n\t}\n\n\tprivate editTodo() {\n\t\tthis.properties.editTodo(this.properties.key);\n\t}\n\n\tprivate updateTodo({ which, target: { value: label } }: any) {\n\t\tconst { properties: { todo, key } } = this;\n\t\tconst editing = false;\n\n\t\tif (which === 13 || (!which && todo.editing)) {\n\t\t\tlabel ? this.properties.updateTodo({ label, editing }, key) : this.removeTodo();\n\t\t}\n\t\telse if (which === 27) {\n\t\t\tthis.properties.updateTodo({ editing }, key);\n\t\t}\n\t}\n\n\tprivate removeTodo() {\n\t\tthis.properties.removeTodo(this.properties.key);\n\t}\n\n\tprivate afterCreate(element: HTMLInputElement) {\n\t\tsetTimeout(() => element.focus(), 0);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoItem.ts","import Map from '@dojo/shim/Map';\nimport { from as arrayFrom } from '@dojo/shim/array';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { ThemeableMixin, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { WidgetProperties } from '@dojo/widget-core/interfaces';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Todo } from './TodoApp';\nimport TodoItem from './TodoItem';\n\nimport * as css from './styles/todoList.css';\n\nexport interface TodoListProperties extends WidgetProperties {\n\ttodos: Map<string, Todo>;\n\tupdated: string;\n\tactiveFilter: 'all' | 'active' | 'completed';\n\ttoggleTodo: Function;\n\tremoveTodo: Function;\n\teditTodo: Function;\n\tupdateTodo: Function;\n}\n\nexport const TodoListBase = ThemeableMixin(WidgetBase);\n\nfunction filter(filterName: string, todo: Todo): boolean {\n\tswitch (filterName) {\n\t\tcase 'completed':\n\t\t\treturn !!todo.completed;\n\t\tcase 'active':\n\t\t\treturn !todo.completed;\n\t\tdefault:\n\t\t\treturn true;\n\t}\n}\n\n@theme(css)\nexport default class TodoList extends TodoListBase<TodoListProperties> {\n\trender() {\n\t\tconst { properties: { activeFilter, todos, toggleTodo, editTodo, updateTodo, removeTodo } } = this;\n\t\tconst todoItems = arrayFrom(todos.entries()).filter(([ , value ]) => filter(activeFilter, value));\n\n\t\treturn v('ul', { id: 'todo-list', classes: this.classes(css.todoList) }, todoItems.map(([ key, todo ]) => {\n\t\t\treturn w<TodoItem>('todo-item', { key, todo, toggleTodo, editTodo, removeTodo, updateTodo });\n\t\t}));\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/TodoList.ts"],"sourceRoot":""}